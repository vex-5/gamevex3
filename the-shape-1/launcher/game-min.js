var egret;!function(t){t.egret_string_code={},t.egret_string_code[-1]="不存在的stringId:{0}",t.egret_string_code[1e3]="Browser.isMobile接口参数已经变更，请尽快调整用法为 egret.MainContext.deviceType == egret.MainContext.DEVICE_MOBILE",t.egret_string_code[1001]="该方法目前不应传入 resolutionPolicy 参数，请在 docs/1.0_Final_ReleaseNote中查看如何升级",t.egret_string_code[1002]="egret.Ticker是框架内部使用的单例，不允许在外部实例化，计时器请使用egret.Timer类！",t.egret_string_code[1003]="Ticker#setTimeout方法即将废弃,请使用egret.setTimeout",t.egret_string_code[1004]="ExternalInterface调用了js没有注册的方法: {0}",t.egret_string_code[1005]="设置了已经存在的blendMode: {0}",t.egret_string_code[1006]="child不在当前容器内",t.egret_string_code[1007]="提供的索引超出范围",t.egret_string_code[1008]="child未被addChild到该parent",t.egret_string_code[1009]="设置了已经存在的适配模式:{0}",t.egret_string_code[1010]="addEventListener侦听函数不能为空",t.egret_string_code[1011]='BitmapText找不到文字所对应的纹理:"{0}"',t.egret_string_code[1012]="egret.BitmapTextSpriteSheet已废弃，请使用egret.BitmapFont代替。",t.egret_string_code[1013]="TextField.setFocus 没有实现",t.egret_string_code[1014]="Ease不能被实例化",t.egret_string_code[1015]="xml not found!",t.egret_string_code[1016]="{0}已经废弃",t.egret_string_code[1017]="JSON文件格式不正确: {0}\ndata: {1}",t.egret_string_code[1018]="egret_html5_localStorage.setItem保存失败,key={0}&value={1}",t.egret_string_code[1019]="网络异常:{0}",t.egret_string_code[1020]="无法初始化着色器",t.egret_string_code[1021]="当前浏览器不支持webgl",t.egret_string_code[1022]="{0} ArgumentError",t.egret_string_code[1023]="此方法在ScrollView内不可用!",t.egret_string_code[1024]="使用了尚未实现的ScaleMode",t.egret_string_code[1025]="遇到文件尾",t.egret_string_code[1026]="EncodingError! The code point {0} could not be encoded.",t.egret_string_code[1027]="DecodingError",t.egret_string_code[1028]="调用了未配置的注入规则:{0}。 请先在项目初始化里配置指定的注入规则，再调用对应单例。",t.egret_string_code[1029]="Function.prototype.bind - what is trying to be bound is not callable",t.egret_string_code[1030]="该API已废弃",t.egret_string_code[1031]="setVolume已废弃，请使用this.volume = value代替",t.egret_string_code[1032]="getVolume已废弃，请使用this.volume代替",t.egret_string_code[2e3]="RES.createGroup()传入了配置中不存在的键值: {0}",t.egret_string_code[2001]='RES加载了不存在或空的资源组:"{0}"',t.egret_string_code[3e3]="主题配置文件加载失败: {0}",t.egret_string_code[3001]="找不到主题中所配置的皮肤类名: {0}",t.egret_string_code[3002]='索引:"{0}"超出集合元素索引范围',t.egret_string_code[3003]="在此组件中不可用，若此组件为容器类，请使用",t.egret_string_code[3004]="addChild(){0}addElement()代替",t.egret_string_code[3005]="addChildAt(){0}addElementAt()代替",t.egret_string_code[3006]="removeChild(){0}removeElement()代替",t.egret_string_code[3007]="removeChildAt(){0}removeElementAt()代替",t.egret_string_code[3008]="setChildIndex(){0}setElementIndex()代替",t.egret_string_code[3009]="swapChildren(){0}swapElements()代替",t.egret_string_code[3010]="swapChildrenAt(){0}swapElementsAt()代替",t.egret_string_code[3011]='索引:"{0}"超出可视元素索引范围',t.egret_string_code[3012]="此方法在Scroller组件内不可用!",t.egret_string_code[3013]="UIStage是GUI根容器，只能有一个此实例在显示列表中！",t.egret_string_code[3014]="propNotPropOrStyle",t.egret_string_code[4e3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)",t.egret_string_code[4001]="Abstract class can not be instantiated!",t.egret_string_code[4002]="Unnamed data!",t.egret_string_code[4003]="Nonsupport version!",t.egret_string_code[4004]="Abstract method needs to be implemented in subclass!",t.egret_string_code[3100]="当前浏览器不支持WebSocket",t.egret_string_code[3101]="请先连接WebSocket",t.egret_string_code[3102]="请先设置type为二进制类型"}(egret||(egret={})),function(t){t.egret_string_code={},t.egret_string_code[-1]="不存在的stringId:{0}",t.egret_string_code[1e3]="Browser.isMobile接口参数已经变更，请尽快调整用法为 egret.MainContext.deviceType == egret.MainContext.DEVICE_MOBILE",t.egret_string_code[1001]="该方法目前不应传入 resolutionPolicy 参数，请在 docs/1.0_Final_ReleaseNote中查看如何升级",t.egret_string_code[1002]="egret.Ticker是框架内部使用的单例，不允许在外部实例化，计时器请使用egret.Timer类！",t.egret_string_code[1003]="Ticker#setTimeout方法即将废弃,请使用egret.setTimeout",t.egret_string_code[1004]="ExternalInterface调用了js没有注册的方法: {0}",t.egret_string_code[1005]="设置了已经存在的blendMode: {0}",t.egret_string_code[1006]="child不在当前容器内",t.egret_string_code[1007]="提供的索引超出范围",t.egret_string_code[1008]="child未被addChild到该parent",t.egret_string_code[1009]="设置了已经存在的适配模式:{0}",t.egret_string_code[1010]="addEventListener侦听函数不能为空",t.egret_string_code[1011]='BitmapText找不到文字所对应的纹理:"{0}"',t.egret_string_code[1012]="egret.BitmapTextSpriteSheet已废弃，请使用egret.BitmapFont代替。",t.egret_string_code[1013]="TextField.setFocus 没有实现",t.egret_string_code[1014]="Ease不能被实例化",t.egret_string_code[1015]="xml not found!",t.egret_string_code[1016]="{0}已经废弃",t.egret_string_code[1017]="JSON文件格式不正确: {0}\ndata: {1}",t.egret_string_code[1018]="egret_html5_localStorage.setItem保存失败,key={0}&value={1}",t.egret_string_code[1019]="网络异常:{0}",t.egret_string_code[1020]="无法初始化着色器",t.egret_string_code[1021]="当前浏览器不支持webgl",t.egret_string_code[1022]="{0} ArgumentError",t.egret_string_code[1023]="此方法在ScrollView内不可用!",t.egret_string_code[1024]="使用了尚未实现的ScaleMode",t.egret_string_code[1025]="遇到文件尾",t.egret_string_code[1026]="EncodingError! The code point {0} could not be encoded.",t.egret_string_code[1027]="DecodingError",t.egret_string_code[1028]="调用了未配置的注入规则:{0}。 请先在项目初始化里配置指定的注入规则，再调用对应单例。",t.egret_string_code[1029]="Function.prototype.bind - what is trying to be bound is not callable",t.egret_string_code[1030]="该API已废弃",t.egret_string_code[1031]="setVolume已废弃，请使用this.volume = value代替",t.egret_string_code[1032]="getVolume已废弃，请使用this.volume代替",t.egret_string_code[2e3]="RES.createGroup()传入了配置中不存在的键值: {0}",t.egret_string_code[2001]='RES加载了不存在或空的资源组:"{0}"',t.egret_string_code[3e3]="主题配置文件加载失败: {0}",t.egret_string_code[3001]="找不到主题中所配置的皮肤类名: {0}",t.egret_string_code[3002]='索引:"{0}"超出集合元素索引范围',t.egret_string_code[3003]="在此组件中不可用，若此组件为容器类，请使用",t.egret_string_code[3004]="addChild(){0}addElement()代替",t.egret_string_code[3005]="addChildAt(){0}addElementAt()代替",t.egret_string_code[3006]="removeChild(){0}removeElement()代替",t.egret_string_code[3007]="removeChildAt(){0}removeElementAt()代替",t.egret_string_code[3008]="setChildIndex(){0}setElementIndex()代替",t.egret_string_code[3009]="swapChildren(){0}swapElements()代替",t.egret_string_code[3010]="swapChildrenAt(){0}swapElementsAt()代替",t.egret_string_code[3011]='索引:"{0}"超出可视元素索引范围',t.egret_string_code[3012]="此方法在Scroller组件内不可用!",t.egret_string_code[3013]="UIStage是GUI根容器，只能有一个此实例在显示列表中！",t.egret_string_code[3014]="propNotPropOrStyle",t.egret_string_code[4e3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)",t.egret_string_code[4001]="Abstract class can not be instantiated!",t.egret_string_code[4002]="Unnamed data!",t.egret_string_code[4003]="Nonsupport version!",t.egret_string_code[4004]="Abstract method needs to be implemented in subclass!",t.egret_string_code[3100]="当前浏览器不支持WebSocket",t.egret_string_code[3101]="请先连接WebSocket",t.egret_string_code[3102]="请先设置type为二进制类型"}(egret||(egret={}));var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i};!function(t){function e(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];if(n=t.egret_string_code[e])for(var r=i.length,s=0;s<r;s++)n=n.replace("{"+s+"}",i[s]);return n}var i=function(){function e(){}return e.openLogByType=function(t){switch(null==e.logFuncs&&(e.logFuncs={error:console.error,debug:console.debug,warn:console.warn,info:console.info,log:console.log}),t){case e.OFF:console.error=function(){};case e.ERROR:console.warn=function(){};case e.WARN:console.info=function(){},console.log=function(){};case e.INFO:console.debug=function(){}}switch(t){case e.ALL:console.debug=e.logFuncs.debug;case e.INFO:console.log=e.logFuncs.log,console.info=e.logFuncs.info;case e.WARN:console.warn=e.logFuncs.warn;case e.ERROR:console.error=e.logFuncs.error}},e.fatal=function(e,i){throw void 0===i&&(i=null),Error(t.Logger.getTraceCode("Fatal",e,i))},e.info=function(e,i){void 0===i&&(i=null),t.Logger.traceToConsole("Info",e,i)},e.warning=function(e,i){void 0===i&&(i=null),t.Logger.traceToConsole("Warning",e,i)},e.traceToConsole=function(t,e,i){},e.getTraceCode=function(t,e,i){return"["+t+"]"+e+(null==i?"":":"+i)},e.ALL="all",e.DEBUG="debug",e.INFO="info",e.WARN="warn",e.ERROR="error",e.OFF="off",e}();t.Logger=i,i.prototype.__class__="egret.Logger",t.getString=e,t.$error=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];n.unshift(t),(n=e.apply(null,n))?i.fatal(n):i.fatal(e(-1,t))},t.$warn=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];n.unshift(t),(n=e.apply(null,n))?i.warning(n):i.warning(e(-1,t))}}(egret||(egret={})),function(t){var e=function(){function t(){this._hashCode=t.hashCount++}return Object.defineProperty(t.prototype,"hashCode",{get:function(){return this._hashCode},enumerable:!0,configurable:!0}),t.hashCount=1,t}();t.HashObject=e,e.prototype.__class__="egret.HashObject"}(egret||(egret={})),function(t){var e=function(t){function e(e){void 0===e&&(e=300),t.call(this),this.objectPool=[],this._length=0,1>e&&(e=1),this.autoDisposeTime=e,this.frameCount=0}__extends(e,t);var i=e.prototype;return i._checkFrame=function(){this.frameCount--,0>=this.frameCount&&this.dispose()},Object.defineProperty(i,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),i.push=function(t){var i=this.objectPool;-1==i.indexOf(t)&&(i.push(t),t.__recycle&&t.__recycle(),this._length++,0==this.frameCount&&(this.frameCount=this.autoDisposeTime,e._callBackList.push(this)))},i.pop=function(){return 0==this._length?null:(this._length--,this.objectPool.pop())},i.dispose=function(){0<this._length&&(this.objectPool=[],this._length=0),this.frameCount=0;var t=e._callBackList,i=t.indexOf(this);-1!=i&&t.splice(i,1)},e._callBackList=[],e}(t.HashObject);t.Recycler=e,e.prototype.__class__="egret.Recycler"}(egret||(egret={})),function(t){t.__START_TIME,t.getTimer=function(){return Date.now()-t.__START_TIME}}(egret||(egret={})),function(t){t.__callLaterFunctionList=[],t.__callLaterThisList=[],t.__callLaterArgsList=[],t.callLater=function(e,i){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t.__callLaterFunctionList.push(e),t.__callLaterThisList.push(i),t.__callLaterArgsList.push(n)},t.__callAsyncFunctionList=[],t.__callAsyncThisList=[],t.__callAsyncArgsList=[],t.__callAsync=function(e,i){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t.__callAsyncFunctionList.push(e),t.__callAsyncThisList.push(i),t.__callAsyncArgsList.push(n)}}(egret||(egret={})),function(t){var e=function(){function e(){}var i=e.prototype;return i.call=function(t){this.callback&&this.callback.call(this.thisObject,t)},i.dispose=function(){this.thisObject=this.callback=null,e.__freeList.push(this)},e.push=function(i,n){var r;(r=e.__freeList.length?e.__freeList.pop():new t.RenderCommand).callback=i,r.thisObject=n,t.MainContext.__DRAW_COMMAND_LIST.push(r)},e.__freeList=[],e}();t.RenderCommand=e,e.prototype.__class__="egret.RenderCommand"}(egret||(egret={})),function(t){var e=function(e){function i(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),e.call(this),this.data=null,this._type="",this._cancelable=this._bubbles=!1,this._eventPhase=2,this._target=this._currentTarget=null,this._isPropagationImmediateStopped=this._isPropagationStopped=this._isDefaultPrevented=!1,this.isNew=!0,this._type=t,this._bubbles=i,this._cancelable=n}__extends(i,e);var n=i.prototype;return Object.defineProperty(n,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(n,"bubbles",{get:function(){return this._bubbles},enumerable:!0,configurable:!0}),Object.defineProperty(n,"cancelable",{get:function(){return this._cancelable},enumerable:!0,configurable:!0}),Object.defineProperty(n,"eventPhase",{get:function(){return this._eventPhase},enumerable:!0,configurable:!0}),Object.defineProperty(n,"currentTarget",{get:function(){return this._currentTarget},enumerable:!0,configurable:!0}),Object.defineProperty(n,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),n.isDefaultPrevented=function(){return this._isDefaultPrevented},n.preventDefault=function(){this._cancelable&&(this._isDefaultPrevented=!0)},n.stopPropagation=function(){this._bubbles&&(this._isPropagationStopped=!0)},n.stopImmediatePropagation=function(){this._bubbles&&(this._isPropagationImmediateStopped=!0)},n._reset=function(){this.isNew?this.isNew=!1:(this._isPropagationImmediateStopped=this._isPropagationStopped=this._isDefaultPrevented=!1,this._currentTarget=this._target=null,this._eventPhase=2)},n.__recycle=function(){this.data=this._target=this._currentTarget=null},i._dispatchByTarget=function(e,i,n,r,s,a){void 0===s&&(s=!1),void 0===a&&(a=!1);var o=e.eventRecycler;o||(o=e.eventRecycler=new t.Recycler);var h=o.pop();if(h?h._type=n:h=new e(n),h._bubbles=s,h._cancelable=a,r)for(var l in r)h[l]=r[l],null!==h[l]&&(r[l]=null);return e=i.dispatchEvent(h),o.push(h),e},i._getPropertyData=function(t){var e=t._props;return e||(e=t._props={}),e},i.dispatchEvent=function(t,e,n,r){void 0===n&&(n=!1);var s=i._getPropertyData(i);null!=r&&(s.data=r),i._dispatchByTarget(i,t,e,s,n)},i.ADDED_TO_STAGE="addedToStage",i.REMOVED_FROM_STAGE="removedFromStage",i.ADDED="added",i.REMOVED="removed",i.COMPLETE="complete",i.LOOP_COMPLETE="loopcomplete",i.ENTER_FRAME="enterFrame",i.RENDER="render",i.FINISH_RENDER="finishRender",i.FINISH_UPDATE_TRANSFORM="finishUpdateTransform",i.LEAVE_STAGE="leaveStage",i.RESIZE="resize",i.CHANGE="change",i.ACTIVATE="activate",i.DEACTIVATE="deactivate",i.CLOSE="close",i.CONNECT="connect",i}(t.HashObject);t.Event=e,e.prototype.__class__="egret.Event"}(egret||(egret={})),function(t){var e=function(t){function e(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n),this._status=0}return __extends(e,t),Object.defineProperty(e.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),e.dispatchHTTPStatusEvent=function(t,i){null==e.httpStatusEvent&&(e.httpStatusEvent=new e(e.HTTP_STATUS)),e.httpStatusEvent._status=i,t.dispatchEvent(e.httpStatusEvent)},e.HTTP_STATUS="httpStatus",e.httpStatusEvent=null,e}(t.Event);t.HTTPStatusEvent=e,e.prototype.__class__="egret.HTTPStatusEvent"}(egret||(egret={})),function(t){var e=function(t){function e(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n)}return __extends(e,t),e.SOUND_COMPLETE="soundComplete",e}(t.Event);t.SoundEvent=e,e.prototype.__class__="egret.SoundEvent"}(egret||(egret={})),function(t){var e=function(t){function e(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n)}return __extends(e,t),e.FOCUS_IN="focusIn",e.FOCUS_OUT="focusOut",e}(t.Event);t.FocusEvent=e,e.prototype.__class__="egret.FocusEvent"}(egret||(egret={})),function(t){var e=function(e){function i(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),e.call(this,t,i,n)}return __extends(i,e),i.dispatchIOErrorEvent=function(e){t.Event._dispatchByTarget(i,e,i.IO_ERROR)},i.IO_ERROR="ioError",i}(t.Event);t.IOErrorEvent=e,e.prototype.__class__="egret.IOErrorEvent"}(egret||(egret={})),function(t){var e=function(e){function i(t,i,n,r,s,a,o,h,l,c){void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===r&&(r=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===o&&(o=!1),void 0===h&&(h=!1),void 0===c&&(c=!1),e.call(this,t,i,n),this._stageY=this._stageX=0,this.touchPointID=NaN,this.touchDown=this.altKey=this.shiftKey=this.ctrlKey=!1,this.touchPointID=r,this._stageX=s,this._stageY=a,this.ctrlKey=o,this.altKey=h,this.touchDown=c}__extends(i,e);var n=i.prototype;return Object.defineProperty(n,"stageX",{get:function(){return this._stageX},enumerable:!0,configurable:!0}),Object.defineProperty(n,"stageY",{get:function(){return this._stageY},enumerable:!0,configurable:!0}),Object.defineProperty(n,"localX",{get:function(){return this._currentTarget.globalToLocal(this._stageX,this._stageY,t.Point.identity).x},enumerable:!0,configurable:!0}),Object.defineProperty(n,"localY",{get:function(){return this._currentTarget.globalToLocal(this._stageX,this._stageY,t.Point.identity).y},enumerable:!0,configurable:!0}),i.dispatchTouchEvent=function(e,n,r,s,a,o,h,l,c){void 0===r&&(r=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===o&&(o=!1),void 0===h&&(h=!1),void 0===l&&(l=!1),void 0===c&&(c=!1);var u=t.Event._getPropertyData(i);u.touchPointID=r,u._stageX=s,u._stageY=a,u.ctrlKey=o,u.altKey=h,u.shiftKey=l,u.touchDown=c,t.Event._dispatchByTarget(i,e,n,u,!0,!0)},i.TOUCH_TAP="touchTap",i.TOUCH_MOVE="touchMove",i.TOUCH_BEGIN="touchBegin",i.TOUCH_END="touchEnd",i.TOUCH_RELEASE_OUTSIDE="touchReleaseOutside",i.TOUCH_ROLL_OUT="touchRollOut",i.TOUCH_ROLL_OVER="touchRollOver",i.TOUCH_OUT="touchOut",i.TOUCH_OVER="touchOver",i}(t.Event);t.TouchEvent=e,e.prototype.__class__="egret.TouchEvent"}(egret||(egret={})),function(t){var e=function(e){function i(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),e.call(this,t,i,n)}return __extends(i,e),i.dispatchTimerEvent=function(e,n){t.Event._dispatchByTarget(i,e,n)},i.TIMER="timer",i.TIMER_COMPLETE="timerComplete",i}(t.Event);t.TimerEvent=e,e.prototype.__class__="egret.TimerEvent"}(egret||(egret={})),function(t){var e=function(e){function i(t,i,n,r){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=""),e.call(this,t,i,n),this.text=r}return __extends(i,e),i.dispatchTextEvent=function(e,n,r){var s=t.Event._getPropertyData(i);s.text=r,t.Event._dispatchByTarget(i,e,n,s)},i.LINK="link",i}(t.Event);t.TextEvent=e,e.prototype.__class__="egret.TextEvent"}(egret||(egret={})),function(t){var e=function(e){function i(t,i,n,r,s){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=0),void 0===s&&(s=0),e.call(this,t,i,n),this.bytesTotal=this.bytesLoaded=0,this.bytesLoaded=r,this.bytesTotal=s}return __extends(i,e),i.dispatchProgressEvent=function(e,n,r,s){void 0===r&&(r=0),void 0===s&&(s=0),t.Event._dispatchByTarget(i,e,n,{bytesLoaded:r,bytesTotal:s})},i.PROGRESS="progress",i.SOCKET_DATA="socketData",i}(t.Event);t.ProgressEvent=e,e.prototype.__class__="egret.ProgressEvent"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.CAPTURING_PHASE=1,t.AT_TARGET=2,t.BUBBLING_PHASE=3,t}();t.EventPhase=e,e.prototype.__class__="egret.EventPhase"}(egret||(egret={})),function(t){var e=function(e){function i(t){void 0===t&&(t=null),e.call(this),this._captureEventsMap=this._eventsMap=this._eventTarget=null,this._eventTarget=t||this}__extends(i,e);var n=i.prototype;return n.addEventListener=function(e,i,n,r,s){void 0===r&&(r=!1),void 0===s&&(s=0),void 0===r&&(r=!1),void 0===s&&(s=0),i||t.$error(1010),r?(this._captureEventsMap||(this._captureEventsMap={}),r=this._captureEventsMap):(this._eventsMap||(this._eventsMap={}),r=this._eventsMap);var a=r[e];a||(a=r[e]=[]),this._insertEventBin(a,i,n,s)},n._insertEventBin=function(t,e,i,n,r){void 0===r&&(r=void 0);for(var s=-1,a=t.length,o=0;o<a;o++){var h=t[o];if(h.listener==e&&h.thisObject==i&&h.display==r)return!1;-1==s&&h.priority<n&&(s=o)}return e={listener:e,thisObject:i,priority:n},r&&(e.display=r),-1!=s?t.splice(s,0,e):t.push(e),!0},n.removeEventListener=function(t,e,i,n){if(void 0===n&&(n=!1),n=n?this._captureEventsMap:this._eventsMap){var r=n[t];r&&(this._removeEventBin(r,e,i),0==r.length&&delete n[t])}},n._removeEventBin=function(t,e,i,n,r){void 0===n&&(n=void 0),void 0===r&&(r=0);for(var s=t.length;r<s;r++){var a=t[r];if(a.listener==e&&a.thisObject==i&&a.display==n)return t.splice(r,1),!0}return!1},n.hasEventListener=function(t){return!!(this._eventsMap&&this._eventsMap[t]||this._captureEventsMap&&this._captureEventsMap[t])},n.willTrigger=function(t){return this.hasEventListener(t)},n.dispatchEvent=function(t){return t._reset(),t._target=this._eventTarget,t._currentTarget=this._eventTarget,this._notifyListener(t)},n._notifyListener=function(t){if(!(i=1==t._eventPhase?this._captureEventsMap:this._eventsMap))return!0;if(!(i=i[t._type]))return!0;var e=i.length;if(0==e)return!0;for(var i=i.concat(),n=0;n<e;n++){var r=i[n];if(r.listener.call(r.thisObject,t),t._isPropagationImmediateStopped)break}return!t._isDefaultPrevented},n.dispatchEventWith=function(e,i,n){void 0===i&&(i=!1),t.Event.dispatchEvent(this,e,i,n)},i}(t.HashObject);t.EventDispatcher=e,e.prototype.__class__="egret.EventDispatcher"}(egret||(egret={})),function(t){var e=function(e){function i(){e.call(this),this.stage=this.deviceContext=this.netContext=this.touchContext=this.rendererContext=null,this.reuseEvent=new t.Event("")}__extends(i,e);var n=i.prototype;return n.run=function(){t.Ticker.getInstance().run(),t.Ticker.getInstance().register(this.renderLoop,this,Number.NEGATIVE_INFINITY),t.Ticker.getInstance().register(this.broadcastEnterFrame,this,Number.POSITIVE_INFINITY),this.touchContext.run(),this._profileInstance=t.Profiler.getInstance()},n.renderLoop=function(e){if(0<t.__callLaterFunctionList.length){var n=t.__callLaterFunctionList;t.__callLaterFunctionList=[];var r=t.__callLaterThisList;t.__callLaterThisList=[];var s=t.__callLaterArgsList;t.__callLaterArgsList=[]}e=this.stage;var a=i.cachedEvent;a._type=t.Event.RENDER,this.dispatchEvent(a),t.Stage._invalidateRenderFlag&&(this.broadcastRender(),t.Stage._invalidateRenderFlag=!1),n&&this.doCallLaterList(n,r,s),0<t.__callAsyncFunctionList.length&&this.doCallAsyncList(),(n=this.rendererContext).onRenderStart(),n.clearScreen(),i.__DRAW_COMMAND_LIST=[],i._renderLoopPhase="updateTransform",e._updateTransform(),i._renderLoopPhase="draw",a._type=t.Event.FINISH_UPDATE_TRANSFORM,this.dispatchEvent(a),i.__use_new_draw?this._draw(n):e._draw(n),a._type=t.Event.FINISH_RENDER,this.dispatchEvent(a),this._profileInstance._isRunning&&this._profileInstance._drawProfiler(n),n.onRenderFinish()},n._draw=function(t){for(var e=i.__DRAW_COMMAND_LIST,n=e.length,r=0;r<n;r++){var s=e[r];s.call(t),s.dispose()}},n.broadcastEnterFrame=function(e){(e=this.reuseEvent)._type=t.Event.ENTER_FRAME,this.dispatchEvent(e);for(var i=t.DisplayObject._enterFrameCallBackList.concat(),n=i.length,r=0;r<n;r++){var s=i[r];e._target=s.display,e._currentTarget=s.display,s.listener.call(s.thisObject,e)}for(r=(i=t.Recycler._callBackList).length-1;0<=r;r--)i[r]._checkFrame()},n.broadcastRender=function(){var e=this.reuseEvent;e._type=t.Event.RENDER;for(var i=t.DisplayObject._renderCallBackList.concat(),n=i.length,r=0;r<n;r++){var s=i[r],a=s.display;e._target=a,e._currentTarget=a,s.listener.call(s.thisObject,e)}},n.doCallLaterList=function(t,e,i){for(var n=t.length,r=0;r<n;r++){var s=t[r];null!=s&&s.apply(e[r],i[r])}},n.doCallAsyncList=function(){var e=t.__callAsyncFunctionList.concat(),i=t.__callAsyncThisList.concat(),n=t.__callAsyncArgsList.concat();t.__callAsyncFunctionList.length=0,t.__callAsyncThisList.length=0;for(var r=t.__callAsyncArgsList.length=0;r<e.length;r++){var s=e[r];null!=s&&s.apply(i[r],n[r])}},i.deviceType=null,i.DEVICE_PC="web",i.DEVICE_MOBILE="native",i.RUNTIME_HTML5="runtimeHtml5",i.RUNTIME_NATIVE="runtimeNative",i.__DRAW_COMMAND_LIST=[],i.__use_new_draw=!0,i.cachedEvent=new t.Event(""),i}(t.EventDispatcher);t.MainContext=e,e.prototype.__class__="egret.MainContext"}(egret||(egret={}));var testDeviceType=function(){if(!this.navigator)return!0;var t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("mobile")||-1!=t.indexOf("android")},testRuntimeType=function(){return!!this.navigator};egret.MainContext.instance=new egret.MainContext,egret.MainContext.deviceType=testDeviceType()?egret.MainContext.DEVICE_MOBILE:egret.MainContext.DEVICE_PC,egret.MainContext.runtimeType=testRuntimeType()?egret.MainContext.RUNTIME_HTML5:egret.MainContext.RUNTIME_NATIVE,delete testDeviceType,delete testRuntimeType,function(t){var e=function(){function e(){this._preDrawCount=this._updateTransformPerformanceCost=this._renderPerformanceCost=this._logicPerformanceCost=this._lastTime=0,this._calculatePreDrawCount=!0,this._txt=null,this._tick=0,this._maxDeltaTime=500,this._totalDeltaTime=0,this._isRunning=!1}var i=e.prototype;return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},i.stop=function(){if(this._isRunning){this._isRunning=!1,t.Ticker.getInstance().unregister(this.update,this);var e=t.MainContext.instance;e.removeEventListener(t.Event.ENTER_FRAME,this.onEnterFrame,this),e.removeEventListener(t.Event.RENDER,this.onStartRender,this),e.removeEventListener(t.Event.FINISH_RENDER,this.onFinishRender,this),e.removeEventListener(t.Event.FINISH_UPDATE_TRANSFORM,this.onFinishUpdateTransform,this)}},i.run=function(){if(null==this._txt&&(this._txt=new t.TextField,this._txt.size=28,this._txt.multiline=!0,this._txt._DO_Props_._parent=new t.DisplayObjectContainer),!this._isRunning){this._isRunning=!0,t.Ticker.getInstance().register(this.update,this);var e=t.MainContext.instance;e.addEventListener(t.Event.ENTER_FRAME,this.onEnterFrame,this),e.addEventListener(t.Event.RENDER,this.onStartRender,this),e.addEventListener(t.Event.FINISH_RENDER,this.onFinishRender,this),e.addEventListener(t.Event.FINISH_UPDATE_TRANSFORM,this.onFinishUpdateTransform,this)}},i._drawProfiler=function(t){"_drawWebGL"in t&&t._drawWebGL(),this._calculatePreDrawCount=!1,this._txt._updateTransform(),this._txt._draw(t)},i._setTxtFontSize=function(t){this._txt.size=t},i.onEnterFrame=function(e){this._lastTime=t.getTimer()},i.onStartRender=function(e){e=t.getTimer(),this._logicPerformanceCost=e-this._lastTime,this._lastTime=e},i.onFinishUpdateTransform=function(e){e=t.getTimer(),this._updateTransformPerformanceCost=e-this._lastTime,this._lastTime=e},i.onFinishRender=function(e){e=t.getTimer(),this._renderPerformanceCost=e-this._lastTime,this._lastTime=e},i.update=function(e){if(this._tick++,this._totalDeltaTime+=e,this._totalDeltaTime>=this._maxDeltaTime){e=this._preDrawCount.toString();var i=Math.ceil(this._logicPerformanceCost).toString()+","+Math.ceil(this._updateTransformPerformanceCost).toString()+","+Math.ceil(this._renderPerformanceCost).toString()+","+Math.ceil(t.MainContext.instance.rendererContext.renderCost).toString();this._txt.text="draw:"+e+"\ncost:"+i+"\nFPS:"+Math.floor(1e3*this._tick/this._totalDeltaTime).toString(),this._tick=this._totalDeltaTime=0}this._preDrawCount=0,this._calculatePreDrawCount=!0},i.onDrawImage=function(){this._calculatePreDrawCount&&this._preDrawCount++},e}();t.Profiler=e,e.prototype.__class__="egret.Profiler"}(egret||(egret={})),function(t){var e=function(e){function i(){e.call(this),this._timeScale=1,this._paused=!1,this._callIndex=-1,this.callBackList=[],null!=i.instance&&t.$error(1002)}__extends(i,e);var n=i.prototype;return n.run=function(){t.__START_TIME=(new Date).getTime(),t.MainContext.instance.deviceContext.executeMainLoop(this.update,this)},n.update=function(t){if(!this._paused){for(t*=this._timeScale,this._callList=this.callBackList.concat(),this._callIndex=0;this._callIndex<this._callList.length;this._callIndex++){var e=this._callList[this._callIndex];e.listener.call(e.thisObject,t)}this._callIndex=-1,this._callList=null}},n.register=function(t,e,i){void 0===i&&(i=0),this._insertEventBin(this.callBackList,t,e,i)},n.unregister=function(t,e){this._removeEventBin(this.callBackList,t,e),this._callList&&-1<this._callIndex&&this._removeEventBin(this._callList,t,e,null,this._callIndex+1)},n.setTimeout=function(e,i,n){for(var r=[],s=3;s<arguments.length;s++)r[s-3]=arguments[s];t.$warn(1003),t.setTimeout.apply(null,[e,i,n].concat(r))},n.setTimeScale=function(t){this._timeScale=t},n.getTimeScale=function(){return this._timeScale},n.pause=function(){this._paused=!0},n.resume=function(){this._paused=!1},i.getInstance=function(){return null==i.instance&&(i.instance=new i),i.instance},i}(t.EventDispatcher);t.Ticker=e,e.prototype.__class__="egret.Ticker"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.LEFT="left",t.RIGHT="right",t.CENTER="center",t.JUSTIFY="justify",t.CONTENT_JUSTIFY="contentJustify",t}();t.HorizontalAlign=e,e.prototype.__class__="egret.HorizontalAlign"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.TOP="top",t.BOTTOM="bottom",t.MIDDLE="middle",t.JUSTIFY="justify",t.CONTENT_JUSTIFY="contentJustify",t}();t.VerticalAlign=e,e.prototype.__class__="egret.VerticalAlign"}(egret||(egret={})),function(t){var e=function(e){function i(t,i){void 0===i&&(i=0),e.call(this),this._currentCount=0,this._running=!1,this.lastTime=0,this.delay=t,this.repeatCount=i}__extends(i,e);var n=i.prototype;return Object.defineProperty(n,"currentCount",{get:function(){return this._currentCount},enumerable:!0,configurable:!0}),Object.defineProperty(n,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),n.reset=function(){this.stop(),this._currentCount=0},n.start=function(){this._running||(this.lastTime=t.getTimer(),t.Ticker.getInstance().register(this.onEnterFrame,this),this._running=!0)},n.stop=function(){this._running&&(t.Ticker.getInstance().unregister(this.onEnterFrame,this),this._running=!1)},n.onEnterFrame=function(e){(e=t.getTimer())-this.lastTime>this.delay&&(this.lastTime=e,this._currentCount++,t.TimerEvent.dispatchTimerEvent(this,t.TimerEvent.TIMER),0<this.repeatCount&&this._currentCount>=this.repeatCount&&(this.stop(),t.TimerEvent.dispatchTimerEvent(this,t.TimerEvent.TIMER_COMPLETE)))},i}(t.EventDispatcher);t.Timer=e,e.prototype.__class__="egret.Timer"}(egret||(egret={})),function(t){function e(t){if((t=t.prototype?t.prototype:Object.getPrototypeOf(t)).hasOwnProperty("__class__"))return t.__class__;var e=(i=t.constructor.toString()).indexOf("("),i=i.substring(9,e);return Object.defineProperty(t,"__class__",{value:i,enumerable:!1,writable:!0}),i}t.getQualifiedClassName=e,t.getQualifiedSuperclassName=function(t){if((t=t.prototype?t.prototype:Object.getPrototypeOf(t)).hasOwnProperty("__superclass__"))return t.__superclass__;var i=Object.getPrototypeOf(t);return null==i?null:(i=e(i.constructor))?(Object.defineProperty(t,"__superclass__",{value:i,enumerable:!1,writable:!0}),i):null}}(egret||(egret={})),function(t){var e={};t.getDefinitionByName=function(t){if(!t)return null;if(r=e[t])return r;for(var i=t.split("."),n=i.length,r=__global,s=0;s<n;s++)if(!(r=r[i[s]]))return null;return e[t]=r}}(egret||(egret={}));var egret_html5_localStorage,__global=__global||this;!function(t){function e(t){for(var e in i){var n=i[e];n.delay-=t,0>=n.delay&&(n.listener.apply(n.thisObject,n.params),delete i[e])}}var i={},n=0;t.setTimeout=function(r,s,a){for(var o=[],h=3;h<arguments.length;h++)o[h-3]=arguments[h];return o={listener:r,thisObject:s,delay:a,params:o},0==n&&t.Ticker.getInstance().register(e,null),n++,i[n]=o,n},t.clearTimeout=function(t){delete i[t]}}(egret||(egret={})),function(t){function e(t){for(var e in i){var n=i[e];n.delay-=t,0>=n.delay&&(n.delay=n.originDelay,n.listener.apply(n.thisObject,n.params))}}var i={},n=0;t.setInterval=function(r,s,a){for(var o=[],h=3;h<arguments.length;h++)o[h-3]=arguments[h];return o={listener:r,thisObject:s,delay:a,originDelay:a,params:o},0==n&&t.Ticker.getInstance().register(e,null),n++,i[n]=o,n},t.clearInterval=function(t){delete i[t]}}(egret||(egret={})),function(t){t.hasDefinition=function(e){return!!t.getDefinitionByName(e)}}(egret||(egret={})),(egret||(egret={})).toColorString=function(t){for((isNaN(t)||0>t)&&(t=0),16777215<t&&(t=16777215),t=t.toString(16).toUpperCase();6>t.length;)t="0"+t;return"#"+t},function(t){var e=function(e){function i(t,i,n,r,s,a){void 0===t&&(t=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===s&&(s=0),void 0===a&&(a=0),e.call(this),this.a=t,this.b=i,this.c=n,this.d=r,this.tx=s,this.ty=a}__extends(i,e);var n=i.prototype;return n.prepend=function(t,e,i,n,r,s){var a=this.tx;if(1!=t||0!=e||0!=i||1!=n){var o=this.a,h=this.c;this.a=o*t+this.b*i,this.b=o*e+this.b*n,this.c=h*t+this.d*i,this.d=h*e+this.d*n}return this.tx=a*t+this.ty*i+r,this.ty=a*e+this.ty*n+s,this},n.append=function(t,e,i,n,r,s){var a=this.a,o=this.b,h=this.c,l=this.d;return 1==t&&0==e&&0==i&&1==n||(this.a=t*a+e*h,this.b=t*o+e*l,this.c=i*a+n*h,this.d=i*o+n*l),this.tx=r*a+s*h+this.tx,this.ty=r*o+s*l+this.ty,this},n.prependTransform=function(e,i,n,r,s,a,o,h,l){if(s%360){var c=t.NumberUtils.cos(s);s=t.NumberUtils.sin(s)}else c=1,s=0;return(h||l)&&(this.tx-=h,this.ty-=l),a||o?(this.prepend(c*n,s*n,-s*r,c*r,0,0),this.prepend(t.NumberUtils.cos(o),t.NumberUtils.sin(o),-t.NumberUtils.sin(a),t.NumberUtils.cos(a),e,i)):this.prepend(c*n,s*n,-s*r,c*r,e,i),this},n.appendTransform=function(e,i,n,r,s,a,o,h,l){if(s%360){var c=t.NumberUtils.cos(s);s=t.NumberUtils.sin(s)}else c=1,s=0;return a||o?(this.append(t.NumberUtils.cos(o),t.NumberUtils.sin(o),-t.NumberUtils.sin(a),t.NumberUtils.cos(a),e,i),this.append(c*n,s*n,-s*r,c*r,0,0)):this.append(c*n,s*n,-s*r,c*r,e,i),(h||l)&&(this.tx-=h*this.a+l*this.c,this.ty-=h*this.b+l*this.d),this},n.rotate=function(t){var e=Math.cos(t);t=Math.sin(t);var i=this.a,n=this.c,r=this.tx;return this.a=i*e-this.b*t,this.b=i*t+this.b*e,this.c=n*e-this.d*t,this.d=n*t+this.d*e,this.tx=r*e-this.ty*t,this.ty=r*t+this.ty*e,this},n.skew=function(e,i){return this.append(t.NumberUtils.cos(i),t.NumberUtils.sin(i),-t.NumberUtils.sin(e),t.NumberUtils.cos(e),0,0),this},n.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},n.translate=function(t,e){return this.tx+=t,this.ty+=e,this},n.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},n.identityMatrix=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},n.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,s=t*n-e*i;return this.a=n/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-n*r)/s,this.ty=-(t*this.ty-e*r)/s,this},i.transformCoords=function(e,i,n){var r=t.Point.identity;return r.x=e.a*i+e.c*n+e.tx,r.y=e.d*n+e.b*i+e.ty,r},n.toArray=function(t){return this.array||(this.array=new Float32Array(9)),t?(this.array[0]=this.a,this.array[1]=this.b,this.array[2]=0,this.array[3]=this.c,this.array[4]=this.d,this.array[5]=0,this.array[6]=this.tx,this.array[7]=this.ty):(this.array[0]=this.a,this.array[1]=this.b,this.array[2]=this.tx,this.array[3]=this.c,this.array[4]=this.d,this.array[5]=this.ty,this.array[6]=0,this.array[7]=0),this.array[8]=1,this.array},n.setTo=function(t,e,i,n,r,s){this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=s},n.copyFrom=function(t){this.identityMatrix(t)},n.clone=function(){return new i(this.a,this.b,this.c,this.d,this.tx,this.ty)},n.concat=function(t){var e=this.a,i=this.b,n=this.c,r=this.d,s=this.tx,a=this.ty,o=t.a,h=t.b,l=t.c,c=t.d,u=e*o,_=0,d=0,g=r*c,f=s*o+t.tx;t=a*c+t.ty,0==i&&0==n&&0==h&&0==l||(u+=i*l,g+=n*h,_+=e*h+i*c,d+=n*o+r*l,f+=a*l,t+=s*h),this.a=u,this.b=_,this.c=d,this.d=g,this.tx=f,this.ty=t},n.deltaTransformPoint=function(e){return new t.Point(this.a*e.x+this.c*e.y,this.b*e.x+this.d*e.y)},n.transformPoint=function(e){return new t.Point(this.a*e.x+this.c*e.y+this.tx,this.b*e.x+this.d*e.y+this.ty)},n.toString=function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"},n.createBox=function(e,i,n,r,s){if(void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=0),0!==n){n/=t.Matrix.DEG_TO_RAD;var a=t.NumberUtils.cos(n);n=t.NumberUtils.sin(n),this.a=a*e,this.b=n*i,this.c=-n*e,this.d=a*i}else this.a=e,this.c=this.b=0,this.d=i;this.tx=r,this.ty=s},n.createGradientBox=function(t,e,i,n,r){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),this.createBox(t/1638.4,e/1638.4,i,n+t/2,r+e/2)},i.identity=new i,i.DEG_TO_RAD=Math.PI/180,i}(t.HashObject);t.Matrix=e,e.prototype.__class__="egret.Matrix"}(egret||(egret={})),function(t){var e=function(e){function i(t,i){void 0===t&&(t=0),void 0===i&&(i=0),e.call(this),this.x=t,this.y=i}__extends(i,e);var n=i.prototype;return n.clone=function(){return new i(this.x,this.y)},n.equals=function(t){return this.x==t.x&&this.y==t.y},i.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},n.setTo=function(t,e){this.x=t,this.y=e},n.copyFrom=function(t){this.x=t.x,this.y=t.y},Object.defineProperty(n,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),n.add=function(t){return new i(this.x+t.x,this.y+t.y)},i.interpolate=function(t,e,n){var r=1-n;return new i(t.x*n+e.x*r,t.y*n+e.y*r)},n.normalize=function(t){0==this.x&&0==this.y||(t/=this.length,this.x*=t,this.y*=t)},n.offset=function(t,e){this.x+=t,this.y+=e},i.polar=function(e,n){return new i(e*t.NumberUtils.cos(n/t.Matrix.DEG_TO_RAD),e*t.NumberUtils.sin(n/t.Matrix.DEG_TO_RAD))},n.subtract=function(t){return new i(this.x-t.x,this.y-t.y)},n.toString=function(){return"(x="+this.x+", y="+this.y+")"},i.identity=new i(0,0),i}(t.HashObject);t.Point=e,e.prototype.__class__="egret.Point"}(egret||(egret={})),function(t){var e=function(e){function i(t,i,n,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),e.call(this),this.x=t,this.y=i,this.width=n,this.height=r}__extends(i,e);var n=i.prototype;return Object.defineProperty(n,"left",{get:function(){return this.x},set:function(t){this.width+=this.x-t,this.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(n,"right",{get:function(){return this.x+this.width},set:function(t){this.width=t-this.x},enumerable:!0,configurable:!0}),Object.defineProperty(n,"top",{get:function(){return this.y},set:function(t){this.height+=this.y-t,this.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(n,"bottom",{get:function(){return this.y+this.height},set:function(t){this.height=t-this.y},enumerable:!0,configurable:!0}),Object.defineProperty(n,"topLeft",{get:function(){return new t.Point(this.left,this.top)},set:function(t){this.top=t.y,this.left=t.x},enumerable:!0,configurable:!0}),Object.defineProperty(n,"bottomRight",{get:function(){return new t.Point(this.right,this.bottom)},set:function(t){this.bottom=t.y,this.right=t.x},enumerable:!0,configurable:!0}),n.initialize=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},n.contains=function(t,e){return this.x<=t&&this.x+this.width>=t&&this.y<=e&&this.y+this.height>=e},n.intersects=function(t){return Math.max(this.x,t.x)<=Math.min(this.right,t.right)&&Math.max(this.y,t.y)<=Math.min(this.bottom,t.bottom)},n.setEmpty=function(){this.height=this.width=this.y=this.x=0},n.clone=function(){return new i(this.x,this.y,this.width,this.height)},n.containsPoint=function(t){return this.x<t.x&&this.x+this.width>t.x&&this.y<t.y&&this.y+this.height>t.y},n.setTo=function(t,e,i,n){this.initialize(t,e,i,n)},n.copyFrom=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},n.inflate=function(t,e){this.x-=t,this.width+=2*t,this.y-=e,this.height+=2*e},n.isEmpty=function(){return 0==this.width||0==this.height},n.containsRect=function(t){var e=t.x+t.width,i=t.y+t.height,n=this.x+this.width,r=this.y+this.height;return t.x>=this.x&&t.x<n&&t.y>=this.y&&t.y<r&&e>this.x&&e<=n&&i>this.y&&i<=r},n.equals=function(t){return this===t||this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},n.inflatePoint=function(t){this.inflate(t.x,t.y)},n.intersection=function(t){var e=this.clone(),i=e.x,n=e.y,r=t.x,s=t.y,a=Math.max(i,r);return a<=(i=Math.min(i+e.width,r+t.width))&&(r=Math.max(n,s))<=(t=Math.min(n+e.height,s+t.height))?(e.setTo(a,r,i-a,t-r),e):(e.setEmpty(),e)},n.offset=function(t,e){this.x+=t,this.y+=e},n.offsetPoint=function(t){this.offset(t.x,t.y)},n.toString=function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"},n.union=function(t){var e=this.clone();if(t.isEmpty())return e;if(e.isEmpty())return e.copyFrom(t),e;var i=Math.min(e.x,t.x),n=Math.min(e.y,t.y);return e.setTo(i,n,Math.max(e.right,t.right)-i,Math.max(e.bottom,t.bottom)-n),e},i.identity=new i(0,0,0,0),i}(t.HashObject);t.Rectangle=e,e.prototype.__class__="egret.Rectangle"}(egret||(egret={})),function(t){var e=function(t){function e(e,i,n,r,s,a,o,h){void 0===e&&(e=1),void 0===i&&(i=1),void 0===n&&(n=1),void 0===r&&(r=1),void 0===s&&(s=0),void 0===a&&(a=0),void 0===o&&(o=0),void 0===h&&(h=0),t.call(this),this._redMultiplier=e,this._greenMultiplier=i,this._blueMultiplier=n,this._alphaMultiplier=r,this._redOffset=s,this._greenOffset=a,this._blueOffset=o,this._alphaOffset=h}__extends(e,t);var i=e.prototype;return Object.defineProperty(i,"alphaMultiplier",{get:function(){return this._alphaMultiplier},set:function(t){this._alphaMultiplier=t},enumerable:!0,configurable:!0}),Object.defineProperty(i,"alphaOffset",{get:function(){return this._alphaOffset},set:function(t){this._alphaOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(i,"blueMultiplier",{get:function(){return this._blueMultiplier},set:function(t){this._blueMultiplier=t},enumerable:!0,configurable:!0}),Object.defineProperty(i,"blueOffset",{get:function(){return this._blueOffset},set:function(t){this._blueOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(i,"greenMultiplier",{get:function(){return this._greenMultiplier},set:function(t){this._greenMultiplier=t},enumerable:!0,configurable:!0}),Object.defineProperty(i,"greenOffset",{get:function(){return this._greenOffset},set:function(t){this._greenOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(i,"redMultiplier",{get:function(){return this._redMultiplier},set:function(t){this._redMultiplier=t},enumerable:!0,configurable:!0}),Object.defineProperty(i,"redOffset",{get:function(){return this._redOffset},set:function(t){this._redOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(i,"color",{get:function(){return this._redOffset<<16+this._greenOffset<<8+this._blueOffset},enumerable:!0,configurable:!0}),i.identityColorTransform=function(t){this._alphaMultiplier=t._alphaMultiplier,this._alphaOffset=t._alphaOffset,this._redMultiplier=t._redMultiplier,this._redOffset=t._redOffset,this._greenMultiplier=t._greenMultiplier,this._greenOffset=t._greenOffset,this._blueMultiplier=t._blueMultiplier,this._blueOffset=t._blueOffset},i.concat=function(t){this._redMultiplier*=t._redMultiplier,this._greenMultiplier*=t._greenMultiplier,this._blueMultiplier*=t._blueMultiplier,this._alphaMultiplier*=t._alphaMultiplier,this._redOffset+=t._redOffset,this._greenOffset+=t._greenOffset,this._blueOffset+=t._blueOffset,this._alphaOffset+=t._alphaOffset},i.toString=function(){return"(redMultiplier="+this._redMultiplier+", greenMultiplier="+this._greenMultiplier+", blueMultiplier="+this._blueMultiplier+", alphaMultiplier="+this._alphaMultiplier+", redOffset="+this._redOffset+", greenOffset="+this._greenOffset+", blueOffset="+this._blueOffset+", alphaOffset="+this._alphaOffset+")"},e}(t.HashObject);t.ColorTransform=e,e.prototype.__class__="egret.ColorTransform"}(egret||(egret={})),function(t){var e=function(e){function i(i){e.call(this),this._matrix=new t.Matrix,this._matrix2=new t.Matrix,this._colorTransform=new t.ColorTransform,this._colorTransform2=new t.ColorTransform,this._display=i}__extends(i,e);var n=i.prototype;return Object.defineProperty(n,"matrix",{get:function(){return this._matrix2.identityMatrix(this._matrix),this._matrix2},set:function(t){this._setMatrix(t)},enumerable:!0,configurable:!0}),n._setMatrix=function(e){this._display.__hack_local_matrix||(this._display.__hack_local_matrix=new t.Matrix),this._display.__hack_local_matrix.identityMatrix(e),this._matrix.identityMatrix(e)},Object.defineProperty(n,"colorTransform",{get:function(){return this._colorTransform2.identityColorTransform(this._colorTransform),this._colorTransform2},set:function(t){this._setColorTransform(t)},enumerable:!0,configurable:!0}),n._setColorTransform=function(t){this._colorTransform.identityColorTransform(t)},i}(t.HashObject);t.Transform=e,e.prototype.__class__="egret.Transform"}(egret||(egret={})),function(t){var e=function(e){function i(){e.call(this),this._isSupportDOMParser=this._xmlDict=this._parser=null,this._xmlDict={},window.DOMParser?(this._isSupportDOMParser=!0,this._parser=new DOMParser):this._isSupportDOMParser=!1}__extends(i,e);var n=i.prototype;return i.getInstance=function(){return i._instance||(i._instance=new i),i._instance},n.parserXML=function(e){for(var i=0;"\n"==e.charAt(i)||"\t"==e.charAt(i)||"\r"==e.charAt(i)||" "==e.charAt(i);)i++;return 0!=i&&(e=e.substring(i,e.length)),this._isSupportDOMParser?i=this._parser.parseFromString(e,"text/xml"):((i=new ActiveXObject("Microsoft.XMLDOM")).async="false",i.loadXML(e)),null==i&&t.$warn(1015),i},i._instance=null,i}(t.HashObject);t.SAXParser=e,e.prototype.__class__="egret.SAXParser"}(egret||(egret={})),function(t){var e=function(e){function i(){e.call(this),this._designHeight=this._designWidth=0,this._scaleY=this._scaleX=1,this._stageHeight=this._stageWidth=this._offSetY=0}__extends(i,e);var r=i.prototype;return i.getInstance=function(){return null==i.instance&&(n.initialize(),i.instance=new i),i.instance},r.setDesignSize=function(e,i,n){this._designWidth=e,this._designHeight=i,n&&(t.$warn(1001),this._setResolutionPolicy(n))},r._setResolutionPolicy=function(t){this._resolutionPolicy=t,t.init(this),t._apply(this,this._designWidth,this._designHeight)},r.getScaleX=function(){return this._scaleX},r.getScaleY=function(){return this._scaleY},r.getOffSetY=function(){return this._offSetY},i.canvas_name="egretCanvas",i.egret_root_div="gameDiv",i.canvas_div_name="canvasDiv",i}(t.HashObject);t.StageDelegate=e,e.prototype.__class__="egret.StageDelegate";var i=function(){function t(t,e){this._containerStrategy=t,this._contentStrategy=e}var e=t.prototype;return e.init=function(t){this._containerStrategy.init(t),this._contentStrategy.init(t)},e._apply=function(t,e,i){this._containerStrategy._apply(t,e,i),this._contentStrategy._apply(t,e,i)},t}();t.ResolutionPolicy=i,i.prototype.__class__="egret.ResolutionPolicy";var n=function(){function t(){}var e=t.prototype;return t.initialize=function(){t.EQUAL_TO_FRAME=new r},e.init=function(t){},e._apply=function(t,e,i){},e._setupContainer=function(){var t,e=document.body;e&&(t=e.style)&&(t.paddingTop=t.paddingTop||"0px",t.paddingRight=t.paddingRight||"0px",t.paddingBottom=t.paddingBottom||"0px",t.paddingLeft=t.paddingLeft||"0px",t.borderTop=t.borderTop||"0px",t.borderRight=t.borderRight||"0px",t.borderBottom=t.borderBottom||"0px",t.borderLeft=t.borderLeft||"0px",t.marginTop=t.marginTop||"0px",t.marginRight=t.marginRight||"0px",t.marginBottom=t.marginBottom||"0px",t.marginLeft=t.marginLeft||"0px")},t}();t.ContainerStrategy=n,n.prototype.__class__="egret.ContainerStrategy";var r=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype._apply=function(t){this._setupContainer()},e}(n);t.EqualToFrame=r,r.prototype.__class__="egret.EqualToFrame",i=function(){function i(){}var n=i.prototype;return n.init=function(t){},n._apply=function(t,e,i){},n.setEgretSize=function(i,n,r,s,a,o){void 0===o&&(o=0),t.StageDelegate.getInstance()._stageWidth=Math.round(i),t.StageDelegate.getInstance()._stageHeight=Math.round(n),i=document.getElementById(e.canvas_div_name),n=document.getElementById(e.egret_root_div),i||((i=t.Browser.getInstance().$new("div")).id=e.canvas_div_name,n.appendChild(i)),i.style.width=r+"px",i.style.height=s+"px",n.style.width=r+"px",n.style.height=s+"px",n.style.top=o+"px"},n._getClientWidth=function(){return document.documentElement.clientWidth},n._getClientHeight=function(){return document.documentElement.clientHeight},i}(),t.ContentStrategy=i,i.prototype.__class__="egret.ContentStrategy";var s=function(t){function e(e){void 0===e&&(e=0),t.call(this),this.minWidth=NaN,this.minWidth=e}return __extends(e,t),e.prototype._apply=function(t,e,i){e=this._getClientWidth();var n=this._getClientHeight(),r=n/i,s=e/r,a=1;0!=this.minWidth&&(a=Math.min(1,s/this.minWidth)),this.setEgretSize(s/a,i,e,n*a),t._scaleX=r*a,t._scaleY=r*a},e}(i);t.FixedHeight=s,s.prototype.__class__="egret.FixedHeight",s=function(t){function e(e){void 0===e&&(e=0),t.call(this),this.minHeight=NaN,this.minHeight=e}return __extends(e,t),e.prototype._apply=function(t,e,i){i=this._getClientWidth();var n=this._getClientHeight(),r=i/e,s=n/r,a=1;0!=this.minHeight&&(a=Math.min(1,s/this.minHeight)),this.setEgretSize(e,s/a,i*a,n,i*(1-a)/2),t._scaleX=r*a,t._scaleY=r*a},e}(i),t.FixedWidth=s,s.prototype.__class__="egret.FixedWidth",s=function(t){function e(e,i){t.call(this),this.width=e,this.height=i}return __extends(e,t),e.prototype._apply=function(t,e,i){i=this.width;var n=this.height,r=i/e;this.setEgretSize(e,n/r,i,n),t._scaleX=r,t._scaleY=r},e}(i),t.FixedSize=s,s.prototype.__class__="egret.FixedSize",s=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype._apply=function(t,e,i){this.setEgretSize(e,i,e,i,Math.floor((e-e)/2)),t._scaleX=1,t._scaleY=1},e}(i),t.NoScale=s,s.prototype.__class__="egret.NoScale",s=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype._apply=function(t,e,i){var n=this._getClientWidth(),r=this._getClientHeight(),s=(a=n)/e<(o=r)/i?a/e:o/i,a=e*s,o=i*s;n=Math.floor((n-a)/2);t._offSetY=Math.floor((r-o)/2),this.setEgretSize(e,i/1,1*a,o,n,t._offSetY),t._scaleX=1*s,t._scaleY=1*s},e}(i),t.ShowAll=s,s.prototype.__class__="egret.ShowAll",i=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype._apply=function(t,e,i){var n=(n=this._getClientWidth())/e,r=(r=this._getClientHeight())/i;this.setEgretSize(e,i,e*n,i*r),t._scaleX=n,t._scaleY=r},e}(i),t.FullScreen=i,i.prototype.__class__="egret.FullScreen"}(egret||(egret={})),function(t){var e=function(e){function i(){e.call(this),this._originalData={},this._drawAreaList=[]}__extends(i,e);var n=i.prototype;return i.getInstance=function(){return null==i.instance&&(i.instance=new i),i.instance},n.addDrawArea=function(t){this._drawAreaList.push(t)},n.clearDrawArea=function(){this._drawAreaList=[]},n.drawImage=function(e,n,r,s,a,o,h,l,c,u,_){void 0===_&&(_=void 0),h=h||0,l=l||0;var d=n._texture_to_render;if(null!=d&&0!=o&&0!=a&&0!=c&&0!=u){var g=t.MainContext.instance.rendererContext._texture_scale_factor;if(a/=g,o/=g,0!=this._drawAreaList.length&&t.MainContext.instance.rendererContext._cacheCanvasContext){g=t.DisplayObject.getTransformBounds(n._getSize(i.identityRectangle),n._worldTransform),n._worldBounds.initialize(g.x,g.y,g.width,g.height),(g=this._originalData).sourceX=r,g.sourceY=s,g.sourceWidth=a,g.sourceHeight=o,g.destX=h,g.destY=l,g.destWidth=c,g.destHeight=u;for(var f=this.getDrawAreaList(),p=0;p<f.length;p++)if(!this.ignoreRender(n,f[p],g.destX,g.destY)){e.drawImage(d,r,s,a,o,h,l,c,u,_);break}}else e.drawImage(d,r,s,a,o,h,l,c,u,_)}},n.ignoreRender=function(t,e,i,n){var r=t._worldBounds;return i*=t._worldTransform.a,n*=t._worldTransform.d,r.x+r.width+i<=e.x||r.x+i>=e.x+e.width||r.y+r.height+n<=e.y||r.y+n>=e.y+e.height},n.getDrawAreaList=function(){var e;return 0==this._drawAreaList.length?(this._defaultDrawAreaList||(this._defaultDrawAreaList=[new t.Rectangle(0,0,t.MainContext.instance.stage.stageWidth,t.MainContext.instance.stage.stageHeight)],t.MainContext.instance.stage.addEventListener(t.Event.RESIZE,this.onResize,this)),e=this._defaultDrawAreaList):e=this._drawAreaList,e},n.onResize=function(){t.MainContext.instance.stage.removeEventListener(t.Event.RESIZE,this.onResize,this),this._defaultDrawAreaList=null},i.identityRectangle=new t.Rectangle,i}(t.HashObject);t.RenderFilter=e,e.prototype.__class__="egret.RenderFilter"}(egret||(egret={})),function(t){var e=function(){function e(){}return e.mapClass=function(t,e,i){void 0===i&&(i=""),t=this.getKey(t)+"#"+i,this.mapClassDic[t]=e},e.getKey=function(e){return"string"==typeof e?e:t.getQualifiedClassName(e)},e.mapValue=function(t,e,i){void 0===i&&(i=""),t=this.getKey(t)+"#"+i,this.mapValueDic[t]=e},e.hasMapRule=function(t,e){void 0===e&&(e="");var i=this.getKey(t)+"#"+e;return!(!this.mapValueDic[i]&&!this.mapClassDic[i])},e.getInstance=function(e,i){void 0===i&&(i="");var n=this.getKey(e)+"#"+i;if(this.mapValueDic[n])return this.mapValueDic[n];var r=this.mapClassDic[n];if(r)return r=new r,this.mapValueDic[n]=r,delete this.mapClassDic[n],r;t.$error(1028,n)},e.mapClassDic={},e.mapValueDic={},e}();t.Injector=e,e.prototype.__class__="egret.Injector"}(egret||(egret={})),function(t){var e=function(t){function e(){t.apply(this,arguments),this.type=null}return __extends(e,t),e}(t.HashObject);t.Filter=e,e.prototype.__class__="egret.Filter"}(egret||(egret={})),function(t){var e=function(t){function e(e,i){t.call(this),this.blurX=e,this.blurY=i,this.type="blur"}return __extends(e,t),e}(t.Filter);t.BlurFilter=e,e.prototype.__class__="egret.BlurFilter"}(egret||(egret={})),function(t){var e=function(t){function e(e){void 0===e&&(e=null),t.call(this),this._matrix=[],this._matrix2=[],this.type="colorTransform",this._setMatrix(e)}__extends(e,t);var i=e.prototype;return Object.defineProperty(i,"matrix",{get:function(){for(var t=0;20>t;t++)this._matrix2[t]=this._matrix[t];return this._matrix2},set:function(t){this._setMatrix(t)},enumerable:!0,configurable:!0}),i._setMatrix=function(t){for(var e=0;20>e;e++)this._matrix[e]=t&&t[e]||0},e}(t.Filter);t.ColorMatrixFilter=e,e.prototype.__class__="egret.ColorMatrixFilter"}(egret||(egret={})),function(t){var e=function(t){function e(e,i,n,r,s,a,o,h){void 0===e&&(e=16711680),void 0===i&&(i=1),void 0===n&&(n=6),void 0===r&&(r=6),void 0===s&&(s=2),void 0===a&&(a=1),void 0===o&&(o=!1),void 0===h&&(h=!1),t.call(this),this.color=e,this.alpha=i,this.blurX=n,this.blurY=r,this.strength=s,this.quality=a,this.inner=o,this.knockout=h,this.type="glow",this._blue=255&e,this._green=(65280&e)>>8,this._red=e>>16}return __extends(e,t),e}(t.Filter);t.GlowFilter=e,e.prototype.__class__="egret.GlowFilter"}(egret||(egret={})),function(t){var e=function(t){function e(e,i,n,r,s,a,o,h,l,c,u){void 0===e&&(e=4),void 0===i&&(i=45),void 0===n&&(n=0),void 0===r&&(r=1),void 0===s&&(s=4),void 0===a&&(a=4),void 0===o&&(o=1),void 0===h&&(h=1),void 0===l&&(l=!1),void 0===c&&(c=!1),t.call(this,n,r,s,a,o,h,l,c),this.distance=e,this.angle=i}return __extends(e,t),e}(t.GlowFilter);t.DropShadowFilter=e,e.prototype.__class__="egret.DropShadowFilter"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.NORMAL="normal",t.ADD="add",t.ERASE="erase",t.ERASE_REVERSE="eraseReverse",t}();t.BlendMode=e,e.prototype.__class__="egret.BlendMode"}(egret||(egret={})),function(t){var e=function(){function t(){this._name=null,this._explicitHeight=this._explicitWidth=NaN,this._y=this._x=0,this._scaleY=this._scaleX=1,this._rotation=this._anchorY=this._anchorX=this._anchorOffsetY=this._anchorOffsetX=0,this._alpha=1,this._skewY=this._skewX=0,this._blendMode=null,this._touchEnabled=t.defaultTouchEnabled,this._visible=!0,this._worldAlpha=1,this._scrollRect=null,this._cacheAsBitmap=!1,this._stage=this._parent=null,this._needDraw=!1,this._filters=null,this._hasHeightSet=this._hasWidthSet=!1,this._sizeDirty=this._normalDirty=!0,this._isContainer=!1}return t.defaultTouchEnabled=!1,t}();t.DisplayObjectProperties=e,e.prototype.__class__="egret.DisplayObjectProperties"}(egret||(egret={})),function(t){var e=function(){this._hitTestPointTexture=null,this._rectH=this._rectW=0,this._cacheDirty=!1};(egret||(egret={})).DisplayObjectPrivateProperties=e,e.prototype.__class__="egret.DisplayObjectPrivateProperties"}(),function(t){var e=function(e){function i(){e.call(this),this.renderTexture=this.mask=this._sizeChangeCallTarget=this._sizeChangeCallBack=this.__hack_local_matrix=this._worldBounds=this._texture_to_render=null,this._DO_Props_=new t.DisplayObjectProperties,this._DO_Privs_=new t.DisplayObjectPrivateProperties,this._worldTransform=new t.Matrix,this._worldBounds=new t.Rectangle(0,0,0,0),this._DO_Privs_._cacheBounds=new t.Rectangle(0,0,0,0)}__extends(i,e);var n=i.prototype;return n._setDirty=function(){this._DO_Props_._normalDirty=!0},n.getDirty=function(){return this._DO_Props_._normalDirty||this._DO_Props_._sizeDirty},n._setParentSizeDirty=function(){var t=this._DO_Props_._parent;t&&(t._DO_Props_._hasWidthSet||t._DO_Props_._hasHeightSet?t._setCacheDirty():t._setSizeDirty())},n._setSizeDirty=function(){var t=this._DO_Props_;t._sizeDirty||(t._sizeDirty=!0,this._setDirty(),this._setCacheDirty(),this._setParentSizeDirty(),null!=this._sizeChangeCallBack&&(this._sizeChangeCallTarget==t._parent?this._sizeChangeCallBack.call(this._sizeChangeCallTarget):this._sizeChangeCallTarget=this._sizeChangeCallBack=null))},n._clearDirty=function(){this._DO_Props_._normalDirty=!1},n._clearSizeDirty=function(){this._DO_Props_._sizeDirty=!1},Object.defineProperty(n,"name",{get:function(){return this._DO_Props_._name},set:function(t){this._DO_Props_._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(n,"parent",{get:function(){return this._DO_Props_._parent},enumerable:!0,configurable:!0}),n._parentChanged=function(t){this._DO_Props_._parent=t},Object.defineProperty(n,"x",{get:function(){return this._DO_Props_._x},set:function(t){this._setX(t)},enumerable:!0,configurable:!0}),n._setX=function(e){t.NumberUtils.isNumber(e)&&this._DO_Props_._x!=e&&(this._DO_Props_._x=e,this._setDirty(),this._setParentSizeDirty())},Object.defineProperty(n,"y",{get:function(){return this._DO_Props_._y},set:function(t){this._setY(t)},enumerable:!0,configurable:!0}),n._setY=function(e){t.NumberUtils.isNumber(e)&&this._DO_Props_._y!=e&&(this._DO_Props_._y=e,this._setDirty(),this._setParentSizeDirty())},Object.defineProperty(n,"scaleX",{get:function(){return this._DO_Props_._scaleX},set:function(e){t.NumberUtils.isNumber(e)&&this._DO_Props_._scaleX!=e&&(this._DO_Props_._scaleX=e,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(n,"scaleY",{get:function(){return this._DO_Props_._scaleY},set:function(e){t.NumberUtils.isNumber(e)&&this._DO_Props_._scaleY!=e&&(this._DO_Props_._scaleY=e,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(n,"anchorOffsetX",{get:function(){return this._DO_Props_._anchorOffsetX},set:function(e){t.NumberUtils.isNumber(e)&&this._DO_Props_._anchorOffsetX!=e&&(this._DO_Props_._anchorOffsetX=e,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(n,"anchorOffsetY",{get:function(){return this._DO_Props_._anchorOffsetY},set:function(e){t.NumberUtils.isNumber(e)&&this._DO_Props_._anchorOffsetY!=e&&(this._DO_Props_._anchorOffsetY=e,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(n,"anchorX",{get:function(){return this._DO_Props_._anchorX},set:function(t){this._setAnchorX(t)},enumerable:!0,configurable:!0}),n._setAnchorX=function(e){t.NumberUtils.isNumber(e)&&this._DO_Props_._anchorX!=e&&(this._DO_Props_._anchorX=e,this._setDirty(),this._setParentSizeDirty())},Object.defineProperty(n,"anchorY",{get:function(){return this._DO_Props_._anchorY},set:function(t){this._setAnchorY(t)},enumerable:!0,configurable:!0}),n._setAnchorY=function(e){t.NumberUtils.isNumber(e)&&this._DO_Props_._anchorY!=e&&(this._DO_Props_._anchorY=e,this._setDirty(),this._setParentSizeDirty())},Object.defineProperty(n,"visible",{get:function(){return this._DO_Props_._visible},set:function(t){this._setVisible(t)},enumerable:!0,configurable:!0}),n._setVisible=function(t){this._DO_Props_._visible!=t&&(this._DO_Props_._visible=t,this._setSizeDirty())},Object.defineProperty(n,"rotation",{get:function(){return this._DO_Props_._rotation},set:function(e){t.NumberUtils.isNumber(e)&&this._DO_Props_._rotation!=e&&(this._DO_Props_._rotation=e,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(n,"alpha",{get:function(){return this._DO_Props_._alpha},set:function(t){this._setAlpha(t)},enumerable:!0,configurable:!0}),n._setAlpha=function(e){t.NumberUtils.isNumber(e)&&this._DO_Props_._alpha!=e&&(this._DO_Props_._alpha=e,this._setDirty(),this._setCacheDirty())},Object.defineProperty(n,"skewX",{get:function(){return this._DO_Props_._skewX},set:function(e){t.NumberUtils.isNumber(e)&&this._DO_Props_._skewX!=e&&(this._DO_Props_._skewX=e,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(n,"skewY",{get:function(){return this._DO_Props_._skewY},set:function(e){t.NumberUtils.isNumber(e)&&this._DO_Props_._skewY!=e&&(this._DO_Props_._skewY=e,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(n,"touchEnabled",{get:function(){return this._DO_Props_._touchEnabled},set:function(t){this._setTouchEnabled(t)},enumerable:!0,configurable:!0}),n._setTouchEnabled=function(t){this._DO_Props_._touchEnabled=t},Object.defineProperty(n,"blendMode",{get:function(){return this._DO_Props_._blendMode},set:function(t){this._DO_Props_._blendMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(n,"scrollRect",{get:function(){return this._DO_Props_._scrollRect},set:function(t){this._setScrollRect(t)},enumerable:!0,configurable:!0}),n._setScrollRect=function(t){this._DO_Props_._scrollRect=t,this._setSizeDirty()},Object.defineProperty(n,"measuredWidth",{get:function(){return this._measureBounds().width},enumerable:!0,configurable:!0}),Object.defineProperty(n,"measuredHeight",{get:function(){return this._measureBounds().height},enumerable:!0,configurable:!0}),Object.defineProperty(n,"explicitWidth",{get:function(){return this._DO_Props_._explicitWidth},enumerable:!0,configurable:!0}),Object.defineProperty(n,"explicitHeight",{get:function(){return this._DO_Props_._explicitHeight},enumerable:!0,configurable:!0}),Object.defineProperty(n,"width",{get:function(){return this._getWidth()},set:function(t){this._setWidth(t)},enumerable:!0,configurable:!0}),n._getWidth=function(){return this._getSize(t.Rectangle.identity).width},Object.defineProperty(n,"height",{get:function(){return this._getHeight()},set:function(t){this._setHeight(t)},enumerable:!0,configurable:!0}),n._getHeight=function(){return this._getSize(t.Rectangle.identity).height},n._setWidth=function(e){this._setSizeDirty(),this._setCacheDirty(),this._DO_Props_._explicitWidth=e,this._DO_Props_._hasWidthSet=t.NumberUtils.isNumber(e)},n._setHeight=function(e){this._setSizeDirty(),this._setCacheDirty(),this._DO_Props_._explicitHeight=e,this._DO_Props_._hasHeightSet=t.NumberUtils.isNumber(e)},Object.defineProperty(n,"worldAlpha",{get:function(){return this._DO_Props_._worldAlpha},set:function(t){this._DO_Props_._worldAlpha=t},enumerable:!0,configurable:!0}),n._draw=function(e){if(this._DO_Props_._visible&&!this.drawCacheTexture(e)){var i=t.MainContext.__use_new_draw&&this._DO_Props_._isContainer;this._hasFilters()&&!i&&this._setGlobalFilters(e),e.setAlpha(this.worldAlpha,this.blendMode),e.setTransform(this._worldTransform);var n=this.mask||this._DO_Props_._scrollRect;n&&!i&&e.pushMask(n),this._render(e),n&&!i&&e.popMask(),this._hasFilters()&&!i&&this._removeGlobalFilters(e)}this.destroyCacheBounds()},n._setGlobalFilters=function(t){var e;if(e=this._DO_Props_._filters?this._DO_Props_._filters.concat():[],this._transform){var n=this._transform._colorTransform,r=i.color;r[0]=n._redMultiplier,r[4]=n._redOffset,r[6]=n._greenMultiplier,r[9]=n._greenOffset,r[12]=n._blueMultiplier,r[14]=n._blueOffset,r[18]=n._alphaMultiplier,r[19]=n._alphaOffset,i.colorMatrixFilter._matrix=r,e.push(i.colorMatrixFilter)}t.setGlobalFilters(e)},n._removeGlobalFilters=function(t){t.setGlobalFilters(null)},n._hasFilters=function(){var t=this._DO_Props_._filters&&0<this._DO_Props_._filters.length;if(this._transform){var e=this._transform._colorTransform;1==e._redMultiplier&&0==e._redOffset&&1==e._greenMultiplier&&0==e._greenOffset&&1==e._blueMultiplier&&0==e._blueOffset&&1==e._alphaMultiplier&&0==e._alphaOffset||(t=!0)}return t},n._pushMask=function(t){t.setTransform(this._worldTransform);var e=this.mask||this._DO_Props_._scrollRect;e&&t.pushMask(e)},n._popMask=function(t){t.popMask()},n.drawCacheTexture=function(e){if(0==this._DO_Props_._cacheAsBitmap)return!1;var i=this.getBounds(t.Rectangle.identity);if((this._DO_Privs_._cacheDirty||null==this._texture_to_render||1<=Math.round(i.width)-this._texture_to_render._textureWidth||1<=Math.round(i.height)-this._texture_to_render._textureHeight)&&(i=this._makeBitmapCache(),this._DO_Privs_._cacheDirty=!i),null==this._texture_to_render)return!1;i=(s=this._texture_to_render)._offsetX;var n=s._offsetY,r=s._textureWidth,s=s._textureHeight;return this._updateTransform(),e.setAlpha(this.worldAlpha,this.blendMode),e.setTransform(this._worldTransform),t.RenderFilter.getInstance().drawImage(e,this,0,0,r,s,i,n,r,s),!0},Object.defineProperty(n,"needDraw",{get:function(){return this._DO_Props_._needDraw},set:function(t){this._DO_Props_._needDraw=t},enumerable:!0,configurable:!0}),n._updateTransform=function(){var e=this._DO_Props_;e._visible&&(this._calculateWorldTransform(),"updateTransform"==t.MainContext._renderLoopPhase&&(this.needDraw||this._texture_to_render||e._cacheAsBitmap)&&t.RenderCommand.push(this._draw,this))},n._calculateWorldTransform=function(){var t=this._DO_Props_,e=this._worldTransform,i=t._parent;e.identityMatrix(i._worldTransform),this._getMatrix(e);var n=t._scrollRect;n&&e.append(1,0,0,1,-n.x,-n.y),this.worldAlpha=i.worldAlpha*t._alpha},n._render=function(t){},n.getBounds=function(e,i){void 0===i&&(i=!0);var n=this._DO_Props_,r=this._DO_Privs_,s=this._measureBounds(),a=n._hasWidthSet?n._explicitWidth:s.width,o=n._hasHeightSet?n._explicitHeight:s.height;r._rectW=s.width,r._rectH=s.height,this._clearSizeDirty();var h=s.x,l=(s=s.y,0),c=0;return i&&(0!=n._anchorX||0!=n._anchorY?(l=a*n._anchorX,c=o*n._anchorY):(l=n._anchorOffsetX,c=n._anchorOffsetY)),r._cacheBounds.initialize(h-l,s-c,a,o),n=r._cacheBounds,e||(e=new t.Rectangle),e.initialize(n.x,n.y,n.width,n.height)},n.destroyCacheBounds=function(){var t=this._DO_Privs_;t._cacheBounds.x=0,t._cacheBounds.y=0,t._cacheBounds.width=0,t._cacheBounds.height=0},n._getConcatenatedMatrix=function(){for(var e=i.identityMatrixForGetConcatenated.identity(),n=this;null!=n;){var r=n._DO_Props_;0!=r._anchorX||0!=r._anchorY?(n=n._getSize(t.Rectangle.identity),e.prependTransform(r._x,r._y,r._scaleX,r._scaleY,r._rotation,r._skewX,r._skewY,n.width*r._anchorX,n.height*r._anchorY)):e.prependTransform(r._x,r._y,r._scaleX,r._scaleY,r._rotation,r._skewX,r._skewY,r._anchorOffsetX,r._anchorOffsetY),r._scrollRect&&e.prepend(1,0,0,1,-r._scrollRect.x,-r._scrollRect.y),n=r._parent}return e},n.localToGlobal=function(e,i,n){void 0===e&&(e=0),void 0===i&&(i=0);var r=this._getConcatenatedMatrix();return r.append(1,0,0,1,e,i),n||(n=new t.Point),n.x=r.tx,n.y=r.ty,n},n.globalToLocal=function(e,i,n){void 0===e&&(e=0),void 0===i&&(i=0);var r=this._getConcatenatedMatrix();return r.invert(),r.append(1,0,0,1,e,i),n||(n=new t.Point),n.x=r.tx,n.y=r.ty,n},n.hitTest=function(e,i,n){void 0===n&&(n=!1);var r=this._DO_Props_;return r._visible&&(n||r._touchEnabled)?(e-=(n=this.getBounds(t.Rectangle.identity,!1)).x,i-=n.y,0<=e&&e<n.width&&0<=i&&i<n.height?this.mask||r._scrollRect?r._scrollRect&&e>r._scrollRect.x&&i>r._scrollRect.y&&e<r._scrollRect.x+r._scrollRect.width&&i<r._scrollRect.y+r._scrollRect.height||this.mask&&this.mask.x<=e&&e<this.mask.x+this.mask.width&&this.mask.y<=i&&i<this.mask.y+this.mask.height?this:null:this:null):null},n.hitTestPoint=function(e,i,n){var r=this._DO_Privs_;return e=this.globalToLocal(e,i),n?(r._hitTestPointTexture||(r._hitTestPointTexture=new t.RenderTexture),(n=r._hitTestPointTexture).drawToTexture(this),0!=n.getPixel32(e.x-r._hitTestPointTexture._offsetX,e.y-r._hitTestPointTexture._offsetY)[3]):!!this.hitTest(e.x,e.y,!0)},n._getMatrix=function(e){e||(e=t.Matrix.identity.identity());var i,n,r=this._DO_Props_;i=(n=this._getOffsetPoint()).x,n=n.y;var s=this.__hack_local_matrix;return s?(e.append(s.a,s.b,s.c,s.d,s.tx,s.ty),e.append(1,0,0,1,-i,-n)):e.appendTransform(r._x,r._y,r._scaleX,r._scaleY,r._rotation,r._skewX,r._skewY,i,n),e},n._getSize=function(t){var e=this._DO_Props_;return e._hasHeightSet&&e._hasWidthSet?(this._clearSizeDirty(),t.initialize(0,0,e._explicitWidth,e._explicitHeight)):(this._measureSize(t),e._hasWidthSet&&(t.width=e._explicitWidth),e._hasHeightSet&&(t.height=e._explicitHeight),t)},n._measureSize=function(t){var e=this._DO_Privs_;return this._DO_Props_._sizeDirty?(t=this._measureBounds(),e._rectW=t.width,e._rectH=t.height,this._clearSizeDirty()):(t.width=e._rectW,t.height=e._rectH),t.x=0,t.y=0,t},n._measureBounds=function(){return t.Rectangle.identity.initialize(0,0,0,0)},n._getOffsetPoint=function(){var e=this._DO_Props_,i=e._anchorOffsetX,n=e._anchorOffsetY;return 0==e._anchorX&&0==e._anchorY||(n=this._getSize(t.Rectangle.identity),i=e._anchorX*n.width,n=e._anchorY*n.height),(e=t.Point.identity).x=i,e.y=n,e},n._onAddToStage=function(){this._DO_Props_._stage=t.MainContext.instance.stage,t.DisplayObjectContainer.__EVENT__ADD_TO_STAGE_LIST.push(this)},n._onRemoveFromStage=function(){t.DisplayObjectContainer.__EVENT__REMOVE_FROM_STAGE_LIST.push(this)},Object.defineProperty(n,"stage",{get:function(){return this._DO_Props_._stage},enumerable:!0,configurable:!0}),n.addEventListener=function(n,r,s,a,o){void 0===a&&(a=!1),void 0===o&&(o=0),e.prototype.addEventListener.call(this,n,r,s,a,o),((a=n==t.Event.ENTER_FRAME)||n==t.Event.RENDER)&&this._insertEventBin(a?i._enterFrameCallBackList:i._renderCallBackList,r,s,o,this)},n.removeEventListener=function(n,r,s,a){void 0===a&&(a=!1),e.prototype.removeEventListener.call(this,n,r,s,a),((a=n==t.Event.ENTER_FRAME)||n==t.Event.RENDER)&&this._removeEventBin(a?i._enterFrameCallBackList:i._renderCallBackList,r,s,this)},n.dispatchEvent=function(t){if(!t._bubbles)return e.prototype.dispatchEvent.call(this,t);for(var i=[],n=this;n;)i.push(n),n=n._DO_Props_._parent;return t._reset(),this._dispatchPropagationEvent(t,i),!t._isDefaultPrevented},n._dispatchPropagationEvent=function(t,e,i){for(var n=1,r=(i=e.length)-1;0<=r;r--){var s=e[r];if(t._currentTarget=s,t._target=this,t._eventPhase=n,s._notifyListener(t),t._isPropagationStopped||t._isPropagationImmediateStopped)return}if(s=e[0],t._currentTarget=s,t._target=this,t._eventPhase=2,s._notifyListener(t),!t._isPropagationStopped&&!t._isPropagationImmediateStopped)for(n=3,r=1;r<i&&(s=e[r],t._currentTarget=s,t._target=this,t._eventPhase=n,s._notifyListener(t),!t._isPropagationStopped&&!t._isPropagationImmediateStopped);r++);},n.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e._DO_Props_._parent}return!1},Object.defineProperty(n,"cacheAsBitmap",{get:function(){return this._DO_Props_._cacheAsBitmap},set:function(e){(this._DO_Props_._cacheAsBitmap=e)?t.callLater(this._makeBitmapCache,this):this._texture_to_render=null},enumerable:!0,configurable:!0}),n._makeBitmapCache=function(){this.renderTexture||(this.renderTexture=new t.RenderTexture);var e=this.renderTexture.drawToTexture(this);return this._texture_to_render=e?this.renderTexture:null,e},n._setCacheDirty=function(t){void 0===t&&(t=!0),this._DO_Privs_._cacheDirty=t},i.getTransformBounds=function(t,e){var i=t.x,n=t.y,r=t.width,s=t.height;(i||n)&&e.appendTransform(0,0,1,1,0,0,0,-i,-n);var a=r*e.a,o=(r=r*e.b,s*e.c),h=(s=s*e.d,e.tx),l=e.ty,c=h,u=h,_=l,d=l;return(i=a+h)<c?c=i:i>u&&(u=i),(i=a+o+h)<c?c=i:i>u&&(u=i),(i=o+h)<c?c=i:i>u&&(u=i),(n=r+l)<_?_=n:n>d&&(d=n),(n=r+s+l)<_?_=n:n>d&&(d=n),(n=s+l)<_?_=n:n>d&&(d=n),t.initialize(c,_,u-c,d-_)},Object.defineProperty(n,"filters",{get:function(){return this._DO_Props_._filters},set:function(t){this._DO_Props_._filters=t},enumerable:!0,configurable:!0}),Object.defineProperty(n,"transform",{get:function(){return this._transform||(this._transform=new t.Transform(this)),this._transform},enumerable:!0,configurable:!0}),i.color=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],i.colorMatrixFilter=new t.ColorMatrixFilter,i.identityMatrixForGetConcatenated=new t.Matrix,i._enterFrameCallBackList=[],i._renderCallBackList=[],i}(t.EventDispatcher);t.DisplayObject=e,e.prototype.__class__="egret.DisplayObject"}(egret||(egret={})),function(t){var e=function(e){function i(){e.call(this),this._touchChildren=!0,this._children=[],this._DO_Props_._isContainer=!0}__extends(i,e);var n=i.prototype;return Object.defineProperty(n,"touchChildren",{get:function(){return this._touchChildren},set:function(t){this._touchChildren=t},enumerable:!0,configurable:!0}),Object.defineProperty(n,"numChildren",{get:function(){return this._children.length},enumerable:!0,configurable:!0}),n.setChildIndex=function(t,e){this.doSetChildIndex(t,e)},n.doSetChildIndex=function(e,i){var n=this._children.indexOf(e);0>n&&t.$error(1006),this._children.splice(n,1),0>i||this._children.length<=i?this._children.push(e):this._children.splice(i,0,e)},n.addChild=function(t){var e=this._children.length;return t.parent==this&&e--,this._doAddChild(t,e)},n.addChildAt=function(t,e){return this._doAddChild(t,e)},n._doAddChild=function(e,n,r){if(void 0===r&&(r=!0),e==this)return e;if(0>n||n>this._children.length)return t.$error(1007),e;var s=e.parent;if(s==this)return this.doSetChildIndex(e,n),e;if(s){var a=s._children.indexOf(e);0<=a&&s._doRemoveChild(a)}if(this._children.splice(n,0,e),e._parentChanged(this),r&&e.dispatchEventWith(t.Event.ADDED,!0),this._DO_Props_._stage)for(e._onAddToStage(),n=i.__EVENT__ADD_TO_STAGE_LIST;0<n.length;)s=n.shift(),r&&s.dispatchEventWith(t.Event.ADDED_TO_STAGE);return e._setDirty(),this._setSizeDirty(),e},n.removeChild=function(e){return 0<=(e=this._children.indexOf(e))?this._doRemoveChild(e):(t.$error(1008),null)},n.removeChildAt=function(e){return 0<=e&&e<this._children.length?this._doRemoveChild(e):(t.$error(1007),null)},n._doRemoveChild=function(e,n){void 0===n&&(n=!0);var r=this._children,s=r[e];if(n&&s.dispatchEventWith(t.Event.REMOVED,!0),this._DO_Props_._stage){s._onRemoveFromStage();for(var a=i.__EVENT__REMOVE_FROM_STAGE_LIST;0<a.length;){var o=a.shift();n&&o.dispatchEventWith(t.Event.REMOVED_FROM_STAGE),o._DO_Props_._stage=null}}return s._parentChanged(null),r.splice(e,1),this._setSizeDirty(),s},n.getChildAt=function(e){return 0<=e&&e<this._children.length?this._children[e]:(t.$error(1007),null)},n.contains=function(t){for(;t;){if(t==this)return!0;t=t.parent}return!1},n.swapChildrenAt=function(e,i){0<=e&&e<this._children.length&&0<=i&&i<this._children.length?this._swapChildrenAt(e,i):t.$error(1007)},n.swapChildren=function(e,i){var n=this._children.indexOf(e),r=this._children.indexOf(i);-1==n||-1==r?t.$error(1008):this._swapChildrenAt(n,r)},n._swapChildrenAt=function(t,e){if(t!=e){var i=this._children,n=i[t];i[t]=i[e],i[e]=n}},n.getChildIndex=function(t){return this._children.indexOf(t)},n.removeChildren=function(){for(var t=this._children.length-1;0<=t;t--)this._doRemoveChild(t)},n._updateTransform=function(){if(this._DO_Props_._visible){this._hasFilters()&&t.RenderCommand.push(this._setGlobalFilters,this);var i=this.mask||this._DO_Props_._scrollRect;if(i&&t.RenderCommand.push(this._pushMask,this),e.prototype._updateTransform.call(this),!this._DO_Props_._cacheAsBitmap||!this._texture_to_render)for(var n=0,r=this._children,s=r.length;n<s;n++)r[n]._updateTransform();i&&t.RenderCommand.push(this._popMask,this),this._hasFilters()&&t.RenderCommand.push(this._removeGlobalFilters,this)}},n._render=function(e){if(!t.MainContext.__use_new_draw)for(var i=0,n=this._children,r=n.length;i<r;i++)n[i]._draw(e)},n._measureBounds=function(){for(var e=0,i=0,n=0,r=0,s=this._children,a=s.length,o=0;o<a;o++){if((_=s[o]).visible){var h=(u=_.getBounds(t.Rectangle.identity,!1)).x,l=u.y,c=u.width,u=u.height,_=_._getMatrix();h=(_=t.DisplayObject.getTransformBounds(t.Rectangle.identity.initialize(h,l,c,u),_)).x,l=_.y;(h<e||0==o)&&(e=h),((c=_.width+_.x)>i||0==o)&&(i=c),(l<n||0==o)&&(n=l),((_=_.height+_.y)>r||0==o)&&(r=_)}}return t.Rectangle.identity.initialize(e,n,i-e,r-n)},n.hitTest=function(i,n,r){var s;if(void 0===r&&(r=!1),!this._DO_Props_._visible)return null;if(this._DO_Props_._scrollRect){if(i<this._DO_Props_._scrollRect.x||n<this._DO_Props_._scrollRect.y||i>this._DO_Props_._scrollRect.x+this._DO_Props_._scrollRect.width||n>this._DO_Props_._scrollRect.y+this._DO_Props_._scrollRect.height)return null}else if(this.mask&&(this.mask.x>i||i>this.mask.x+this.mask.width||this.mask.y>n||n>this.mask.y+this.mask.height))return null;for(var a=this._children,o=this._touchChildren,h=a.length-1;0<=h;h--){var l=a[h],c=l._getMatrix(),u=l.scrollRect;if(u&&c.append(1,0,0,1,-u.x,-u.y),c.invert(),c=t.Matrix.transformCoords(c,i,n),l=l.hitTest(c.x,c.y,!0)){if(!o)return this;if(l._DO_Props_._touchEnabled&&o)return l;s=this}}return s||(this._texture_to_render?e.prototype.hitTest.call(this,i,n,r):null)},n._onAddToStage=function(){e.prototype._onAddToStage.call(this);for(var t=this._children.length,i=0;i<t;i++)this._children[i]._onAddToStage()},n._onRemoveFromStage=function(){e.prototype._onRemoveFromStage.call(this);for(var t=this._children,i=t.length,n=0;n<i;n++)t[n]._onRemoveFromStage()},n.getChildByName=function(t){for(var e,i=this._children,n=i.length,r=0;r<n;r++)if((e=i[r]).name==t)return e;return null},i.__EVENT__ADD_TO_STAGE_LIST=[],i.__EVENT__REMOVE_FROM_STAGE_LIST=[],i}(t.DisplayObject);t.DisplayObjectContainer=e,e.prototype.__class__="egret.DisplayObjectContainer"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.NO_BORDER="noBorder",t.NO_SCALE="noScale",t.SHOW_ALL="showAll",t.EXACT_FIT="exactFit",t}();t.StageScaleMode=e,e.prototype.__class__="egret.StageScaleMode"}(egret||(egret={})),function(t){var e=function(e){function i(t,i){void 0===t&&(t=480),void 0===i&&(i=800),e.call(this),this._changeSizeDispatchFlag=!0,this._scaleMode="",this._stageHeight=this._stageWidth=NaN,this._frameRate=60,this.touchEnabled=!0,this._DO_Props_._stage=this,this._stageWidth=t,this._stageHeight=i}__extends(i,e);var n=i.prototype;return n.invalidate=function(){i._invalidateRenderFlag=!0},Object.defineProperty(n,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!=t&&(this._scaleMode=t,this.setResolutionPolicy())},enumerable:!0,configurable:!0}),n.changeSize=function(){this._changeSizeDispatchFlag&&(this.setResolutionPolicy(),this.dispatchEventWith(t.Event.RESIZE))},n.setResolutionPolicy=function(){(n=i.SCALE_MODE_ENUM[this._scaleMode])||t.$error(1024);var e=new t.EqualToFrame,n=new t.ResolutionPolicy(e,n);t.StageDelegate.getInstance()._setResolutionPolicy(n),this._stageWidth=t.StageDelegate.getInstance()._stageWidth,this._stageHeight=t.StageDelegate.getInstance()._stageHeight},Object.defineProperty(n,"stageWidth",{get:function(){return this._stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(n,"stageHeight",{get:function(){return this._stageHeight},enumerable:!0,configurable:!0}),Object.defineProperty(n,"frameRate",{get:function(){return this._frameRate},set:function(e){this._frameRate=e,t.MainContext.instance.deviceContext.setFrameRate(e)},enumerable:!0,configurable:!0}),n.hitTest=function(e,i,n){if(!this._DO_Props_._touchEnabled)return null;var r;if(!this._touchChildren)return this;for(var s=(n=this._children).length-1;0<=s;s--){var a=(r=n[s])._getMatrix(),o=r.scrollRect;if(o&&a.append(1,0,0,1,-o.x,-o.y),a.invert(),a=t.Matrix.transformCoords(a,e,i),(r=r.hitTest(a.x,a.y,!0))&&r.touchEnabled)return r}return this},n.getBounds=function(e){return e||(e=new t.Rectangle),e.initialize(0,0,this._stageWidth,this._stageHeight)},n._updateTransform=function(){for(var t=0,e=this._children.length;t<e;t++)this._children[t]._updateTransform()},Object.defineProperty(n,"focus",{get:function(){return null},enumerable:!0,configurable:!0}),i.registerScaleMode=function(e,n,r){i.SCALE_MODE_ENUM[e]&&!r?t.$warn(1009,e):i.SCALE_MODE_ENUM[e]=n},i._invalidateRenderFlag=!1,i.SCALE_MODE_ENUM={},i}(t.DisplayObjectContainer);t.Stage=e,e.prototype.__class__="egret.Stage"}(egret||(egret={})),egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.NO_SCALE]=new egret.NoScale,egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.SHOW_ALL]=new egret.ShowAll,egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.NO_BORDER]=new egret.FixedWidth,egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.EXACT_FIT]=new egret.FullScreen,function(t){var e=function(){this._horizontalScrollPolicy=this._verticalScrollPolicy="auto",this._scrollTop=this._scrollLeft=0,this._vCanScroll=this._hCanScroll=!1,this._lastTouchPosition=new t.Point(0,0),this._touchStartPosition=new t.Point(0,0),this._scrollStarted=!1,this._lastTouchTime=0,this._lastTouchEvent=null,this._velocitys=[],this._isVTweenPlaying=this._isHTweenPlaying=!1,this._vScrollTween=this._hScrollTween=null};t.ScrollViewProperties=e,e.prototype.__class__="egret.ScrollViewProperties"}(egret||(egret={})),function(t){var e=function(e){function i(i){void 0===i&&(i=null),e.call(this),this.scrollBeginThreshold=10,this.scrollSpeed=1,this.touchBeginTimer=this.delayTouchBeginEvent=this._content=null,this.touchEnabled=!0,this._ScrV_Props_=new t.ScrollViewProperties,i&&this.setContent(i)}__extends(i,e);var n=i.prototype;return n.setContent=function(t){this._content!==t&&(this.removeContent(),t&&(this._content=t,e.prototype.addChild.call(this,t),this._addEvents()))},n.removeContent=function(){this._content&&(this._removeEvents(),e.prototype.removeChildAt.call(this,0)),this._content=null},Object.defineProperty(n,"verticalScrollPolicy",{get:function(){return this._ScrV_Props_._verticalScrollPolicy},set:function(t){t!=this._ScrV_Props_._verticalScrollPolicy&&(this._ScrV_Props_._verticalScrollPolicy=t)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"horizontalScrollPolicy",{get:function(){return this._ScrV_Props_._horizontalScrollPolicy},set:function(t){t!=this._ScrV_Props_._horizontalScrollPolicy&&(this._ScrV_Props_._horizontalScrollPolicy=t)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"scrollLeft",{get:function(){return this._ScrV_Props_._scrollLeft},set:function(t){t!=this._ScrV_Props_._scrollLeft&&(this._ScrV_Props_._scrollLeft=t,this._validatePosition(!1,!0),this._updateContentPosition())},enumerable:!0,configurable:!0}),Object.defineProperty(n,"scrollTop",{get:function(){return this._ScrV_Props_._scrollTop},set:function(t){t!=this._ScrV_Props_._scrollTop&&(this._ScrV_Props_._scrollTop=t,this._validatePosition(!0,!1),this._updateContentPosition())},enumerable:!0,configurable:!0}),n.setScrollPosition=function(t,e,i){if(void 0===i&&(i=!1),(!i||0!=t||0!=e)&&(i||this._ScrV_Props_._scrollTop!=t||this._ScrV_Props_._scrollLeft!=e)){if(i){i=this._isOnTheEdge(!0);var n=this._isOnTheEdge(!1);this._ScrV_Props_._scrollTop+=i?t/2:t,this._ScrV_Props_._scrollLeft+=n?e/2:e}else this._ScrV_Props_._scrollTop=t,this._ScrV_Props_._scrollLeft=e;this._validatePosition(!0,!0),this._updateContentPosition()}},n._isOnTheEdge=function(t){void 0===t&&(t=!0);var e=this._ScrV_Props_._scrollTop,i=this._ScrV_Props_._scrollLeft;return t?0>e||e>this.getMaxScrollTop():0>i||i>this.getMaxScrollLeft()},n._validatePosition=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),t){var i=this.height,n=this._getContentHeight();this._ScrV_Props_._scrollTop=Math.max(this._ScrV_Props_._scrollTop,(0-i)/2),this._ScrV_Props_._scrollTop=Math.min(this._ScrV_Props_._scrollTop,n>i?n-i/2:i/2)}e&&(i=this.width,n=this._getContentWidth(),this._ScrV_Props_._scrollLeft=Math.max(this._ScrV_Props_._scrollLeft,(0-i)/2),this._ScrV_Props_._scrollLeft=Math.min(this._ScrV_Props_._scrollLeft,n>i?n-i/2:i/2))},n._setWidth=function(t){this._DO_Props_._explicitWidth!=t&&(e.prototype._setWidth.call(this,t),this._updateContentPosition())},n._setHeight=function(t){this._DO_Props_._explicitHeight!=t&&(e.prototype._setHeight.call(this,t),this._updateContentPosition())},n._updateContentPosition=function(){var e=(i=this.getBounds(t.Rectangle.identity)).height,i=i.width;this.scrollRect=new t.Rectangle(Math.round(this._ScrV_Props_._scrollLeft),Math.round(this._ScrV_Props_._scrollTop),i,e),this.dispatchEvent(new t.Event(t.Event.CHANGE))},n._checkScrollPolicy=function(){var t=this.__checkScrollPolicy(this._ScrV_Props_._horizontalScrollPolicy,this._getContentWidth(),this.width);this._ScrV_Props_._hCanScroll=t;var e=this.__checkScrollPolicy(this._ScrV_Props_._verticalScrollPolicy,this._getContentHeight(),this.height);return this._ScrV_Props_._vCanScroll=e,t||e},n.__checkScrollPolicy=function(t,e,i){return"on"==t||"off"!=t&&e>i},n._addEvents=function(){this.addEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this),this.addEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0),this.addEventListener(t.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)},n._removeEvents=function(){this.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this),this.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0),this.removeEventListener(t.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)},n._onTouchBegin=function(e){!e._isDefaultPrevented&&this._checkScrollPolicy()&&(this._ScrV_Props_._touchStartPosition.x=e.stageX,this._ScrV_Props_._touchStartPosition.y=e.stageY,(this._ScrV_Props_._isHTweenPlaying||this._ScrV_Props_._isVTweenPlaying)&&this._onScrollFinished(),this.stage.addEventListener(t.TouchEvent.TOUCH_MOVE,this._onTouchMove,this),this.stage.addEventListener(t.TouchEvent.TOUCH_END,this._onTouchEnd,this),this.stage.addEventListener(t.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this),this.addEventListener(t.Event.ENTER_FRAME,this._onEnterFrame,this),this._logTouchEvent(e),e.preventDefault())},n._onTouchBeginCapture=function(e){var i=this._checkScrollPolicy();if(i){for(var n=e.target;n!=this;){if("_checkScrollPolicy"in n&&(i=n._checkScrollPolicy()))return;n=n.parent}e.stopPropagation(),this.delayTouchBeginEvent=this.cloneTouchEvent(e),this.touchBeginTimer||(this.touchBeginTimer=new t.Timer(100,1),this.touchBeginTimer.addEventListener(t.TimerEvent.TIMER_COMPLETE,this._onTouchBeginTimer,this)),this.touchBeginTimer.start(),this._onTouchBegin(e)}},n._onTouchEndCapture=function(t){this.delayTouchBeginEvent&&this._onTouchBeginTimer()},n._onTouchBeginTimer=function(){this.touchBeginTimer.stop();var t=this.delayTouchBeginEvent;this.delayTouchBeginEvent=null,this.stage&&this.dispatchPropagationEvent(t)},n.dispatchPropagationEvent=function(t){for(var e=[],i=t._target,n=0;i;)i==this&&(n=e.length),e.push(i),i=i.parent;i=e.slice(0,n),e=(i=i.reverse()).concat(e),this._dispatchPropagationEvent(t,e,n)},n._dispatchPropagationEvent=function(t,e,i){for(var n=e.length,r=0;r<n;r++){var s=e[r];if(t._currentTarget=s,t._eventPhase=r<i?1:r==i?2:3,s._notifyListener(t),t._isPropagationStopped||t._isPropagationImmediateStopped)break}},n._onTouchMove=function(t){if(this._ScrV_Props_._lastTouchPosition.x!=t.stageX||this._ScrV_Props_._lastTouchPosition.y!=t.stageY){if(!this._ScrV_Props_._scrollStarted){var e=t.stageX-this._ScrV_Props_._touchStartPosition.x,i=t.stageY-this._ScrV_Props_._touchStartPosition.y;if(Math.sqrt(e*e+i*i)<this.scrollBeginThreshold)return void this._logTouchEvent(t)}this._ScrV_Props_._scrollStarted=!0,this.delayTouchBeginEvent&&(this.delayTouchBeginEvent=null,this.touchBeginTimer.stop()),this.touchChildren=!1,e=this._getPointChange(t),this.setScrollPosition(e.y,e.x,!0),this._calcVelocitys(t),this._logTouchEvent(t)}},n._onTouchEnd=function(e){this.touchChildren=!0,this._ScrV_Props_._scrollStarted=!1,t.MainContext.instance.stage.removeEventListener(t.TouchEvent.TOUCH_MOVE,this._onTouchMove,this),t.MainContext.instance.stage.removeEventListener(t.TouchEvent.TOUCH_END,this._onTouchEnd,this),t.MainContext.instance.stage.removeEventListener(t.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this),this.removeEventListener(t.Event.ENTER_FRAME,this._onEnterFrame,this),this._moveAfterTouchEnd()},n._onEnterFrame=function(e){100<(e=t.getTimer())-this._ScrV_Props_._lastTouchTime&&300>e-this._ScrV_Props_._lastTouchTime&&this._calcVelocitys(this._ScrV_Props_._lastTouchEvent)},n._logTouchEvent=function(e){this._ScrV_Props_._lastTouchPosition.x=e.stageX,this._ScrV_Props_._lastTouchPosition.y=e.stageY,this._ScrV_Props_._lastTouchEvent=this.cloneTouchEvent(e),this._ScrV_Props_._lastTouchTime=t.getTimer()},n._getPointChange=function(t){return{x:!1===this._ScrV_Props_._hCanScroll?0:this._ScrV_Props_._lastTouchPosition.x-t.stageX,y:!1===this._ScrV_Props_._vCanScroll?0:this._ScrV_Props_._lastTouchPosition.y-t.stageY}},n._calcVelocitys=function(e){var i=t.getTimer();if(0==this._ScrV_Props_._lastTouchTime)this._ScrV_Props_._lastTouchTime=i;else{var n=this._getPointChange(e);i=i-this._ScrV_Props_._lastTouchTime;n.x/=i,n.y/=i,this._ScrV_Props_._velocitys.push(n),5<this._ScrV_Props_._velocitys.length&&this._ScrV_Props_._velocitys.shift(),this._ScrV_Props_._lastTouchPosition.x=e.stageX,this._ScrV_Props_._lastTouchPosition.y=e.stageY}},n._getContentWidth=function(){return this._content.explicitWidth||this._content.width},n._getContentHeight=function(){return this._content.explicitHeight||this._content.height},n.getMaxScrollLeft=function(){var t=this._getContentWidth()-this.width;return Math.max(0,t)},n.getMaxScrollTop=function(){var t=this._getContentHeight()-this.height;return Math.max(0,t)},n._moveAfterTouchEnd=function(){if(0!=this._ScrV_Props_._velocitys.length){for(var t=0,e=0,n=0,r=0;r<this._ScrV_Props_._velocitys.length;r++){var s=this._ScrV_Props_._velocitys[r],a=i.weight[r];t=t+s.x*a,e=e+s.y*a,n=n+a}this._ScrV_Props_._velocitys.length=0,0>=this.scrollSpeed&&(this.scrollSpeed=1),t=t/n*this.scrollSpeed,e=e/n*this.scrollSpeed,s=Math.abs(t),n=Math.abs(e),a=this.getMaxScrollLeft(),r=this.getMaxScrollTop(),t=.02<s?this.getAnimationDatas(t,this._ScrV_Props_._scrollLeft,a):{position:this._ScrV_Props_._scrollLeft,duration:1},e=.02<n?this.getAnimationDatas(e,this._ScrV_Props_._scrollTop,r):{position:this._ScrV_Props_._scrollTop,duration:1},this.setScrollLeft(t.position,t.duration),this.setScrollTop(e.position,e.duration)}},n._onTweenFinished=function(t){t==this._ScrV_Props_._vScrollTween&&(this._ScrV_Props_._isVTweenPlaying=!1),t==this._ScrV_Props_._hScrollTween&&(this._ScrV_Props_._isHTweenPlaying=!1),0==this._ScrV_Props_._isHTweenPlaying&&0==this._ScrV_Props_._isVTweenPlaying&&this._onScrollFinished()},n._onScrollStarted=function(){},n._onScrollFinished=function(){t.Tween.removeTweens(this),this._ScrV_Props_._hScrollTween=null,this._ScrV_Props_._vScrollTween=null,this._ScrV_Props_._isHTweenPlaying=!1,this._ScrV_Props_._isVTweenPlaying=!1,this.dispatchEvent(new t.Event(t.Event.COMPLETE))},n.setScrollTop=function(e,i){void 0===i&&(i=0);var n=Math.min(this.getMaxScrollTop(),Math.max(e,0));if(0==i)return this.scrollTop=n,null;var r=t.Tween.get(this).to({scrollTop:e},i,t.Ease.quartOut);return n!=e&&r.to({scrollTop:n},300,t.Ease.quintOut),this._ScrV_Props_._isVTweenPlaying=!0,this._ScrV_Props_._vScrollTween=r,r.call(this._onTweenFinished,this,[r]),this._ScrV_Props_._isHTweenPlaying||this._onScrollStarted(),r},n.setScrollLeft=function(e,i){void 0===i&&(i=0);var n=Math.min(this.getMaxScrollLeft(),Math.max(e,0));if(0==i)return this.scrollLeft=n,null;var r=t.Tween.get(this).to({scrollLeft:e},i,t.Ease.quartOut);return n!=e&&r.to({scrollLeft:n},300,t.Ease.quintOut),this._ScrV_Props_._isHTweenPlaying=!0,this._ScrV_Props_._hScrollTween=r,r.call(this._onTweenFinished,this,[r]),this._ScrV_Props_._isVTweenPlaying||this._onScrollStarted(),r},n.getAnimationDatas=function(t,e,i){var n=Math.abs(t),r=0,s=e+500*t;if(0>s||s>i)for(s=e;1/0!=Math.abs(t)&&.02<Math.abs(t);)t=0>(s+=t)||s>i?.998*t*.95:.998*t,r++;else r=500*-Math.log(.02/n);return{position:Math.min(i+50,Math.max(s,-50)),duration:r}},n.cloneTouchEvent=function(e){var i=new t.TouchEvent(e._type,e._bubbles,e.cancelable);return i.touchPointID=e.touchPointID,i._stageX=e._stageX,i._stageY=e._stageY,i.ctrlKey=e.ctrlKey,i.altKey=e.altKey,i.shiftKey=e.shiftKey,i.touchDown=e.touchDown,i._isDefaultPrevented=!1,i._target=e._target,i},n.throwNotSupportedError=function(){t.$error(1023)},n.addChild=function(t){return this.throwNotSupportedError(),null},n.addChildAt=function(t,e){return this.throwNotSupportedError(),null},n.removeChild=function(t){return this.throwNotSupportedError(),null},n.removeChildAt=function(t){return this.throwNotSupportedError(),null},n.setChildIndex=function(t,e){this.throwNotSupportedError()},n.swapChildren=function(t,e){this.throwNotSupportedError()},n.swapChildrenAt=function(t,e){this.throwNotSupportedError()},n.hitTest=function(i,n,r){void 0===r&&(r=!1);var s=e.prototype.hitTest.call(this,i,n,r);return s||t.DisplayObject.prototype.hitTest.call(this,i,n,r)},i.weight=[1,1.33,1.66,2,2.33],i}(t.DisplayObjectContainer);t.ScrollView=e,e.prototype.__class__="egret.ScrollView"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.REPEAT="repeat",t.SCALE="scale",t}();t.BitmapFillMode=e,e.prototype.__class__="egret.BitmapFillMode"}(egret||(egret={})),function(t){var e=function(e){function i(t){e.call(this),this.scale9Grid=this._texture=null,this.fillMode="scale",t&&(this._texture=t,this._setSizeDirty()),this.needDraw=!0}__extends(i,e);var n=i.prototype;return Object.defineProperty(n,"texture",{get:function(){return this._texture},set:function(t){t!=this._texture&&(this._setSizeDirty(),this._texture=t)},enumerable:!0,configurable:!0}),n._render=function(t){var e=this._texture;e?(this._texture_to_render=e,i._drawBitmap(t,this._DO_Props_._hasWidthSet?this._DO_Props_._explicitWidth:e._textureWidth,this._DO_Props_._hasHeightSet?this._DO_Props_._explicitHeight:e._textureHeight,this)):this._texture_to_render=null},i._drawBitmap=function(t,e,n,r){var s=r._texture_to_render;if(s){var a=s._textureWidth,o=s._textureHeight;if("scale"==r.fillMode)if((h=r.scale9Grid||s.scale9Grid)&&a-h.width<e&&o-h.height<n)i.drawScale9GridImage(t,r,h,e,n);else{var h=s._offsetX,l=s._offsetY,c=s._bitmapWidth||a,u=s._bitmapHeight||o;e/=a,h=Math.round(h*e),e=Math.round(c*e),n/=o,l=Math.round(l*n),n=Math.round(u*n),i.renderFilter.drawImage(t,r,s._bitmapX,s._bitmapY,c,u,h,l,e,n)}else i.drawRepeatImage(t,r,e,n,r.fillMode)}},i.drawRepeatImage=function(e,i,n,r,s){if(u=i._texture_to_render){var a=u._textureWidth,o=u._textureHeight,h=u._bitmapX,l=u._bitmapY,c=(a=u._bitmapWidth||a,o=u._bitmapHeight||o,u._offsetX),u=u._offsetY;t.RenderFilter.getInstance().drawImage(e,i,h,l,a,o,c,u,n,r,s)}},i.drawScale9GridImage=function(e,i,n,r,s){var a=t.MainContext.instance.rendererContext._texture_scale_factor,o=i._texture_to_render;if(o&&n){var h=o._textureWidth,l=o._textureHeight,c=o._bitmapX,u=o._bitmapY;if(r-=h-(T=o._bitmapWidth||h),s-=l-(y=o._bitmapHeight||l),!e.drawImageScale9(o,c,u,T,y,o._offsetX,o._offsetY,r,s,n)){h=o._offsetX/a,l=o._offsetY/a,o=t.RenderFilter.getInstance(),n=t.Rectangle.identity.initialize(n.x-Math.round(h),n.y-Math.round(h),n.width,n.height),h=Math.round(h),l=Math.round(l),n.y==n.bottom&&(n.bottom<y?n.bottom++:n.y--),n.x==n.right&&(n.right<T?n.right++:n.x--);var _=c+n.x/a,d=c+n.right/a,g=T-n.right,f=u+n.y/a,p=(a=u+n.bottom/a,y-n.bottom),m=h+n.x,v=l+n.y,y=s-(y-n.bottom),T=r-(T-n.right);o.drawImage(e,i,c,u,n.x,n.y,h,l,n.x,n.y),o.drawImage(e,i,_,u,n.width,n.y,m,l,T-n.x,n.y),o.drawImage(e,i,d,u,g,n.y,h+T,l,r-T,n.y),o.drawImage(e,i,c,f,n.x,n.height,h,v,n.x,y-n.y),o.drawImage(e,i,_,f,n.width,n.height,m,v,T-n.x,y-n.y),o.drawImage(e,i,d,f,g,n.height,h+T,v,r-T,y-n.y),o.drawImage(e,i,c,a,n.x,p,h,l+y,n.x,s-y),o.drawImage(e,i,_,a,n.width,p,m,l+y,T-n.x,s-y),o.drawImage(e,i,d,a,g,p,h+T,l+y,r-T,s-y)}}},n._measureBounds=function(){var i=this._texture;return i?t.Rectangle.identity.initialize(0,0,i._textureWidth,i._textureHeight):e.prototype._measureBounds.call(this)},i.renderFilter=t.RenderFilter.getInstance(),i}(t.DisplayObject);t.Bitmap=e,e.prototype.__class__="egret.Bitmap"}(egret||(egret={})),function(t){var e=function(e){function i(){e.call(this),this._text="",this._textChanged=!1,this._font=null,this._fontChanged=!1,this._textOffsetY=this._textOffsetX=this._textHeight=this._textWidth=this._lineSpacing=this._letterSpacing=0,this.textLinesChange=!0,this._lineHeights=[],this.needDraw=this.cacheAsBitmap=!0}__extends(i,e);var n=i.prototype;return Object.defineProperty(n,"text",{get:function(){return this._text},set:function(t){this.$setText(t)},enumerable:!0,configurable:!0}),n.$setText=function(t){this._text!=t&&(this._textChanged=!0,this._text=t,this._setSizeDirty())},Object.defineProperty(n,"font",{get:function(){return this._font},set:function(t){this.$setFont(t)},enumerable:!0,configurable:!0}),n.$setFont=function(t){this._font!=t&&(this._font=t,this._fontChanged=!0,this._setSizeDirty())},Object.defineProperty(n,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._setLetterSpacing(t)},enumerable:!0,configurable:!0}),n._setLetterSpacing=function(t){this._letterSpacing=t,this._setSizeDirty()},Object.defineProperty(n,"lineSpacing",{get:function(){return this._lineSpacing},set:function(t){this._setLineSpacing(t)},enumerable:!0,configurable:!0}),n._setLineSpacing=function(t){this._lineSpacing=t},n._setSizeDirty=function(){e.prototype._setSizeDirty.call(this),this.textLinesChange=!0},n._render=function(e){var n=this._getTextLines(),r=n.length;if(0!=r){for(var s=this._font,a=s._getFirstCharHeight(),o=(a=Math.ceil(a*i.EMPTY_FACTOR),0),h=this._DO_Props_._hasHeightSet?this._DO_Props_._explicitHeight:Number.POSITIVE_INFINITY,l=this._lineHeights,c=0;c<r;c++){var u=l[c];if(0<c&&o+u>h)break;for(var _=n[c],d=_.length,g=0,f=0;f<d;f++){var p=_.charAt(f),m=s.getTexture(p);if(m){p=m._bitmapWidth||m._textureWidth;var v=m._bitmapHeight||m._textureHeight;this._texture_to_render=m,t.RenderFilter.getInstance().drawImage(e,this,m._bitmapX,m._bitmapY,p,v,g+m._offsetX,o+m._offsetY,p,v),g+=m._textureWidth+this._letterSpacing}else" "==p?g+=a:t.$warn(1011,p)}o+=u+this._lineSpacing}this._texture_to_render=null}},n._measureBounds=function(){var e=this._getTextLines();return 0==e.length?t.Rectangle.identity.initialize(0,0,0,0):t.Rectangle.identity.initialize(this._textOffsetX,this._textOffsetY,this._textWidth-this._textOffsetX,this._textHeight-this._textOffsetY+(e.length-1)*this._lineSpacing)},n._getTextLines=function(){if(!this.textLinesChange)return this._textLines;var e=[];this._textLines=e,this.textLinesChange=!1;var n=[];if(this._lineHeights=n,!this._text||!this._font)return e;for(var r=0,s=0,a=0,o=0,h=this._DO_Props_._hasWidthSet,l=this._DO_Props_._hasWidthSet?this._DO_Props_._explicitWidth:Number.POSITIVE_INFINITY,c=this._font,u=c._getFirstCharHeight(),_=Math.ceil(u*i.EMPTY_FACTOR),d=this._text.split(/(?:\r\n|\r|\n)/),g=d.length,f=!0,p=0;p<g;p++){for(var m=d[p],v=m.length,y=0,T=0,x=!0,b=0;b<v;b++){x||(T+=this._letterSpacing);var E,C=m.charAt(b),S=0,P=0,w=c.getTexture(C);if(w)C=w._textureWidth,E=w._textureHeight,S=w._offsetX,P=w._offsetY;else{if(" "!=C){t.$warn(1011,C),x&&(x=!1);continue}C=_,E=u}x&&(x=!1,a=Math.min(S,a)),f&&(o=Math.min(P,o)),h&&0<b&&T+C>l?(e.push(m.substring(0,b)),n.push(y),s+=y,r=Math.max(T,r),v=(m=m.substring(b)).length,b=0,T=C,y=E):(T+=C,y=Math.max(E,y))}f&&(f=!1),e.push(m),n.push(y),s+=y,r=Math.max(T,r)}return this._textWidth=r,this._textHeight=s,this._textOffsetX=a,this._textOffsetY=o,e},i.EMPTY_FACTOR=.33,i}(t.DisplayObject);t.BitmapText=e,e.prototype.__class__="egret.BitmapText"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.LINEAR="linear",t.RADIAL="radial",t}();t.GradientType=e,e.prototype.__class__="egret.GradientType"}(egret||(egret={})),function(t){var e=function(){function e(){this.fillStyle=this.strokeStyle=this.commandQueue=this._renderContext=null,this._dirty=!1,this.lineY=this.lineX=0,this._firstCheck=!0,this._lastY=this._lastX=this._maxY=this._maxX=this._minY=this._minX=0,this.commandQueue=[]}var n=e.prototype;return n.beginFill=function(t,e){void 0===e&&(e=1),this.fillStyle=this._parseColor(t,e),this._pushCommand(new i(this._setStyle,this,[this.fillStyle]))},n._parseColor=function(t,e){return"rgba("+(t>>16)+","+((65280&t)>>8)+","+(255&t)+","+e+")"},n._setStyle=function(e){t.Graphics._currentFillStyle=e,this._renderContext.fillStyle=e,this._renderContext.beginPath()},n.beginGradientFill=function(t,e,n,r,s){void 0===s&&(s=null),this.fillStyle=t=this.getGradient(t,e,n,r,s),this._pushCommand(new i(this._setStyle,this,[t]))},n.getGradient=function(e,i,n,r,s){var a=t.MainContext.instance.rendererContext,o=new t.Matrix;for(s?(o.a=819.2*s.a,o.b=819.2*s.b,o.c=819.2*s.c,o.d=819.2*s.d,o.tx=s.tx,o.ty=s.ty):(o.a=100,o.d=100),e=e==t.GradientType.LINEAR?a.createLinearGradient(-1,0,1,0):a.createRadialGradient(0,0,0,0,0,1),s=i.length,a=0;a<s;a++)e.addColorStop(r[a]/255,this._parseColor(i[a],n[a]));return e.matrix=o,e},n.drawRect=function(t,e,n,r){this._pushCommand(new i((function(t,e,i,n){this._renderContext.beginPath(),this._renderContext.rect(t,e,i,n),this._renderContext.closePath()}),this,[t,e,n,r])),this._checkRect(t,e,n,r)},n.drawCircle=function(t,e,n){this._pushCommand(new i((function(t,e,i){this._renderContext.beginPath(),this._renderContext.arc(t,e,i,0,2*Math.PI),this._renderContext.closePath()}),this,[t,e,n])),this._checkRect(t-n,e-n,2*n,2*n)},n.drawRoundRect=function(t,e,n,r,s,a){this._pushCommand(new i((function(t,e,i,n,r,s){r/=2,i=t+i;var a=(n=e+n)-(s=s?s/2:r);this._renderContext.beginPath(),this._renderContext.moveTo(i,a),this._renderContext.quadraticCurveTo(i,n,i-r,n),this._renderContext.lineTo(t+r,n),this._renderContext.quadraticCurveTo(t,n,t,n-s),this._renderContext.lineTo(t,e+s),this._renderContext.quadraticCurveTo(t,e,t+r,e),this._renderContext.lineTo(i-r,e),this._renderContext.quadraticCurveTo(i,e,i,e+s),this._renderContext.lineTo(i,a),this._renderContext.closePath()}),this,[t,e,n,r,s,a])),this._checkRect(t,e,n,r)},n.drawEllipse=function(t,e,n,r){this._pushCommand(new i((function(t,e,i,n){t+=i/2,e+=n/2;var r=i>n?i:n;i/=r,n/=r,r/=2,this._renderContext.scale(i,n),this._renderContext.beginPath(),this._renderContext.arc(t/i,e/n,r,0,2*Math.PI),this._renderContext.closePath(),this._renderContext.scale(1/i,1/n)}),this,[t,e,n,r])),this._checkRect(t,e,n,r)},n.lineStyle=function(t,e,n,r,s,a,o,h){void 0===t&&(t=NaN),void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r=!1),void 0===s&&(s="normal"),void 0===a&&(a=null),void 0===o&&(o=null),void 0===h&&(h=3),this.strokeStyle&&(this._createEndLineCommand(),this._pushCommand(this._endLineCommand)),this.strokeStyle=this._parseColor(e,n),this._pushCommand(new i((function(t,e){this._renderContext.lineWidth=t,this._renderContext.strokeStyle=e,this._renderContext.beginPath()}),this,[t,this.strokeStyle])),this.moveTo(this.lineX,this.lineY)},n.lineTo=function(t,e){this._pushCommand(new i((function(t,e){this._renderContext.lineTo(t,e)}),this,[t,e])),this._checkPoint(this.lineX,this.lineY),this.lineX=t,this.lineY=e,this._checkPoint(t,e)},n.curveTo=function(t,e,n,r){this._pushCommand(new i((function(t,e,i,n){this._renderContext.quadraticCurveTo(t,e,i,n)}),this,[t,e,n,r])),this._checkPoint(this.lineX,this.lineY),this.lineX=n,this.lineY=r,this._checkPoint(t,e),this._checkPoint(n,r)},n.cubicCurveTo=function(t,e,n,r,s,a){this._pushCommand(new i((function(t,e,i,n,r,s){this._renderContext.bezierCurveTo(t,e,i,n,r,s)}),this,[t,e,n,r,s,a])),this._checkPoint(this.lineX,this.lineY),this.lineX=s,this.lineY=a,this._checkPoint(t,e),this._checkPoint(n,r),this._checkPoint(s,a)},n.moveTo=function(t,e){this._pushCommand(new i((function(t,e){this._renderContext.moveTo(t,e)}),this,[t,e])),this.lineX=t,this.lineY=e},n.clear=function(){this.lineY=this.lineX=this.commandQueue.length=0,this.fillStyle=this.strokeStyle=null,this._maxY=this._maxX=this._minY=this._minX=0,this._dirty=this._firstCheck=!0},n.endFill=function(){null!=this.fillStyle&&(this._fill(),this.fillStyle=null)},n._beginDraw=function(t){},n._endDraw=function(t){},n._draw=function(t){var e=this.commandQueue.length;if(0!=e){this._beginDraw(t);for(var i=0;i<e;i++){var n=this.commandQueue[i];n.method.apply(n.thisObject,n.args)}this.fillStyle&&(this._createEndFillCommand(),(n=this._endFillCommand).method.apply(n.thisObject,n.args)),this.strokeStyle&&(this._createEndLineCommand(),(n=this._endLineCommand).method.apply(n.thisObject,n.args)),this._endDraw(t),this._dirty=!1}},n._checkRect=function(t,e,i,n){this._firstCheck?(this._firstCheck=!1,this._minX=t,this._minY=e,this._maxX=t+i,this._maxY=e+n):(this._minX=Math.min(this._minX,t),this._minY=Math.min(this._minY,e),this._maxX=Math.max(this._maxX,t+i),this._maxY=Math.max(this._maxY,e+n)),this._dirty=!0},n._checkPoint=function(t,e){this._firstCheck?(this._firstCheck=!1,this._minX=t,this._minY=e,this._maxX=t,this._maxY=e):(this._minX=Math.min(this._minX,t),this._minY=Math.min(this._minY,e),this._maxX=Math.max(this._maxX,t),this._maxY=Math.max(this._maxY,e)),this._lastX=t,this._lastY=e,this._dirty=!0},n._measureBounds=function(){return t.Rectangle.identity.initialize(this._minX,this._minY,this._maxX-this._minX,this._maxY-this._minY)},n._createEndFillCommand=function(){this._endFillCommand||(this._endFillCommand=new i((function(){this._renderContext.fill(),this._renderContext.closePath()}),this,null))},n._fill=function(){this.fillStyle&&(this._createEndFillCommand(),this._pushCommand(this._endFillCommand)),this.strokeStyle&&(this._createEndLineCommand(),this._pushCommand(this._endLineCommand))},n._createEndLineCommand=function(){this._endLineCommand||(this._endLineCommand=new i((function(){this._renderContext.stroke(),this._renderContext.closePath()}),this,null))},n._pushCommand=function(t){this.commandQueue.push(t),this._dirty=!0},e}();t.Graphics=e,e.prototype.__class__="egret.Graphics";var i=function(t,e,i){this.method=t,this.thisObject=e,this.args=i};i.prototype.__class__="egret.Command"}(egret||(egret={})),function(t){var e=function(e){function i(){e.call(this),this._graphics=null}__extends(i,e);var n=i.prototype;return Object.defineProperty(n,"graphics",{get:function(){return this._graphics||(this._graphics=new t.Graphics,this.needDraw=!0),this._graphics},enumerable:!0,configurable:!0}),n._draw=function(t){this._graphics&&this._graphics._dirty&&this._setCacheDirty(),e.prototype._draw.call(this,t)},n._render=function(t){this._graphics&&this._graphics._draw(t)},n._measureBounds=function(){var t=this._graphics;return t?t._measureBounds():e.prototype._measureBounds.call(this)},i}(t.DisplayObject);t.Shape=e,e.prototype.__class__="egret.Shape"}(egret||(egret={})),function(t){var e=function(e){function i(){e.call(this),this._graphics=null}__extends(i,e);var n=i.prototype;return Object.defineProperty(n,"graphics",{get:function(){return this._graphics||(this._graphics=new t.Graphics,this.needDraw=!0),this._graphics},enumerable:!0,configurable:!0}),n._draw=function(t){this._graphics&&this._graphics._dirty&&this._setCacheDirty(),e.prototype._draw.call(this,t)},n._render=function(t){this._graphics&&this._graphics._draw(t),e.prototype._render.call(this,t)},n._measureBounds=function(){for(var e=0,i=0,n=0,r=0,s=this._children.length,a=0;a<s;a++){if((u=this._children[a]).visible){var o=(c=u.getBounds(t.Rectangle.identity,!1)).x,h=c.y,l=c.width,c=c.height,u=u._getMatrix();o=(u=t.DisplayObject.getTransformBounds(t.Rectangle.identity.initialize(o,h,l,c),u)).x,h=u.y;(o<e||0==a)&&(e=o),((l=u.width+u.x)>i||0==a)&&(i=l),(h<n||0==a)&&(n=h),((u=u.height+u.y)>r||0==a)&&(r=u)}}return this._graphics&&(o=(s=this._graphics._measureBounds()).x,h=s.y,(o<e||0==a)&&(e=o),((l=s.width+s.x)>i||0==a)&&(i=l),(h<n||0==a)&&(n=h),((u=s.height+s.y)>r||0==a)&&(r=u)),t.Rectangle.identity.initialize(e,n,i-e,r-n)},n.hitTest=function(i,n,r){void 0===r&&(r=!1);var s=e.prototype.hitTest.call(this,i,n,r);return s||(this._graphics?t.DisplayObject.prototype.hitTest.call(this,i,n,r):null)},i}(t.DisplayObjectContainer);t.Sprite=e,e.prototype.__class__="egret.Sprite"}(egret||(egret={})),function(t){var e=function(){function e(){}return e._getStartLine=function(t){var i=e._getTextHeight(t),n=0;return t._DO_Props_._hasHeightSet&&(!(i<t._DO_Props_._explicitHeight)&&i>t._DO_Props_._explicitHeight&&(n=Math.max(t._TF_Props_._scrollV-1,0),n=Math.min(t._TF_Props_._numLines-1,n)),t._TF_Props_._multiline||(n=Math.max(t._TF_Props_._scrollV-1,0),n=Math.min(t._TF_Props_._numLines-1,n))),n},e._getHalign=function(e){var i=e._getLinesArr(),n=0;return e._TF_Props_._textAlign==t.HorizontalAlign.CENTER?n=.5:e._TF_Props_._textAlign==t.HorizontalAlign.RIGHT&&(n=1),e._TF_Props_._type==t.TextFieldType.INPUT&&!e._TF_Props_._multiline&&1<i.length&&(n=0),n},e._getTextHeight=function(e){return t.TextFieldType.INPUT!=e._TF_Props_._type||e._TF_Props_._multiline?e._TF_Props_._textMaxHeight+(e._TF_Props_._numLines-1)*e._TF_Props_._lineSpacing:e._TF_Props_._size},e._getValign=function(i){var n=e._getTextHeight(i);return i._TF_Props_._type==t.TextFieldType.INPUT?i._TF_Props_._multiline?0:.5:i._DO_Props_._hasHeightSet&&n<i._DO_Props_._explicitHeight?(n=0,i._TF_Props_._verticalAlign==t.VerticalAlign.MIDDLE?n=.5:i._TF_Props_._verticalAlign==t.VerticalAlign.BOTTOM&&(n=1),n):0},e._getTextElement=function(t,i,n){return i=e._getHit(t,i,n),t=t._getLinesArr(),i&&t[i.lineIndex]&&t[i.lineIndex].elements[i.textElementIndex]?t[i.lineIndex].elements[i.textElementIndex]:null},e._getHit=function(t,i,n){var r=t._getLinesArr();if(0==t._TF_Props_._textMaxWidth)return null;var s=0,a=e._getTextHeight(t),o=0;for(t._DO_Props_._hasHeightSet&&t._DO_Props_._explicitHeight>a&&(0!=(o=e._getValign(t)*(t._DO_Props_._explicitHeight-a))&&(n-=o)),o=0,a=e._getStartLine(t);a<r.length;a++){var h=r[a];if(o+h.height>=n){s=a+1;break}if((o+=h.height)+t._TF_Props_._lineSpacing>n)return null;o+=t._TF_Props_._lineSpacing}if(0===s)return null;for(t=r[s-1],a=n=0;a<t.elements.length;a++){if(!(n+(r=t.elements[a]).width<i))return{lineIndex:s-1,textElementIndex:a};n+=r.width}return null},e._getScrollNum=function(t){var e=1;if(t._TF_Props_._multiline){var i=t.height,n=t.size;i-(n+(t=t.lineSpacing))*(e=Math.floor(i/(n+t)))>n/2&&e++}return e},e}();t.TextFieldUtils=e,e.prototype.__class__="egret.TextFieldUtils"}(egret||(egret={})),function(t){var e=function(){this._text=this._type="",this._displayAsPassword=!1,this._fontFamily=t.TextField.default_fontFamily,this._size=30,this._bold=this._italic=!1,this._textColorString="#FFFFFF",this._textColor=16777215,this._strokeColorString="#000000",this._stroke=this._strokeColor=0,this._border=!1,this._borderColor=0,this._background=!1,this._backgroundColor=16777215,this._textAlign="left",this._verticalAlign="top",this._maxChars=this._textMaxHeight=this._textMaxWidth=0,this._scrollV=-1,this._numLines=this._lineSpacing=0,this._wordWrap=this._multiline=!1};t.TextFieldProperties=e,e.prototype.__class__="egret.TextFieldProperties"}(egret||(egret={})),function(t){var e=function(e){function i(){e.call(this),this._inputEnabled=!1,this._bgGraphics=this._inputUtils=null,this._isFlow=!1,this._textArr=[],this._isArrayChanged=!1,this._linesArr=[],this._isTyping=!1,this.needDraw=!0,this._TF_Props_=new t.TextFieldProperties}__extends(i,e);var n=i.prototype;return n.isInput=function(){return this._TF_Props_._type==t.TextFieldType.INPUT},n._setTouchEnabled=function(t){e.prototype._setTouchEnabled.call(this,t),this.isInput()&&(this._inputEnabled=!0)},Object.defineProperty(n,"type",{get:function(){return this._TF_Props_._type},set:function(t){this._setType(t)},enumerable:!0,configurable:!0}),n._setType=function(e){var i=this._TF_Props_;i._type!=e&&(i._type=e,i._type==t.TextFieldType.INPUT?(this._DO_Props_._hasWidthSet||this._setWidth(100),this._DO_Props_._hasHeightSet||this._setHeight(30),null==this._inputUtils&&(this._inputUtils=new t.InputController),this._inputUtils.init(this),this._setDirty(),this._DO_Props_._stage&&this._inputUtils._addStageText()):this._inputUtils&&(this._inputUtils._removeStageText(),this._inputUtils=null))},Object.defineProperty(n,"text",{get:function(){return this._getText()},set:function(t){this._setText(t)},enumerable:!0,configurable:!0}),n._getText=function(){return this._TF_Props_._type==t.TextFieldType.INPUT?this._inputUtils._getText():this._TF_Props_._text},n._setSizeDirty=function(){e.prototype._setSizeDirty.call(this),this._isArrayChanged=!0},n._setTextDirty=function(){this._setSizeDirty()},n._setBaseText=function(t){null==t&&(t="");var e=this._TF_Props_;this._isFlow=!1,e._text!=t&&(this._setTextDirty(),e._text=t,t="",t=e._displayAsPassword?this.changeToPassText(e._text):e._text,this.setMiddleStyle([{text:t}]))},n._setText=function(t){null==t&&(t=""),this._setBaseText(t),this._inputUtils&&this._inputUtils._setText(this._TF_Props_._text)},Object.defineProperty(n,"displayAsPassword",{get:function(){return this._TF_Props_._displayAsPassword},set:function(t){this._setDisplayAsPassword(t)},enumerable:!0,configurable:!0}),n._setDisplayAsPassword=function(t){var e=this._TF_Props_;e._displayAsPassword!=t&&(e._displayAsPassword=t,this._setTextDirty(),t="",t=e._displayAsPassword?this.changeToPassText(e._text):e._text,this.setMiddleStyle([{text:t}]))},Object.defineProperty(n,"fontFamily",{get:function(){return this._TF_Props_._fontFamily},set:function(t){this._setFontFamily(t)},enumerable:!0,configurable:!0}),n._setFontFamily=function(t){this._TF_Props_._fontFamily!=t&&(this._setTextDirty(),this._TF_Props_._fontFamily=t)},Object.defineProperty(n,"size",{get:function(){return this._TF_Props_._size},set:function(t){this._setSize(t)},enumerable:!0,configurable:!0}),n._setSize=function(t){this._TF_Props_._size!=t&&(this._setTextDirty(),this._TF_Props_._size=t)},Object.defineProperty(n,"italic",{get:function(){return this._TF_Props_._italic},set:function(t){this._setItalic(t)},enumerable:!0,configurable:!0}),n._setItalic=function(t){this._TF_Props_._italic!=t&&(this._setTextDirty(),this._TF_Props_._italic=t)},Object.defineProperty(n,"bold",{get:function(){return this._TF_Props_._bold},set:function(t){this._setBold(t)},enumerable:!0,configurable:!0}),n._setBold=function(t){this._TF_Props_._bold!=t&&(this._setTextDirty(),this._TF_Props_._bold=t)},Object.defineProperty(n,"textColor",{get:function(){return this._TF_Props_._textColor},set:function(t){this._setTextColor(t)},enumerable:!0,configurable:!0}),n._setTextColor=function(e){this._TF_Props_._textColor!=e&&(this._setTextDirty(),this._TF_Props_._textColor=e,this._TF_Props_._textColorString=t.toColorString(e))},Object.defineProperty(n,"strokeColor",{get:function(){return this._TF_Props_._strokeColor},set:function(t){this._setStrokeColor(t)},enumerable:!0,configurable:!0}),n._setStrokeColor=function(e){this._TF_Props_._strokeColor!=e&&(this._setTextDirty(),this._TF_Props_._strokeColor=e,this._TF_Props_._strokeColorString=t.toColorString(e))},Object.defineProperty(n,"stroke",{get:function(){return this._TF_Props_._stroke},set:function(t){this._setStroke(t)},enumerable:!0,configurable:!0}),n._setStroke=function(t){this._TF_Props_._stroke!=t&&(this._setTextDirty(),this._TF_Props_._stroke=t)},Object.defineProperty(n,"textAlign",{get:function(){return this._TF_Props_._textAlign},set:function(t){this._setTextAlign(t)},enumerable:!0,configurable:!0}),n._setTextAlign=function(t){this._TF_Props_._textAlign!=t&&(this._setTextDirty(),this._TF_Props_._textAlign=t)},Object.defineProperty(n,"verticalAlign",{get:function(){return this._TF_Props_._verticalAlign},set:function(t){this._setVerticalAlign(t)},enumerable:!0,configurable:!0}),n._setVerticalAlign=function(t){this._TF_Props_._verticalAlign!=t&&(this._setTextDirty(),this._TF_Props_._verticalAlign=t)},Object.defineProperty(n,"maxChars",{get:function(){return this._TF_Props_._maxChars},set:function(t){this._setMaxChars(t)},enumerable:!0,configurable:!0}),n._setMaxChars=function(t){this._TF_Props_._maxChars!=t&&(this._TF_Props_._maxChars=t)},Object.defineProperty(n,"scrollV",{get:function(){return Math.min(Math.max(this._TF_Props_._scrollV,1),this.maxScrollV)},set:function(t){this._TF_Props_._scrollV=Math.max(t,1),this._setDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(n,"maxScrollV",{get:function(){return this._getLinesArr(),Math.max(this._TF_Props_._numLines-t.TextFieldUtils._getScrollNum(this)+1,1)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"selectionBeginIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n,"selectionEndIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n,"caretIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),n._setSelection=function(t,e){},Object.defineProperty(n,"lineSpacing",{get:function(){return this._TF_Props_._lineSpacing},set:function(t){this._setLineSpacing(t)},enumerable:!0,configurable:!0}),n._setLineSpacing=function(t){this._TF_Props_._lineSpacing!=t&&(this._setTextDirty(),this._TF_Props_._lineSpacing=t)},n._getLineHeight=function(){return this._TF_Props_._lineSpacing+this._TF_Props_._size},Object.defineProperty(n,"numLines",{get:function(){return this._TF_Props_._numLines},enumerable:!0,configurable:!0}),Object.defineProperty(n,"multiline",{get:function(){return this._TF_Props_._multiline},set:function(t){this._setMultiline(t)},enumerable:!0,configurable:!0}),n._setMultiline=function(t){this._TF_Props_._multiline=t,this._setDirty()},n._setWidth=function(t){e.prototype._setWidth.call(this,t),this.fillBackground()},n._setHeight=function(t){e.prototype._setHeight.call(this,t),this.fillBackground()},Object.defineProperty(n,"border",{get:function(){return this._TF_Props_._border},set:function(t){this._TF_Props_._border=t,this.fillBackground()},enumerable:!0,configurable:!0}),Object.defineProperty(n,"borderColor",{get:function(){return this._TF_Props_._borderColor},set:function(t){this._TF_Props_._borderColor=t,this.fillBackground()},enumerable:!0,configurable:!0}),Object.defineProperty(n,"background",{get:function(){return this._TF_Props_._background},set:function(t){this._TF_Props_._background=t,this.fillBackground()},enumerable:!0,configurable:!0}),Object.defineProperty(n,"backgroundColor",{get:function(){return this._TF_Props_._backgroundColor},set:function(t){this._TF_Props_._backgroundColor=t,this.fillBackground()},enumerable:!0,configurable:!0}),n.fillBackground=function(){var e=this._bgGraphics,i=this._TF_Props_;e&&e.clear(),(i._background||i._border)&&(null==e&&(e=this._bgGraphics=new t.Graphics),i._background&&e.beginFill(i._backgroundColor,1),i._border&&e.lineStyle(1,i._borderColor),e.drawRect(0,0,this._getWidth(),this._getHeight()),e.endFill())},n.setFocus=function(){t.$warn(1013)},n._onRemoveFromStage=function(){e.prototype._onRemoveFromStage.call(this),this._removeEvent(),this._TF_Props_._type==t.TextFieldType.INPUT&&this._inputUtils._removeStageText()},n._onAddToStage=function(){e.prototype._onAddToStage.call(this),this._addEvent(),this._TF_Props_._type==t.TextFieldType.INPUT&&this._inputUtils._addStageText()},n._updateBaseTransform=function(){this._getLinesArr(),0==this._TF_Props_._textMaxWidth&&this._TF_Props_._type!=t.TextFieldType.INPUT||e.prototype._updateTransform.call(this)},n._updateTransform=function(){this._TF_Props_._type==t.TextFieldType.INPUT?this._DO_Props_._normalDirty?this._inputUtils._updateProperties():this._inputUtils._updateTransform():this._updateBaseTransform()},n._draw=function(i){var n=this._TF_Props_;if(n._type==t.TextFieldType.INPUT){if(this._isTyping)return}else if(0==n._textMaxWidth)return;e.prototype._draw.call(this,i)},n._render=function(t){this._bgGraphics&&this._bgGraphics._draw(t),this.drawText(t),this._clearDirty()},n._measureBounds=function(){var e=this._TF_Props_;return this._getLinesArr(),0==e._textMaxWidth?t.Rectangle.identity.initialize(0,0,0,0):t.Rectangle.identity.initialize(0,0,e._textMaxWidth,t.TextFieldUtils._getTextHeight(this))},Object.defineProperty(n,"textFlow",{get:function(){return this._textArr},set:function(t){var e=this._TF_Props_;this._isFlow=!0;var i="";null==t&&(t=[]);for(var n=0;n<t.length;n++)i+=t[n].text;e._displayAsPassword?this._setBaseText(i):(e._text=i,this.setMiddleStyle(t))},enumerable:!0,configurable:!0}),n.changeToPassText=function(t){if(this._TF_Props_._displayAsPassword){for(var e="",i=0,n=t.length;i<n;i++)switch(t.charAt(i)){case"\n":e+="\n";break;case"\r":break;default:e+="*"}return e}return t},n.setMiddleStyle=function(t){this._isArrayChanged=!0,this._textArr=t,this._setSizeDirty()},Object.defineProperty(n,"textWidth",{get:function(){return this._TF_Props_._textMaxWidth},enumerable:!0,configurable:!0}),Object.defineProperty(n,"textHeight",{get:function(){return t.TextFieldUtils._getTextHeight(this)},enumerable:!0,configurable:!0}),n.appendText=function(t){this.appendElement({text:t})},n.appendElement=function(t){var e=this._TF_Props_,i=e._text+t.text;e._displayAsPassword?this._setBaseText(i):(e._text=i,this._textArr.push(t),this.setMiddleStyle(this._textArr))},n._getLinesArr=function(){var e=this._TF_Props_;if(!this._isArrayChanged)return this._linesArr;this._isArrayChanged=!1;var i=this._textArr,n=t.MainContext.instance.rendererContext;if(this._linesArr.length=0,e._textMaxHeight=0,e._textMaxWidth=0,this._DO_Props_._hasWidthSet&&0==this._DO_Props_._explicitWidth)return e._numLines=0,[{width:0,height:0,charNum:0,elements:[],hasNextLine:!1}];this._isFlow||n.setupFont(this);for(var r,s=this._linesArr,a=0,o=0,h=0,l=0,c=0,u=i.length;c<u;c++){var _=i[c];_.style=_.style||{};for(var d=_.text.toString().split(/(?:\r\n|\r|\n)/),g=0,f=d.length;g<f;g++){null==s[l]&&(r={width:0,height:0,elements:[],charNum:0,hasNextLine:!1},s[l]=r,o=h=a=0);h=e._type==t.TextFieldType.INPUT?e._size:Math.max(h,_.style.size||e._size);var p=!0;if(""==d[g])g==f-1&&(p=!1);else{this._isFlow&&n.setupFont(this,_.style);var m=n.measureText(d[g]);if(this._DO_Props_._hasWidthSet)if(a+m<=this._DO_Props_._explicitWidth)r.elements.push({width:m,text:d[g],style:_.style}),a+=m,o+=d[g].length,g==f-1&&(p=!1);else{for(var v=0,y=0,T=d[g],x=this._TF_Props_._wordWrap?T.split(/\b/):T.match(/./g),b=x.length,E=0;v<b&&(m=n.measureText(x[v]),!(0!=a&&a+m>this._DO_Props_._explicitWidth&&0!=a+v));v++)y+=m,a+=m,o+=E+=x[v].length;if(0<v){for(r.elements.push({width:y,text:T.substring(0,E),style:_.style}),v=0,y=(m=T.substring(E)).length;v<y&&" "==m.charAt(v);v++);d[g]=m.substring(v)}""!=d[g]&&(g--,p=!1)}else a+=m,o+=d[g].length,r.elements.push({width:m,text:d[g],style:_.style}),g==f-1&&(p=!1)}p&&(o++,r.hasNextLine=!0),g<d.length-1&&(r.width=a,r.height=h,r.charNum=o,e._textMaxWidth=Math.max(e._textMaxWidth,a),e._textMaxHeight+=h,l++)}c==i.length-1&&r&&(r.width=a,r.height=h,r.charNum=o,e._textMaxWidth=Math.max(e._textMaxWidth,a),e._textMaxHeight+=h)}return e._numLines=s.length,s},Object.defineProperty(n,"wordWrap",{get:function(){return this._TF_Props_._wordWrap},set:function(t){this._TF_Props_._wordWrap=t},enumerable:!0,configurable:!0}),n.drawText=function(e){var i=this._TF_Props_,n=this._getLinesArr();if(0!=i._textMaxWidth){var r=this._DO_Props_._hasWidthSet?this._DO_Props_._explicitWidth:i._textMaxWidth,s=t.TextFieldUtils._getTextHeight(this),a=0,o=t.TextFieldUtils._getStartLine(this);if(this._DO_Props_._hasHeightSet&&this._DO_Props_._explicitHeight>s)a=a+(h=t.TextFieldUtils._getValign(this))*(this._DO_Props_._explicitHeight-s);a=Math.round(a),s=t.TextFieldUtils._getHalign(this);for(var h=0,l=o,c=i._numLines;l<c;l++){var u=n[l],_=u.height;a=a+_/2;if(l!=o){if(i._type==t.TextFieldType.INPUT&&!i._multiline)break;if(this._DO_Props_._hasHeightSet&&a>this._DO_Props_._explicitHeight)break}h=Math.round((r-u.width)*s);for(var d=0,g=u.elements.length;d<g;d++){var f=u.elements[d];e.drawText(this,f.text,h,a+(_-(f.style.size||i._size))/2,f.width,f.style),h+=f.width}a+=_/2+i._lineSpacing}}},n._addEvent=function(){this.addEventListener(t.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},n._removeEvent=function(){this.removeEventListener(t.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},n.onTapHandler=function(e){if(this._TF_Props_._type!=t.TextFieldType.INPUT&&(null!=(e=t.TextFieldUtils._getTextElement(this,e.localX,e.localY))&&(e=e.style)&&e.href&&e.href.match(/^event:/))){var i=e.href.match(/^event:/)[0];t.TextEvent.dispatchTextEvent(this,t.TextEvent.LINK,e.href.substring(i.length))}},i.default_fontFamily="Arial",i}(t.DisplayObject);t.TextField=e,e.prototype.__class__="egret.TextField"}(egret||(egret={})),function(t){var e=function(){function t(){this._replaceArr=[],this.resutlArr=[],this.initReplaceArr()}var e=t.prototype;return e.initReplaceArr=function(){this._replaceArr=[],this._replaceArr.push([/&lt;/g,"<"]),this._replaceArr.push([/&gt;/g,">"]),this._replaceArr.push([/&amp;/g,"&"]),this._replaceArr.push([/&quot;/g,'"']),this._replaceArr.push([/&apos;/g,"'"])},e.replaceSpecial=function(t){for(var e=0;e<this._replaceArr.length;e++)t=t.replace(this._replaceArr[e][0],this._replaceArr[e][1]);return t},e.parser=function(t){this.stackArray=[],this.resutlArr=[];for(var e=0,i=t.length;e<i;){var n=t.indexOf("<",e);0>n?(this.addToResultArr(t.substring(e)),e=i):(this.addToResultArr(t.substring(e,n)),e=t.indexOf(">",n),"/"==t.charAt(n+1)?this.stackArray.pop():this.addToArray(t.substring(n+1,e)),e+=1)}return this.resutlArr},e.addToResultArr=function(t){""!=t&&(t=this.replaceSpecial(t),0<this.stackArray.length?this.resutlArr.push({text:t,style:this.stackArray[this.stackArray.length-1]}):this.resutlArr.push({text:t}))},e.changeStringToObject=function(t){var e={},i=[];if("i"==(t=t.trim()).charAt(0)||"b"==t.charAt(0))this.addProperty(e,t,"true");else if(i=t.match(/^(font|a)\s/))for(t=t.substring(i[0].length).trim(),i=0;i=t.match(this.getHeadReg());){var n=i[0],r="";'"'==(t=t.substring(n.length).trim()).charAt(0)?(i=t.indexOf('"',1),r=t.substring(1,i),i+=1):"'"==t.charAt(0)?(i=t.indexOf("'",1),r=t.substring(1,i),i+=1):i=(r=t.match(/(\S)+/)[0]).length,this.addProperty(e,n.substring(0,n.length-1).trim(),r.trim()),t=t.substring(i).trim()}return e},e.getHeadReg=function(){return/^(color|textcolor|strokecolor|stroke|b|bold|i|italic|size|fontfamily|href)(\s)*=/},e.addProperty=function(t,e,i){switch(e.toLowerCase()){case"color":case"textcolor":i=i.replace(/#/,"0x"),t.textColor=parseInt(i);break;case"strokecolor":i=i.replace(/#/,"0x"),t.strokeColor=parseInt(i);break;case"stroke":t.stroke=parseInt(i);break;case"b":case"bold":t.bold="true"==i;break;case"i":case"italic":t.italic="true"==i;break;case"size":t.size=parseInt(i);break;case"fontfamily":t.fontFamily=i;break;case"href":t.href=this.replaceSpecial(i)}},e.addToArray=function(t){if(t=this.changeStringToObject(t),0!=this.stackArray.length){var e,i=this.stackArray[this.stackArray.length-1];for(e in i)null==t[e]&&(t[e]=i[e])}this.stackArray.push(t)},t}();t.HtmlTextParser=e,e.prototype.__class__="egret.HtmlTextParser"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.DYNAMIC="dynamic",t.INPUT="input",t}();t.TextFieldType=e,e.prototype.__class__="egret.TextFieldType"}(egret||(egret={})),function(t){var e=function(e){function i(t){e.call(this),this._bitmapY=this._bitmapX=this._sourceHeight=this._sourceWidth=0,this._textureMap={},this.texture=t,this._sourceWidth=t._sourceWidth,this._sourceHeight=t._sourceHeight,this._bitmapX=t._bitmapX-t._offsetX,this._bitmapY=t._bitmapY-t._offsetY}__extends(i,e);var n=i.prototype;return n.getTexture=function(t){return this._textureMap[t]},n.createTexture=function(e,i,n,r,s,a,o,h,l){void 0===a&&(a=0),void 0===o&&(o=0),void 0===h&&(h=a+r),void 0===l&&(l=o+s);var c=this.texture._clone(),u=t.MainContext.instance.rendererContext._texture_scale_factor;return c._bitmapX=this._bitmapX+i,c._bitmapY=this._bitmapY+n,c._bitmapWidth=r*u,c._bitmapHeight=s*u,c._offsetX=a,c._offsetY=o,c._textureWidth=h*u,c._textureHeight=l*u,c._sourceWidth=this._sourceWidth,c._sourceHeight=this._sourceHeight,this._textureMap[e]=c},n.dispose=function(){this.texture&&this.texture.dispose()},i}(t.HashObject);t.SpriteSheet=e,e.prototype.__class__="egret.SpriteSheet"}(egret||(egret={})),function(t){var e=function(e){function i(){e.call(this),this._text=null,this._isFocus=!1}__extends(i,e);var n=i.prototype;return n.init=function(e){this._text=e,this.stageText=t.StageText.create(),this.stageText._setTextField(this._text)},n._addStageText=function(){this._text._inputEnabled||(this._text._DO_Props_._touchEnabled=!0),this.stageText._add(),this.stageText._addListeners(),this.stageText.addEventListener("updateText",this.updateTextHandler,this),this._text.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,this),t.MainContext.instance.stage.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this.stageText.addEventListener("blur",this.blurHandler,this),this.stageText.addEventListener("focus",this.focusHandler,this)},n._removeStageText=function(){this._text._inputEnabled||(this._text._DO_Props_._touchEnabled=!1),this.stageText._remove(),this.stageText._removeListeners(),this.stageText._removeInput(),this.stageText.removeEventListener("updateText",this.updateTextHandler,this),this._text.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,this),t.MainContext.instance.stage.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this.stageText.removeEventListener("blur",this.blurHandler,this),this.stageText.removeEventListener("focus",this.focusHandler,this)},n._getText=function(){return this.stageText._getText()},n._setText=function(t){this.stageText._setText(t)},n.focusHandler=function(e){this._isFocus=!0,this._text._isTyping=!0,this._text.dispatchEvent(new t.FocusEvent(t.FocusEvent.FOCUS_IN))},n.blurHandler=function(e){this._isFocus=!1,this._text._isTyping=!1,this._text.dispatchEvent(new t.FocusEvent(t.FocusEvent.FOCUS_OUT))},n.onMouseDownHandler=function(t){t.stopPropagation(),this._text._DO_Props_._visible&&!this._isFocus&&(this._isFocus=!0,this.stageText._show(this._text._TF_Props_._multiline,this._text.size,this._text.width,this._text.height),t=this._text.localToGlobal(),this.stageText._initElement(t.x,t.y,this._text._worldTransform.a,this._text._worldTransform.d))},n.onStageDownHandler=function(t){this.stageText._hide()},n.updateTextHandler=function(e){this.resetText(),this._text.dispatchEvent(new t.Event(t.Event.CHANGE))},n.resetText=function(){this._text._setBaseText(this.stageText._getText())},n._hideInput=function(){this.stageText._removeInput()},n._updateTransform=function(){this._text._updateBaseTransform(),!this._text._DO_Props_._visible&&this.stageText&&this._hideInput()},n._updateProperties=function(){if(!this._isFocus){var t=this._text._DO_Props_._stage;if(null==t)this.stageText._setVisible(!1);else{for(var e=this._text,i=e._DO_Props_._visible;i&&(e=e.parent)!=t;)i=e._DO_Props_._visible;this.stageText._setVisible(i)}this.stageText._setMultiline(this._text._TF_Props_._multiline),this.stageText._setTextType(this._text._TF_Props_._displayAsPassword?"password":"text"),this.stageText._setText(this._text._TF_Props_._text),this.stageText._resetStageText()}this._updateTransform()},i}(t.HashObject);t.InputController=e,e.prototype.__class__="egret.InputController"}(egret||(egret={})),function(t){var e=function(t){function e(e,i){t.call(this,e),this.firstCharHeight=0,"string"==typeof i?this.charList=this.parseConfig(i):i&&i.hasOwnProperty("frames")?this.charList=i.frames:this.charList={}}__extends(e,t);var i=e.prototype;return i.getTexture=function(t){var e=this._textureMap[t];if(!e){if(!(e=this.charList[t]))return null;e=this.createTexture(t,e.x,e.y,e.w,e.h,e.offX,e.offY,e.sourceW,e.sourceH),this._textureMap[t]=e}return e},i._getFirstCharHeight=function(){if(0==this.firstCharHeight)for(var t in this.charList){var e=this.charList[t];if(e){var i=e.sourceH;if(void 0===i&&(void 0===(i=e.h)&&(i=0),void 0===(e=e.offY)&&(e=0),i+=e),!(0>=i)){this.firstCharHeight=i;break}}}return this.firstCharHeight},i.parseConfig=function(t){t=(t=t.split("\r\n").join("\n")).split("\n");for(var e=this.getConfigByKey(t[3],"count"),i={},n=4;n<4+e;n++){var r=t[n],s={};i[String.fromCharCode(this.getConfigByKey(r,"id"))]=s,s.x=this.getConfigByKey(r,"x"),s.y=this.getConfigByKey(r,"y"),s.w=this.getConfigByKey(r,"width"),s.h=this.getConfigByKey(r,"height"),s.offX=this.getConfigByKey(r,"xoffset"),s.offY=this.getConfigByKey(r,"yoffset")}return i},i.getConfigByKey=function(t,e){for(var i=t.split(" "),n=0,r=i.length;n<r;n++){var s=i[n];if(e==s.substring(0,e.length))return i=s.substring(e.length+1),parseInt(i)}return 0},e}(t.SpriteSheet);t.BitmapFont=e,e.prototype.__class__="egret.BitmapFont"}(egret||(egret={})),function(t){var e=function(e){function i(t){e.call(this),this._isAddedToStage=!1,this._frames=this._movieClipData=this._textureToRender=null,this._totalFrames=0,this._frameLabels=null,this._frameIntervalTime=0,this._eventPool=null,this._isPlaying=!1,this._isStopped=!0,this._passedTime=this._displayedKeyFrameNum=this._nextFrameNum=this._currentFrameNum=this._playTimes=0,this._setMovieClipData(t),this.needDraw=!0}__extends(i,e);var n=i.prototype;return n._init=function(){this._reset();var t=this._movieClipData;t&&t._isDataValid()&&(this._frames=t.frames,this._totalFrames=t.numFrames,this._frameLabels=t.labels,this._frameIntervalTime=1e3/t.frameRate,this._initFrame())},n._reset=function(){this._frames=null,this._playTimes=0,this._isPlaying=!1,this.setIsStopped(!0),this._currentFrameNum=0,this._nextFrameNum=1,this._passedTime=this._displayedKeyFrameNum=0,this._eventPool=[]},n._initFrame=function(){this._movieClipData._isTextureValid()&&(this._advanceFrame(),this._constructFrame())},n._render=function(t){var e=this._textureToRender;if(this._texture_to_render=e){var n=Math.round(e._offsetX),r=Math.round(e._offsetY),s=e._bitmapWidth||e._textureWidth,a=e._bitmapHeight||e._textureHeight,o=Math.round(s),h=Math.round(a);i.renderFilter.drawImage(t,this,e._bitmapX,e._bitmapY,s,a,n,r,o,h)}},n._measureBounds=function(){var i=this._textureToRender;return i?t.Rectangle.identity.initialize(i._offsetX,i._offsetY,i._textureWidth,i._textureHeight):e.prototype._measureBounds.call(this)},n._onAddToStage=function(){e.prototype._onAddToStage.call(this),this._isAddedToStage=!0,this._isPlaying&&1<this._totalFrames&&this.setIsStopped(!1)},n._onRemoveFromStage=function(){e.prototype._onRemoveFromStage.call(this),this._isAddedToStage=!1,this.setIsStopped(!0)},n._getFrameLabelByName=function(t,e){void 0===e&&(e=!1),e&&(t=t.toLowerCase());var i=this._frameLabels;if(i)for(var n=null,r=0;r<i.length;r++)if(n=i[r],e?n.name.toLowerCase()===t:n.name===t)return n;return null},n._getFrameLabelByFrame=function(t){var e=this._frameLabels;if(e)for(var i=null,n=0;n<e.length;n++)if((i=e[n]).frame===t)return i;return null},n._getFrameLabelForFrame=function(t){var e=null,i=null,n=this._frameLabels;if(n)for(var r=0;r<n.length&&!((i=n[r]).frame>t);r++)e=i;return e},n.play=function(t){void 0===t&&(t=0),this._isPlaying=!0,this.setPlayTimes(t),1<this._totalFrames&&this._isAddedToStage&&this.setIsStopped(!1)},n.stop=function(){this._isPlaying=!1,this.setIsStopped(!0)},n.prevFrame=function(){this.gotoAndStop(this._currentFrameNum-1)},n.nextFrame=function(){this.gotoAndStop(this._currentFrameNum+1)},n.gotoAndPlay=function(e,i){void 0===i&&(i=0),(0===arguments.length||2<arguments.length)&&t.$error(1022,"MovieClip.gotoAndPlay()"),this.play(i),this._gotoFrame(e)},n.gotoAndStop=function(e){1!=arguments.length&&t.$error(1022,"MovieClip.gotoAndStop()"),this.stop(),this._gotoFrame(e)},n._gotoFrame=function(e){var i;"string"==typeof e?i=this._getFrameLabelByName(e).frame:(i=parseInt(e+"",10))!=e&&t.$error(1022,"Frame Label Not Found"),1>i?i=1:i>this._totalFrames&&(i=this._totalFrames),i!==this._nextFrameNum&&(this._nextFrameNum=i,this._advanceFrame(),this._constructFrame(),this._handlePendingEvent())},n._advanceTime=function(e){var i=this._frameIntervalTime;if(e=this._passedTime+e,this._passedTime=e%i,!(1>(i=e/i))){for(;1<=i;){if(i--,this._nextFrameNum++,this._nextFrameNum>this._totalFrames)if(-1==this._playTimes)this._eventPool.push(t.Event.LOOP_COMPLETE),this._nextFrameNum=1;else{if(this._playTimes--,!(0<this._playTimes)){this._nextFrameNum=this._totalFrames,this._eventPool.push(t.Event.COMPLETE),this.stop();break}this._eventPool.push(t.Event.LOOP_COMPLETE),this._nextFrameNum=1}this._advanceFrame()}this._constructFrame(),this._handlePendingEvent(),this._setDirty()}},n._advanceFrame=function(){this._currentFrameNum=this._nextFrameNum},n._constructFrame=function(){var t=this._currentFrameNum;this._displayedKeyFrameNum!=t&&(this._textureToRender=this._movieClipData.getTextureByFrame(t),this._DO_Props_._sizeDirty=!0,this._displayedKeyFrameNum=t)},n._handlePendingEvent=function(){if(0!=this._eventPool.length){this._eventPool.reverse();for(var e=this._eventPool,i=e.length,n=!1,r=!1,s=0;s<i;s++){var a=e.pop();a==t.Event.LOOP_COMPLETE?r=!0:a==t.Event.COMPLETE?n=!0:this.dispatchEventWith(a)}r&&this.dispatchEventWith(t.Event.LOOP_COMPLETE),n&&this.dispatchEventWith(t.Event.COMPLETE)}},Object.defineProperty(n,"totalFrames",{get:function(){return this._totalFrames},enumerable:!0,configurable:!0}),Object.defineProperty(n,"currentFrame",{get:function(){return this._currentFrameNum},enumerable:!0,configurable:!0}),Object.defineProperty(n,"currentFrameLabel",{get:function(){var t=this._getFrameLabelByFrame(this._currentFrameNum);return t&&t.name},enumerable:!0,configurable:!0}),Object.defineProperty(n,"currentLabel",{get:function(){var t=this._getFrameLabelForFrame(this._currentFrameNum);return t?t.name:null},enumerable:!0,configurable:!0}),Object.defineProperty(n,"frameRate",{get:function(){return this.movieClipData.frameRate},set:function(t){t!=this._movieClipData.frameRate&&(this._movieClipData.frameRate=t,this._frameIntervalTime=1e3/this._movieClipData.frameRate)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0}),Object.defineProperty(n,"movieClipData",{get:function(){return this._movieClipData},set:function(t){this._setMovieClipData(t)},enumerable:!0,configurable:!0}),n._setMovieClipData=function(t){this._movieClipData!=t&&(this._movieClipData=t,this._init())},n.setPlayTimes=function(t){(0>t||1<=t)&&(this._playTimes=0>t?-1:Math.floor(t))},n.setIsStopped=function(e){this._isStopped!=e&&((this._isStopped=e)?(this._playTimes=0,t.Ticker.getInstance().unregister(this._advanceTime,this)):(this._playTimes=0==this._playTimes?1:this._playTimes,t.Ticker.getInstance().register(this._advanceTime,this)))},i.renderFilter=t.RenderFilter.getInstance(),i}(t.DisplayObject);t.MovieClip=e,e.prototype.__class__="egret.MovieClip"}(egret||(egret={})),function(t){var e=function(t){function e(e,i){t.call(this),this._name=e,this._frame=0|i}__extends(e,t);var i=e.prototype;return Object.defineProperty(i,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(i,"frame",{get:function(){return this._frame},enumerable:!0,configurable:!0}),i.clone=function(){return new e(this._name,this._frame)},e}(t.EventDispatcher);t.FrameLabel=e,e.prototype.__class__="egret.FrameLabel"}(egret||(egret={})),function(t){var e=function(e){function i(){e.call(this),this._mcData=null,this.numFrames=1,this.frames=[],this.labels=null,this.frameRate=0,this.spriteSheet=this.textureData=null}__extends(i,e);var n=i.prototype;return n._init=function(t,e,i){this.textureData=e,this.spriteSheet=i,this._setMCData(t)},n.getKeyFrameData=function(t){return(t=this.frames[t-1]).frame&&(t=this.frames[t.frame-1]),t},n.getTextureByFrame=function(t){if((t=this.getKeyFrameData(t)).res){var e=this.getTextureByResName(t.res);return e._offsetX=0|t.x,e._offsetY=0|t.y,e}return null},n.getTextureByResName=function(t){var e=this.spriteSheet.getTexture(t);return e||(e=this.textureData[t],e=this.spriteSheet.createTexture(t,e.x,e.y,e.w,e.h)),e},n._isDataValid=function(){return 0<this.frames.length},n._isTextureValid=function(){return null!=this.textureData&&null!=this.spriteSheet},n._fillMCData=function(t){this.frameRate=t.frameRate||24,this._fillFramesData(t.frames),this._fillFrameLabelsData(t.labels)},n._fillFramesData=function(t){for(var e,i=this.frames,n=t?t.length:0,r=0;r<n;r++)if(e=t[r],i.push(e),e.duration){var s=parseInt(e.duration);if(1<s){e=i.length;for(var a=1;a<s;a++)i.push({frame:e})}}this.numFrames=i.length},n._fillFrameLabelsData=function(e){if(e){var i=e.length;if(0<i){this.labels=[];for(var n=0;n<i;n++){var r=e[n];this.labels.push(new t.FrameLabel(r.name,r.frame))}}}},Object.defineProperty(n,"mcData",{get:function(){return this._mcData},set:function(t){this._setMCData(t)},enumerable:!0,configurable:!0}),n._setMCData=function(t){this._mcData!=t&&(this._mcData=t)&&this._fillMCData(t)},i}(t.HashObject);t.MovieClipData=e,e.prototype.__class__="egret.MovieClipData"}(egret||(egret={})),function(t){var e=function(e){function i(t,i){e.call(this),this.enableCache=!0,this._mcDataCache={},this._mcDataSet=t,this.setTexture(i)}__extends(i,e);var n=i.prototype;return n.clearCache=function(){this._mcDataCache={}},n.generateMovieClipData=function(e){if(void 0===e&&(e=""),""==e&&this._mcDataSet)for(e in this._mcDataSet.mc)break;if(""==e)return null;var i=this._findFromCache(e,this._mcDataCache);return i||(i=new t.MovieClipData,this._fillData(e,i,this._mcDataCache)),i},n._findFromCache=function(t,e){return this.enableCache&&e[t]?e[t]:null},n._fillData=function(t,e,i){if(this._mcDataSet){var n=this._mcDataSet.mc[t];n&&(e._init(n,this._mcDataSet.res,this._spriteSheet),this.enableCache&&(i[t]=e))}},Object.defineProperty(n,"mcDataSet",{get:function(){return this._mcDataSet},set:function(t){this._mcDataSet=t},enumerable:!0,configurable:!0}),Object.defineProperty(n,"texture",{set:function(t){this.setTexture(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"spriteSheet",{get:function(){return this._spriteSheet},enumerable:!0,configurable:!0}),n.setTexture=function(e){this._spriteSheet=e?new t.SpriteSheet(e):null},i}(t.EventDispatcher);t.MovieClipDataFactory=e,e.prototype.__class__="egret.MovieClipDataFactory"}(egret||(egret={})),function(t){var e=function(t){function e(){t.call(this),this._scaleY=this._scaleX=1,this._size=30,this._color="#FFFFFF",this._fontFamily="Arial",this._italic=this._bold=!1,this._textAlign="left",this._verticalAlign="top",this._visible=!1,this._height=this._width=0,this._multiline=!1,this._maxChars=0}__extends(e,t);var i=e.prototype;return i._setTextField=function(t){this._textfield=t},i._getText=function(){return null},i._setText=function(t){},i._setTextType=function(t){},i._getTextType=function(){return null},i._show=function(t,e,i,n){},i._add=function(){},i._remove=function(){},i._hide=function(){},i._addListeners=function(){},i._removeListeners=function(){},i._setScale=function(t,e){this._scaleX=t,this._scaleY=e},i.changePosition=function(t,e){},i._setSize=function(t){this._size=t},i._setTextColor=function(t){this._color=t},i._setTextFontFamily=function(t){this._fontFamily=t},i._setBold=function(t){this._bold=t},i._setItalic=function(t){this._italic=t},i._setTextAlign=function(t){this._textAlign=t},i._setVerticalAlign=function(t){this._verticalAlign=t},i._setVisible=function(t){this._visible=t},i._setWidth=function(t){this._width=t},i._setHeight=function(t){this._height=t},i._setMultiline=function(t){this._multiline=t},i._setMaxChars=function(t){this._maxChars=t},i._resetStageText=function(){},i._initElement=function(t,e,i,n){},i._removeInput=function(){},e.create=function(){return null},e}(t.EventDispatcher);t.StageText=e,e.prototype.__class__="egret.StageText"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.GET="get",t.POST="post",t}();t.URLRequestMethod=e,e.prototype.__class__="egret.URLRequestMethod"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.BINARY="binary",t.TEXT="text",t.VARIABLES="variables",t.TEXTURE="texture",t.SOUND="sound",t}();t.URLLoaderDataFormat=e,e.prototype.__class__="egret.URLLoaderDataFormat"}(egret||(egret={})),function(t){var e=function(t){function e(e){void 0===e&&(e=null),t.call(this),this.variables=null,null!==e&&this.decode(e)}__extends(e,t);var i=e.prototype;return i.decode=function(t){this.variables||(this.variables={}),t=t.split("+").join(" ");for(var e,i=/[?&]?([^=]+)=([^&]*)/g;e=i.exec(t);){var n=decodeURIComponent(e[1]);if(e=decodeURIComponent(e[2]),0==n in this.variables)this.variables[n]=e;else{var r=this.variables[n];r instanceof Array?r.push(e):this.variables[n]=[r,e]}}},i.toString=function(){if(!this.variables)return"";var t,e=this.variables,i=[];for(t in e)i.push(this.encodeValue(t,e[t]));return i.join("&")},i.encodeValue=function(t,e){return e instanceof Array?this.encodeArray(t,e):encodeURIComponent(t)+"="+encodeURIComponent(e)},i.encodeArray=function(t,e){return t?0==e.length?encodeURIComponent(t)+"=":e.map((function(e){return encodeURIComponent(t)+"="+encodeURIComponent(e)})).join("&"):""},e}(t.HashObject);t.URLVariables=e,e.prototype.__class__="egret.URLVariables"}(egret||(egret={})),function(t){var e=function(t,e){this.value=this.name="",this.name=t,this.value=e};(egret||(egret={})).URLRequestHeader=e,e.prototype.__class__="egret.URLRequestHeader"}(),function(t){var e=function(e){function i(i){void 0===i&&(i=null),e.call(this),this.data=null,this.method=t.URLRequestMethod.GET,this.url="",this.url=i}return __extends(i,e),i}(t.HashObject);t.URLRequest=e,e.prototype.__class__="egret.URLRequest"}(egret||(egret={})),function(t){var e=function(e){function i(i){void 0===i&&(i=null),e.call(this),this.dataFormat=t.URLLoaderDataFormat.TEXT,this._request=this.data=null,this._status=-1,i&&this.load(i)}__extends(i,e);var n=i.prototype;return n.load=function(e){this._request=e,this.data=null,t.MainContext.instance.netContext.proceed(this)},n.__recycle=function(){this.data=this._request=null},i}(t.EventDispatcher);t.URLLoader=e,e.prototype.__class__="egret.URLLoader"}(egret||(egret={})),function(t){var e=function(e){function i(){e.call(this),this._sourceHeight=this._sourceWidth=this._textureHeight=this._textureWidth=this._offsetY=this._offsetX=this._bitmapHeight=this._bitmapWidth=this._bitmapY=this._bitmapX=0,this._bitmapData=null}__extends(i,e);var n=i.prototype;return Object.defineProperty(n,"textureWidth",{get:function(){return this._textureWidth},enumerable:!0,configurable:!0}),Object.defineProperty(n,"textureHeight",{get:function(){return this._textureHeight},enumerable:!0,configurable:!0}),n._setBitmapData=function(e){var i=t.MainContext.instance.rendererContext._texture_scale_factor;this._bitmapData=e,this._sourceWidth=e.width,this._sourceHeight=e.height,this._textureWidth=this._sourceWidth*i,this._textureHeight=this._sourceHeight*i,this._bitmapWidth=this._textureWidth,this._bitmapHeight=this._textureHeight,this._offsetX=this._offsetY=this._bitmapX=this._bitmapY=0},n.getPixel32=function(t,e){return this._bitmapData.getContext("2d").getImageData(t,e,1,1).data},n.dispose=function(){var t=this._bitmapData;t.dispose&&t.dispose()},n._clone=function(){var t=new i;return t._bitmapData=this._bitmapData,t},n.draw=function(t,e,i,n,r,s,a,o,h,l){},n._drawForCanvas=function(t,e,i,n,r,s,a,o,h,l){var c=this._bitmapData;c&&c.avaliable&&(null!=l?this._drawRepeatImageForCanvas(t,e,i,n,r,s,a,o,h,l):t.drawImage(c,e,i,n,r,s,a,o,h))},n._drawForNative=function(t,e,i,n,r,s,a,o,h,l){var c=this._bitmapData;c&&c.avaliable&&(void 0!==l?this._drawRepeatImageForNative(t,e,i,n,r,s,a,o,h,l):t.drawImage(c,e,i,n,r,s,a,o,h))},n._drawRepeatImageForNative=function(e,i,n,r,s,a,o,h,l,c){for(r*=c=t.MainContext.instance.rendererContext._texture_scale_factor,s*=c;a<h;a+=r)for(var u=o;u<l;u+=s){var _=Math.min(r,h-a),d=Math.min(s,l-u);this._drawForNative(e,i,n,_/c,d/c,a,u,_,d,void 0)}},n._drawRepeatImageForCanvas=function(e,i,n,r,s,a,o,h,l,c){if(void 0===this.pattern){var u=t.MainContext.instance.rendererContext._texture_scale_factor,_=this._bitmapData,d=_;_.width==r&&_.height==s&&1==u||((d=document.createElement("canvas")).width=r*u,d.height=s*u,d.getContext("2d").drawImage(_,i,n,r,s,0,0,r*u,s*u)),this.pattern=e.createPattern(d,c)}e.fillStyle=this.pattern,e.translate(a,o),e.fillRect(0,0,h,l),e.translate(-a,-o)},n._disposeForCanvas=function(){i.deleteWebGLTexture(this);var t=this._bitmapData;t.onload=null,t.onerror=null,t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAATSURBVHjaYvj//z8DAAAA//8DAAj8Av7TpXVhAAAAAElFTkSuQmCC",t.avaliable=!1},n._disposeForNative=function(){var t=this._bitmapData;t.dispose(),t.avaliable=!1},i.deleteWebGLTexture=function(t){if(t=t._bitmapData){var e=t.webGLTexture;if(e)for(var i in e){var n=e[i];n.glContext.deleteTexture(n)}t.webGLTexture=null}},i.createBitmapData=function(t,e){},i._createBitmapDataForCanvasAndWebGl=function(e,n){var r=i._bitmapDataFactory[e];if(r||((r=document.createElement("img")).setAttribute("bitmapSrc",e),i._bitmapDataFactory[e]=r),r.avaliable)n(0,r);else{r.crossOrigin=i.crossOrigin;var s=window.URL||window.webkitURL;if(null==i._bitmapCallbackMap[e])if(i._addToCallbackList(e,n),0!=e.indexOf("data:")&&0!=e.indexOf("http:")&&0!=e.indexOf("https:")&&t.Browser.getInstance().isIOS()&&7<=parseInt(t.Browser.getInstance().getIOSVersion().charAt(0))&&s){var a=new XMLHttpRequest;a.open("get",e,!0),a.responseType="blob",a.onload=function(){if(200==this.status){var t=this.response;r.onload=function(){s.revokeObjectURL(r.src),i._onLoad(e,r)},r.onerror=function(){i._onError(e,r)},r.src=s.createObjectURL(t)}else n(1,null)},a.send()}else r.onload=function(){i._onLoad(e,r)},r.onerror=function(){i._onError(e,r)},r.src=e;else i._addToCallbackList(e,n)}},i._onLoad=function(t,e){e.avaliable=!0,e.onload&&(e.onload=null),e.onerror&&(e.onerror=null);var n=i._bitmapCallbackMap[t];if(n&&n.length){delete i._bitmapCallbackMap[t];for(var r=n.length,s=0;s<r;s++)(0,n[s])(0,e)}},i._onError=function(t,e){var n=i._bitmapCallbackMap[t];if(n&&n.length){delete i._bitmapCallbackMap[t];for(var r=n.length,s=0;s<r;s++)(0,n[s])(1,e)}},i._createBitmapDataForNative=function(e,n){var r=i._bitmapDataFactory[e];r?(r.avaliable||(r.reload(),r.avaliable=!0),n(0,r)):t.NativeNetContext.__use_asyn?i._bitmapCallbackMap[e]?i._addToCallbackList(e,n):(i._addToCallbackList(e,n),(r=new t.PromiseObject).onSuccessFunc=function(t){i._bitmapDataFactory[e]=t,i._onLoad(e,t)},r.onErrorFunc=function(){i._onError(e,null)},egret_native.Texture.addTextureAsyn(e,r)):(r=egret_native.Texture.addTexture(e),i._bitmapDataFactory[e]=r,r.avaliable=!0,n(0,r))},i._addToCallbackList=function(t,e){var n=i._bitmapCallbackMap[t];n||(n=[]),n.push(e),i._bitmapCallbackMap[t]=n},i.crossOrigin=null,i._bitmapDataFactory={},i._bitmapCallbackMap={},i}(t.HashObject);t.Texture=e,e.prototype.__class__="egret.Texture"}(egret||(egret={})),function(t){var e=function(e){function i(){e.call(this)}__extends(i,e);var n=i.prototype;return n.init=function(){this._bitmapData=document.createElement("canvas"),this._bitmapData.avaliable=!0,this.renderContext=t.RendererContext.createRendererContext(this._bitmapData)},n.drawToTexture=function(e,n,r){if(0==(c=n||e.getBounds(t.Rectangle.identity)).width||0==c.height)return!1;this._bitmapData||this.init();var s,a,o=c.x,h=c.y,l=c.width,c=c.height,u=t.MainContext.instance.rendererContext._texture_scale_factor;if(s=l/u,a=c/u,s=Math.round(s),a=Math.round(a),this.setSize(s,a),this.begin(),e._worldTransform.identity(),e._worldTransform.a=1/u,e._worldTransform.d=1/u,r&&(e._worldTransform.a*=r,e._worldTransform.d*=r),r=e._DO_Props_._anchorOffsetX,u=e._DO_Props_._anchorOffsetY,0==e._DO_Props_._anchorX&&0==e._DO_Props_._anchorY||(r=e._DO_Props_._anchorX*s,u=e._DO_Props_._anchorY*a),this._offsetX=o+r,this._offsetY=h+u,e._worldTransform.append(1,0,0,1,-this._offsetX,-this._offsetY),n&&(this._offsetX-=o,this._offsetY-=h),e.worldAlpha=1,e instanceof t.DisplayObjectContainer)for(o=0,h=(n=e._children).length;o<h;o++)n[o]._updateTransform();return this.renderContext.setTransform(e._worldTransform),o=(n=t.RenderFilter.getInstance())._drawAreaList.concat(),n._drawAreaList.length=0,this.renderContext.clearScreen(),this.renderContext.onRenderStart(),t.Texture.deleteWebGLTexture(this),e._hasFilters()&&e._setGlobalFilters(this.renderContext),(h=e.mask||e._DO_Props_._scrollRect)&&this.renderContext.pushMask(h),r=t.MainContext.__use_new_draw,t.MainContext.__use_new_draw=!1,e._render(this.renderContext),t.MainContext.__use_new_draw=r,h&&this.renderContext.popMask(),e._hasFilters()&&e._removeGlobalFilters(this.renderContext),i.identityRectangle.width=s,i.identityRectangle.height=a,n.addDrawArea(i.identityRectangle),this.renderContext.onRenderFinish(),n._drawAreaList=o,this._sourceWidth=s,this._sourceHeight=a,this._textureWidth=Math.round(l),this._textureHeight=Math.round(c),this.end(),!0},n.setSize=function(t,e){var i=this._bitmapData;i.width=t,i.height=e,i.style.width=t+"px",i.style.height=e+"px",this.renderContext._cacheCanvas&&(this.renderContext._cacheCanvas.width=t,this.renderContext._cacheCanvas.height=e)},n.begin=function(){},n.end=function(){},n.dispose=function(){this._bitmapData&&(this.renderContext=this._bitmapData=null)},i.create=function(){return i._pool.length?i._pool.pop():new i},i.release=function(t){i._pool.push(t)},i.identityRectangle=new t.Rectangle,i._pool=[],i}(t.Texture);t.RenderTexture=e,e.prototype.__class__="egret.RenderTexture"}(egret||(egret={})),function(t){var e=function(e){function i(){e.call(this),this.renderCost=0,this._texture_scale_factor=1,this.profiler=t.Profiler.getInstance(),i.blendModesForGL||i.initBlendMode()}__extends(i,e);var n=i.prototype;return Object.defineProperty(n,"texture_scale_factor",{get:function(){return this._texture_scale_factor},set:function(t){this._setTextureScaleFactor(t)},enumerable:!0,configurable:!0}),n._setTextureScaleFactor=function(t){this._texture_scale_factor=t},n.clearScreen=function(){},n.clearRect=function(t,e,i,n){},n.drawImage=function(t,e,i,n,r,s,a,o,h,l){this.profiler.onDrawImage()},n.drawImageScale9=function(t,e,i,n,r,s,a,o,h,l){return!1},n._addOneDraw=function(){this.profiler.onDrawImage()},n.setTransform=function(t){},n.setAlpha=function(t,e){},n.setupFont=function(t,e){},n.measureText=function(t){return 0},n.drawText=function(t,e,i,n,r,s){this.profiler.onDrawImage()},n.strokeRect=function(t,e,i,n,r){},n.pushMask=function(t){},n.popMask=function(){},n.onRenderStart=function(){},n.onRenderFinish=function(){},n.createLinearGradient=function(t,e,i,n){return null},n.createRadialGradient=function(t,e,i,n,r,s){return null},n.setGlobalFilters=function(t){},n.drawCursor=function(t,e,i,n){},i.createRendererContext=function(t){return null},i.initBlendMode=function(){i.blendModesForGL={},i.blendModesForGL[t.BlendMode.NORMAL]=[1,771],i.blendModesForGL[t.BlendMode.ADD]=[770,1],i.blendModesForGL[t.BlendMode.ERASE]=[0,771],i.blendModesForGL[t.BlendMode.ERASE_REVERSE]=[0,770]},i.registerBlendModeForGL=function(e,n,r,s){i.blendModesForGL[e]&&!s?t.$warn(1005,e):i.blendModesForGL[e]=[n,r]},i.imageSmoothingEnabled=!0,i.blendModesForGL=null,i}(t.HashObject);t.RendererContext=e,e.prototype.__class__="egret.RendererContext"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.MOUSE="mouse",t.TOUCH="touch",t.mode="touch",t}();t.InteractionMode=e,e.prototype.__class__="egret.InteractionMode"}(egret||(egret={})),function(t){var e=function(e){function i(){e.call(this),this._currentTouchTarget={},this.maxTouches=2,this.touchDownTarget={},this.touchingIdentifiers=[],this.lastTouchY=this.lastTouchX=-1}__extends(i,e);var n=i.prototype;return n.run=function(){},n.getTouchData=function(t,e,i){var n=this._currentTouchTarget[t];return null==n&&(n={},this._currentTouchTarget[t]=n),n.stageX=e,n.stageY=i,n.identifier=t,n},n.dispatchEvent=function(e,i){t.TouchEvent.dispatchTouchEvent(i.target,e,i.identifier,i.stageX,i.stageY,!1,!1,!1,1==this.touchDownTarget[i.identifier])},n.onTouchBegan=function(e,i,n){if(this.touchingIdentifiers.length!=this.maxTouches){this.lastTouchX=e,this.lastTouchY=i;var r=t.MainContext.instance.stage.hitTest(e,i);r&&(e=this.getTouchData(n,e,i),this.touchDownTarget[n]=!0,e.target=r,e.beginTarget=r,this.dispatchEvent(t.TouchEvent.TOUCH_BEGIN,e)),this.touchingIdentifiers.push(n)}},n.onTouchMove=function(e,i,n){if(-1!=this.touchingIdentifiers.indexOf(n)&&(e!=this.lastTouchX||i!=this.lastTouchY)){this.lastTouchX=e,this.lastTouchY=i;var r=t.MainContext.instance.stage.hitTest(e,i);r&&((e=this.getTouchData(n,e,i)).target=r,this.dispatchEvent(t.TouchEvent.TOUCH_MOVE,e))}},n.onTouchEnd=function(e,i,n){var r=this.touchingIdentifiers.indexOf(n);-1!=r&&(this.touchingIdentifiers.splice(r,1),r=t.MainContext.instance.stage.hitTest(e,i))&&(e=this.getTouchData(n,e,i),delete this.touchDownTarget[n],n=e.beginTarget,e.target=r,this.dispatchEvent(t.TouchEvent.TOUCH_END,e),n==r?this.dispatchEvent(t.TouchEvent.TOUCH_TAP,e):e.beginTarget&&(e.target=e.beginTarget,this.dispatchEvent(t.TouchEvent.TOUCH_RELEASE_OUTSIDE,e)),delete this._currentTouchTarget[e.identifier])},i}(t.HashObject);t.TouchContext=e,e.prototype.__class__="egret.TouchContext"}(egret||(egret={})),function(t){var e=function(e){function i(){e.call(this)}__extends(i,e);var n=i.prototype;return n.proceed=function(t){},i._getUrl=function(e){var i=e.url;return-1==i.indexOf("?")&&e.method==t.URLRequestMethod.GET&&e.data&&e.data instanceof t.URLVariables&&(i=i+"?"+e.data.toString()),i},n.getChangeList=function(){return[]},i}(t.HashObject);t.NetContext=e,e.prototype.__class__="egret.NetContext"}(egret||(egret={})),function(t){var e=function(t){function e(){t.call(this)}__extends(e,t);var i=e.prototype;return i.executeMainLoop=function(t,e){},i.setFrameRate=function(t){},e}(t.HashObject);t.DeviceContext=e,e.prototype.__class__="egret.DeviceContext"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.call=function(t,e){},t.addCallback=function(t,e){},t}();t.ExternalInterface=e,e.prototype.__class__="egret.ExternalInterface"}(egret||(egret={})),function(t){var e=function(e){function i(){e.call(this),this.header=this.trans=null,this.ua=navigator.userAgent.toLowerCase(),this.trans=this.getTrans("transform")}__extends(i,e);var n=i.prototype;return i.getInstance=function(){return null==i.instance&&(i.instance=new i),i.instance},Object.defineProperty(n,"isMobile",{get:function(){return t.$warn(1e3),t.MainContext.deviceType==t.MainContext.DEVICE_MOBILE},enumerable:!0,configurable:!0}),n.isIOS=function(){return 0>this.ua.indexOf("windows")&&(0<=this.ua.indexOf("iphone")||0<=this.ua.indexOf("ipad")||0<=this.ua.indexOf("ipod"))},n.getIOSVersion=function(){return this.ua.toLowerCase().match(/cpu [^\d]*\d.*like mac os x/)[0].match(/\d(_\d)*/)[0]},n.getUserAgent=function(){return this.ua},n.getTrans=function(t,e){void 0===e&&(e=!1);var i="";return e?i=this.getHeader(t):(null==this.header&&(this.header=this.getHeader("transform")),i=this.header),""==i?t:i+t.charAt(0).toUpperCase()+t.substring(1,t.length)},n.getHeader=function(t){var e=document.createElement("div").style;if(t in e)return"";t=t.charAt(0).toUpperCase()+t.substring(1,t.length);for(var i=["webkit","ms","Moz","O"],n=0;n<i.length;n++)if(i[n]+t in e)return i[n];return""},n.$new=function(t){return this.$(document.createElement(t))},n.$=function(e){var n=document;return(e=e instanceof HTMLElement?e:n.querySelector(e))&&(e.find=e.find||this.$,e.hasClass=e.hasClass||function(t){return this.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},e.addClass=e.addClass||function(t){return this.hasClass(t)||(this.className&&(this.className+=" "),this.className+=t),this},e.removeClass=e.removeClass||function(t){return this.hasClass(t)&&(this.className=this.className.replace(t,"")),this},e.remove=e.remove||function(){},e.appendTo=e.appendTo||function(t){return t.appendChild(this),this},e.prependTo=e.prependTo||function(t){return t.childNodes[0]?t.insertBefore(this,t.childNodes[0]):t.appendChild(this),this},e.transforms=e.transforms||function(){return this.style[i.getInstance().trans]=i.getInstance().translate(this.position)+i.getInstance().rotate(this.rotation)+i.getInstance().scale(this.scale)+i.getInstance().skew(this.skew),this},e.position=e.position||{x:0,y:0},e.rotation=e.rotation||0,e.scale=e.scale||{x:1,y:1},e.skew=e.skew||{x:0,y:0},e.translates=function(e,i){return this.position.x=e,this.position.y=i-t.MainContext.instance.stage.stageHeight,this.transforms(),this},e.rotate=function(t){return this.rotation=t,this.transforms(),this},e.resize=function(t,e){return this.scale.x=t,this.scale.y=e,this.transforms(),this},e.setSkew=function(t,e){return this.skew.x=t,this.skew.y=e,this.transforms(),this}),e},n.translate=function(t){return"translate("+t.x+"px, "+t.y+"px) "},n.rotate=function(t){return"rotate("+t+"deg) "},n.scale=function(t){return"scale("+t.x+", "+t.y+") "},n.skew=function(t){return"skewX("+-t.x+"deg) skewY("+t.y+"deg)"},i}(t.HashObject);t.Browser=e,e.prototype.__class__="egret.Browser"}(egret||(egret={})),function(t){!function(t){t.getItem=function(t){return null},t.setItem=function(t,e){return!1},t.removeItem=function(t){},t.clear=function(){}}(t.localStorage||(t.localStorage={}))}(egret||(egret={})),function(t){var e=function(){function e(){}return e.parse=function(i){if(!(i=t.SAXParser.getInstance().parserXML(i))||!i.childNodes)return null;for(var n=i.childNodes.length,r=!1,s=0;s<n;s++){var a=i.childNodes[s];if(1==a.nodeType){r=!0;break}}return r?e.parseNode(a):null},e.parseNode=function(t){if(!t||1!=t.nodeType)return null;var i={};i.localName=t.localName,i.name=t.nodeName,t.namespaceURI&&(i.namespace=t.namespaceURI),t.prefix&&(i.prefix=t.prefix);for(var n=t.attributes,r=n.length,s=0;s<r;s++){var a=n[s],o=a.name;0!=o.indexOf("xmlns:")&&(i["$"+o]=a.value)}for(r=(n=t.childNodes).length,s=0;s<r;s++)(a=e.parseNode(n[s]))&&(i.children||(i.children=[]),a.parent=i,i.children.push(a));return!i.children&&(t=t.textContent.trim())&&(i.text=t),i},e.findChildren=function(t,i,n){return n?n.length=0:n=[],e.findByPath(t,i,n),n},e.findByPath=function(t,i,n){var r,s=i.indexOf(".");if(-1==s?(r=i,s=!0):(r=i.substring(0,s),i=i.substring(s+1),s=!1),t=t.children)for(var a=t.length,o=0;o<a;o++){var h=t[o];h.localName==r&&(s?n.push(h):e.findByPath(h,i,n))}},e.getAttributes=function(t,e){for(var i in e?e.length=0:e=[],t)"$"==i.charAt(0)&&e.push(i.substring(1));return e},e}();t.XML=e,e.prototype.__class__="egret.XML"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.LITTLE_ENDIAN="littleEndian",t.BIG_ENDIAN="bigEndian",t}();t.Endian=e,e.prototype.__class__="egret.Endian";var i=function(){function i(t){this.BUFFER_EXT_SIZE=0,this.EOF_code_point=this.EOF_byte=-1,this._setArrayBuffer(t||new ArrayBuffer(this.BUFFER_EXT_SIZE)),this.endian=e.BIG_ENDIAN}var n=i.prototype;return n._setArrayBuffer=function(t){this.write_position=t.byteLength,this.data=new DataView(t),this._position=0},Object.defineProperty(n,"buffer",{get:function(){return this.data.buffer},set:function(t){this.data=new DataView(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"dataView",{get:function(){return this.data},set:function(t){this.data=t,this.write_position=t.byteLength},enumerable:!0,configurable:!0}),Object.defineProperty(n,"bufferOffset",{get:function(){return this.data.byteOffset},enumerable:!0,configurable:!0}),Object.defineProperty(n,"position",{get:function(){return this._position},set:function(t){this._position<t&&!this.validate(t-this._position)||(this._position=t,this.write_position=t>this.write_position?t:this.write_position)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"length",{get:function(){return this.write_position},set:function(t){this.validateBuffer(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"bytesAvailable",{get:function(){return this.data.byteLength-this._position},enumerable:!0,configurable:!0}),n.clear=function(){this._setArrayBuffer(new ArrayBuffer(this.BUFFER_EXT_SIZE))},n.readBoolean=function(){return this.validate(i.SIZE_OF_BOOLEAN)?0!=this.data.getUint8(this.position++):null},n.readByte=function(){return this.validate(i.SIZE_OF_INT8)?this.data.getInt8(this.position++):null},n.readBytes=function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=0),0==n)n=this.bytesAvailable;else if(!this.validate(n))return null;t?t.validateBuffer(n):t=new i(new ArrayBuffer(n));for(var r=0;r<n;r++)t.data.setUint8(r+e,this.data.getUint8(this.position++))},n.readDouble=function(){if(!this.validate(i.SIZE_OF_FLOAT64))return null;var t=this.data.getFloat64(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_FLOAT64,t},n.readFloat=function(){if(!this.validate(i.SIZE_OF_FLOAT32))return null;var t=this.data.getFloat32(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_FLOAT32,t},n.readInt=function(){if(!this.validate(i.SIZE_OF_INT32))return null;var t=this.data.getInt32(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_INT32,t},n.readShort=function(){if(!this.validate(i.SIZE_OF_INT16))return null;var t=this.data.getInt16(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_INT16,t},n.readUnsignedByte=function(){return this.validate(i.SIZE_OF_UINT8)?this.data.getUint8(this.position++):null},n.readUnsignedInt=function(){if(!this.validate(i.SIZE_OF_UINT32))return null;var t=this.data.getUint32(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_UINT32,t},n.readUnsignedShort=function(){if(!this.validate(i.SIZE_OF_UINT16))return null;var t=this.data.getUint16(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_UINT16,t},n.readUTF=function(){if(!this.validate(i.SIZE_OF_UINT16))return null;var t=this.data.getUint16(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_UINT16,0<t?this.readUTFBytes(t):""},n.readUTFBytes=function(t){if(!this.validate(t))return null;var e=new Uint8Array(this.buffer,this.bufferOffset+this.position,t);return this.position+=t,this.decodeUTF8(e)},n.writeBoolean=function(t){this.validateBuffer(i.SIZE_OF_BOOLEAN),this.data.setUint8(this.position++,t?1:0)},n.writeByte=function(t){this.validateBuffer(i.SIZE_OF_INT8),this.data.setInt8(this.position++,t)},n.writeBytes=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),!(0>e||0>i)&&0<(i=0==i?t.length-e:Math.min(t.length-e,i))){this.validateBuffer(i),t=new DataView(t.buffer);for(var n=e;n<i+e;n++)this.data.setUint8(this.position++,t.getUint8(n))}},n.writeDouble=function(t){this.validateBuffer(i.SIZE_OF_FLOAT64),this.data.setFloat64(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_FLOAT64},n.writeFloat=function(t){this.validateBuffer(i.SIZE_OF_FLOAT32),this.data.setFloat32(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_FLOAT32},n.writeInt=function(t){this.validateBuffer(i.SIZE_OF_INT32),this.data.setInt32(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_INT32},n.writeShort=function(t){this.validateBuffer(i.SIZE_OF_INT16),this.data.setInt16(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_INT16},n.writeUnsignedInt=function(t){this.validateBuffer(i.SIZE_OF_UINT32),this.data.setUint32(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_UINT32},n.writeUTF=function(t){var n=(t=this.encodeUTF8(t)).length;this.validateBuffer(i.SIZE_OF_UINT16+n),this.data.setUint16(this.position,n,this.endian===e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_UINT16,this._writeUint8Array(t,!1)},n.writeUTFBytes=function(t){this._writeUint8Array(this.encodeUTF8(t))},n.toString=function(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable},n._writeUint8Array=function(t,e){void 0===e&&(e=!0),e&&this.validateBuffer(this.position+t.length);for(var i=0;i<t.length;i++)this.data.setUint8(this.position++,t[i])},n.validate=function(e){if(0<this.data.byteLength&&this._position+e<=this.data.byteLength)return!0;t.$error(1025)},n.validateBuffer=function(t,e){if(void 0===e&&(e=!1),this.write_position=t>this.write_position?t:this.write_position,t+=this._position,this.data.byteLength<t||e){var i=new Uint8Array(new ArrayBuffer(t+this.BUFFER_EXT_SIZE)),n=Math.min(this.data.buffer.byteLength,t+this.BUFFER_EXT_SIZE);i.set(new Uint8Array(this.data.buffer,0,n)),this.buffer=i.buffer}},n.encodeUTF8=function(t){var e=0;t=this.stringToCodePoints(t);for(var i=[];t.length>e;){var n=t[e++];if(this.inRange(n,55296,57343))this.encoderError(n);else if(this.inRange(n,0,127))i.push(n);else{var r,s;for(this.inRange(n,128,2047)?(r=1,s=192):this.inRange(n,2048,65535)?(r=2,s=224):this.inRange(n,65536,1114111)&&(r=3,s=240),i.push(this.div(n,Math.pow(64,r))+s);0<r;){var a=this.div(n,Math.pow(64,r-1));i.push(128+a%64),r-=1}}}return new Uint8Array(i)},n.decodeUTF8=function(t){for(var e,i=0,n="",r=0,s=0,a=0,o=0;t.length>i;){if((e=t[i++])===this.EOF_byte)e=0!==s?this.decoderError(!1):this.EOF_code_point;else if(0===s)this.inRange(e,0,127)||(this.inRange(e,194,223)?(s=1,o=128,r=e-192):this.inRange(e,224,239)?(s=2,o=2048,r=e-224):this.inRange(e,240,244)?(s=3,o=65536,r=e-240):this.decoderError(!1),r*=Math.pow(64,s),e=null);else if(this.inRange(e,128,191))if(a+=1,r+=(e-128)*Math.pow(64,s-a),a!==s)e=null;else{var h=r,l=o;o=a=s=r=0;e=this.inRange(h,l,1114111)&&!this.inRange(h,55296,57343)?h:this.decoderError(!1,e)}else o=a=s=r=0,i--,e=this.decoderError(!1,e);null!==e&&e!==this.EOF_code_point&&(65535>=e?0<e&&(n+=String.fromCharCode(e)):(e-=65536,n+=String.fromCharCode(55296+(e>>10&1023)),n+=String.fromCharCode(56320+(1023&e))))}return n},n.encoderError=function(e){t.$error(1026,e)},n.decoderError=function(e,i){return e&&t.$error(1027),i||65533},n.inRange=function(t,e,i){return e<=t&&t<=i},n.div=function(t,e){return Math.floor(t/e)},n.stringToCodePoints=function(t){for(var e=[],i=0,n=t.length;i<t.length;){var r=t.charCodeAt(i);if(this.inRange(r,55296,57343))if(this.inRange(r,56320,57343))e.push(65533);else if(i===n-1)e.push(65533);else{var s=t.charCodeAt(i+1);this.inRange(s,56320,57343)?(r&=1023,s&=1023,i+=1,e.push(65536+(r<<10)+s)):e.push(65533)}else e.push(r);i+=1}return e},i.SIZE_OF_BOOLEAN=1,i.SIZE_OF_INT8=1,i.SIZE_OF_INT16=2,i.SIZE_OF_INT32=4,i.SIZE_OF_UINT8=1,i.SIZE_OF_UINT16=2,i.SIZE_OF_UINT32=4,i.SIZE_OF_FLOAT32=4,i.SIZE_OF_FLOAT64=8,i}();t.ByteArray=i,i.prototype.__class__="egret.ByteArray"}(egret||(egret={})),(egret||(egret={})).getOption=function(t){if(window.hasOwnProperty("location")){if(""==(e=location.search))return"";for(var e,i=(e=(e=e.slice(1)).split("&")).length,n=0;n<i;n++){var r=e[n].split("=");if(r[0]==t)return r[1]}}return""},function(t){var e=function(e){function i(t,i,n){e.call(this),this._target=null,this.loop=this.ignoreGlobalPause=this._useTicks=!1,this._actions=this._steps=this.pluginData=null,this.paused=!1,this.duration=0,this._prevPos=-1,this.position=null,this._stepPosition=this._prevPosition=0,this.passive=!1,this.initialize(t,i,n)}__extends(i,e);var n=i.prototype;return i.get=function(t,e,n,r){return void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=!1),r&&i.removeTweens(t),new i(t,e,n)},i.removeTweens=function(t){if(t.tween_count){for(var e=i._tweens,n=e.length-1;0<=n;n--)e[n]._target==t&&(e[n].paused=!0,e.splice(n,1));t.tween_count=0}},i.pauseTweens=function(e){if(e.tween_count)for(var i=t.Tween._tweens,n=i.length-1;0<=n;n--)i[n]._target==e&&(i[n].paused=!0)},i.resumeTweens=function(e){if(e.tween_count)for(var i=t.Tween._tweens,n=i.length-1;0<=n;n--)i[n]._target==e&&(i[n].paused=!1)},i.tick=function(t,e){void 0===e&&(e=!1);for(var n=i._tweens.concat(),r=n.length-1;0<=r;r--){var s=n[r];e&&!s.ignoreGlobalPause||s.paused||s.tick(s._useTicks?1:t)}},i._register=function(e,n){var r=e._target,s=i._tweens;if(n)r&&(r.tween_count=0<r.tween_count?r.tween_count+1:1),s.push(e),i._inited||(t.Ticker.getInstance().register(i.tick,null),i._inited=!0);else for(r&&r.tween_count--,r=s.length;r--;)if(s[r]==e){s.splice(r,1);break}},i.removeAllTweens=function(){for(var t=i._tweens,e=0,n=t.length;e<n;e++){var r=t[e];r.paused=!0,r._target.tweenjs_count=0}t.length=0},n.initialize=function(t,e,n){this._target=t,e&&(this._useTicks=e.useTicks,this.ignoreGlobalPause=e.ignoreGlobalPause,this.loop=e.loop,e.onChange&&this.addEventListener("change",e.onChange,e.onChangeObj),e.override&&i.removeTweens(t)),this.pluginData=n||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],e&&e.paused?this.paused=!0:i._register(this,!0),e&&null!=e.position&&this.setPosition(e.position,i.NONE)},n.setPosition=function(t,e){void 0===e&&(e=1),0>t&&(t=0);var i=t,n=!1;if(i>=this.duration&&(this.loop?i%=this.duration:(i=this.duration,n=!0)),i==this._prevPos)return n;var r=this._prevPos;if(this.position=this._prevPos=i,this._prevPosition=t,this._target)if(n)this._updateTargetProps(null,1);else if(0<this._steps.length){for(var s=0,a=this._steps.length;s<a&&!(this._steps[s].t>i);s++);s=this._steps[s-1],this._updateTargetProps(s,(this._stepPosition=i-s.t)/s.d)}return 0!=e&&0<this._actions.length&&(this._useTicks?this._runActions(i,i):1==e&&i<r?(r!=this.duration&&this._runActions(r,this.duration),this._runActions(0,i,!0)):this._runActions(r,i)),n&&this.setPaused(!0),this.dispatchEventWith("change"),n},n._runActions=function(t,e,i){void 0===i&&(i=!1);var n=t,r=e,s=-1,a=this._actions.length,o=1;for(t>e&&(n=e,r=t,s=a,a=o=-1);(s+=o)!=a;){var h=(e=this._actions[s]).t;(h==r||h>n&&h<r||i&&h==t)&&e.f.apply(e.o,e.p)}},n._updateTargetProps=function(t,e){var n,r,s,a;if(t||1!=e){if(this.passive=!!t.v)return;t.e&&(e=t.e(e,0,1,1)),n=t.p0,r=t.p1}else this.passive=!1,n=r=this._curQueueProps;for(var o in this._initQueueProps){null==(s=n[o])&&(n[o]=s=this._initQueueProps[o]),null==(a=r[o])&&(r[o]=a=s),s=s==a||0==e||1==e||"number"!=typeof s?1==e?a:s:s+(a-s)*e;var h=!1;if(a=i._plugins[o])for(var l=0,c=a.length;l<c;l++){var u=a[l].tween(this,o,s,n,r,e,!!t&&n==r,!t);u==i.IGNORE?h=!0:s=u}h||(this._target[o]=s)}},n.setPaused=function(t){return this.paused=t,i._register(this,!t),this},n._cloneProps=function(t){var e,i={};for(e in t)i[e]=t[e];return i},n._addStep=function(t){return 0<t.d&&(this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},n._appendQueueProps=function(t){var e,n,r,s,a,o;for(o in t)if(void 0===this._initQueueProps[o]){if(n=this._target[o],e=i._plugins[o])for(r=0,s=e.length;r<s;r++)n=e[r].init(this,o,n);this._initQueueProps[o]=this._curQueueProps[o]=void 0===n?null:n}for(o in t){if(n=this._curQueueProps[o],e=i._plugins[o])for(a=a||{},r=0,s=e.length;r<s;r++)e[r].step&&e[r].step(this,o,n,t[o],a);this._curQueueProps[o]=t[o]}return a&&this._appendQueueProps(a),this._curQueueProps},n._addAction=function(t){return t.t=this.duration,this._actions.push(t),this},n._set=function(t,e){for(var i in t)e[i]=t[i]},n.wait=function(t,e){if(null==t||0>=t)return this;var i=this._cloneProps(this._curQueueProps);return this._addStep({d:t,p0:i,p1:i,v:e})},n.to=function(t,e,i){return void 0===i&&(i=void 0),(isNaN(e)||0>e)&&(e=0),this._addStep({d:e||0,p0:this._cloneProps(this._curQueueProps),e:i,p1:this._cloneProps(this._appendQueueProps(t))})},n.call=function(t,e,i){return void 0===e&&(e=void 0),void 0===i&&(i=void 0),this._addAction({f:t,p:i||[],o:e||this._target})},n.set=function(t,e){return void 0===e&&(e=null),this._addAction({f:this._set,o:this,p:[t,e||this._target]})},n.play=function(t){return t||(t=this),this.call(t.setPaused,t,[!1])},n.pause=function(t){return t||(t=this),this.call(t.setPaused,t,[!0])},n.tick=function(t){this.paused||this.setPosition(this._prevPosition+t)},i.NONE=0,i.LOOP=1,i.REVERSE=2,i._tweens=[],i.IGNORE={},i._plugins={},i._inited=!1,i}(t.EventDispatcher);t.Tween=e,e.prototype.__class__="egret.Tween"}(egret||(egret={})),function(t){var e=function(){function e(){t.$error(1014)}return e.get=function(t){return-1>t&&(t=-1),1<t&&(t=1),function(e){return 0==t?e:0>t?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},e.getPowIn=function(t){return function(e){return Math.pow(e,t)}},e.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},e.getPowInOut=function(t){return function(e){return 1>(e*=2)?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}},e.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},e.sineOut=function(t){return Math.sin(t*Math.PI/2)},e.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},e.getBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}},e.getBackOut=function(t){return function(e){return--e*e*((t+1)*e+t)+1}},e.getBackInOut=function(t){return t*=1.525,function(e){return 1>(e*=2)?.5*e*e*((t+1)*e-t):.5*((e-=2)*e*((t+1)*e+t)+2)}},e.circIn=function(t){return-(Math.sqrt(1-t*t)-1)},e.circOut=function(t){return Math.sqrt(1- --t*t)},e.circInOut=function(t){return 1>(t*=2)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},e.bounceIn=function(t){return 1-e.bounceOut(1-t)},e.bounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},e.bounceInOut=function(t){return.5>t?.5*e.bounceIn(2*t):.5*e.bounceOut(2*t-1)+.5},e.getElasticIn=function(t,e){var i=2*Math.PI;return function(n){if(0==n||1==n)return n;var r=e/i*Math.asin(1/t);return-t*Math.pow(2,10*(n-=1))*Math.sin((n-r)*i/e)}},e.getElasticOut=function(t,e){var i=2*Math.PI;return function(n){if(0==n||1==n)return n;var r=e/i*Math.asin(1/t);return t*Math.pow(2,-10*n)*Math.sin((n-r)*i/e)+1}},e.getElasticInOut=function(t,e){var i=2*Math.PI;return function(n){var r=e/i*Math.asin(1/t);return 1>(n*=2)?-.5*t*Math.pow(2,10*(n-=1))*Math.sin((n-r)*i/e):t*Math.pow(2,-10*(n-=1))*Math.sin((n-r)*i/e)*.5+1}},e.quadIn=e.getPowIn(2),e.quadOut=e.getPowOut(2),e.quadInOut=e.getPowInOut(2),e.cubicIn=e.getPowIn(3),e.cubicOut=e.getPowOut(3),e.cubicInOut=e.getPowInOut(3),e.quartIn=e.getPowIn(4),e.quartOut=e.getPowOut(4),e.quartInOut=e.getPowInOut(4),e.quintIn=e.getPowIn(5),e.quintOut=e.getPowOut(5),e.quintInOut=e.getPowInOut(5),e.backIn=e.getBackIn(1.7),e.backOut=e.getBackOut(1.7),e.backInOut=e.getBackInOut(1.7),e.elasticIn=e.getElasticIn(1,.3),e.elasticOut=e.getElasticOut(1,.3),e.elasticInOut=e.getElasticInOut(1,.3*1.5),e}();t.Ease=e,e.prototype.__class__="egret.Ease"}(egret||(egret={})),function(t){var e=function(e){function i(){e.call(this),this.path="",this.audio=null,this.type=i.EFFECT,this._pauseTime=0,this._listeners=[]}__extends(i,e);var n=i.prototype;return Object.defineProperty(n,"position",{get:function(){return this.audio?Math.floor(1e3*this.audio._getCurrentTime()):0},enumerable:!0,configurable:!0}),n.play=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=0);var i=this.audio;i&&(i._setCurrentTime(e/1e3),i._setLoop(t),i._play(this.type))},n.stop=function(){var t=this.audio;t&&(this._pauseTime=0,t._setCurrentTime(0),t._pause())},n.pause=function(){var t=this.audio;t&&(this._pauseTime=t._getCurrentTime(),t._pause())},n.resume=function(){var t=this.audio;t&&(t._setCurrentTime(this._pauseTime),this._pauseTime=0,t._play(this.type))},n.load=function(){var t=this.audio;t&&t._load()},n.addEventListener=function(i,n,r){e.prototype.addEventListener.call(this,i,n,r);var s=this;this.audio&&1==this._eventsMap[i].length&&(n=i==t.SoundEvent.SOUND_COMPLETE?function(e){t.Event._dispatchByTarget(t.SoundEvent,s,t.SoundEvent.SOUND_COMPLETE)}:function(e){t.Event._dispatchByTarget(t.Event,s,e.type)},this._listeners.push({type:i,func:n}),i=s.getVirtualType(i),this.audio._addEventListener(i,n,!1))},n.removeEventListener=function(t,i,n){if(e.prototype.removeEventListener.call(this,t,i,n),this.audio&&(!this._eventsMap||!this._eventsMap[t]||0==this._eventsMap[t].length))for(n=0;n<this._listeners.length;n++)if((i=this._listeners[n]).type==t){this._listeners.splice(n,1),t=this.getVirtualType(t),this.audio._removeEventListener(t,i.func,!1);break}},n.getVirtualType=function(e){return e===t.SoundEvent.SOUND_COMPLETE?"ended":e},Object.defineProperty(n,"volume",{get:function(){return this.audio?this.audio._getVolume():0},set:function(t){var e=this.audio;e&&e._setVolume(Math.max(0,Math.min(t,1)))},enumerable:!0,configurable:!0}),n.setVolume=function(e){t.$warn(1031),this.volume=e},n.getVolume=function(){return t.$warn(1032),this.volume},n.preload=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null),this.type=t,this.audio._preload(t,e,i)},n._setAudio=function(t){this.audio=t},n.destroy=function(){this.audio._destroy()},i.MUSIC="music",i.EFFECT="effect",i}(t.EventDispatcher);t.Sound=e,e.prototype.__class__="egret.Sound"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},t.sin=function(e){var i=Math.floor(e),n=i+1,r=t.sinInt(i);return(e-i)*t.sinInt(n)+(n-e)*r},t.sinInt=function(t){return 0>(t%=360)&&(t+=360),90>t?egret_sin_map[t]:180>t?egret_cos_map[t-90]:270>t?-egret_sin_map[t-180]:-egret_cos_map[t-270]},t.cos=function(e){var i=Math.floor(e),n=i+1,r=t.cosInt(i);return(e-i)*t.cosInt(n)+(n-e)*r},t.cosInt=function(t){return 0>(t%=360)&&(t+=360),90>t?egret_cos_map[t]:180>t?-egret_sin_map[t-90]:270>t?-egret_cos_map[t-180]:egret_sin_map[t-270]},t}();t.NumberUtils=e,e.prototype.__class__="egret.NumberUtils"}(egret||(egret={}));for(var egret_sin_map={},egret_cos_map={},NumberUtils_i=0;90>=NumberUtils_i;NumberUtils_i++)egret_sin_map[NumberUtils_i]=Math.sin(NumberUtils_i*egret.Matrix.DEG_TO_RAD),egret_cos_map[NumberUtils_i]=Math.cos(NumberUtils_i*egret.Matrix.DEG_TO_RAD);Function.prototype.bind||(Function.prototype.bind=function(t){"function"!=typeof this&&egret.$error(1029);var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},r=function(){return i.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,r.prototype=new n,r}),function(t){var e=function(){function e(){this.downloadingSizeThisObject=this.downloadingSizeFunc=this.onErrorThisObject=this.onErrorFunc=this.onSuccessThisObject=this.onSuccessFunc=null}var i=e.prototype;return e.create=function(){return e.promiseObjectList.length?e.promiseObjectList.pop():new t.PromiseObject},i.onSuccess=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];this.onSuccessFunc&&this.onSuccessFunc.apply(this.onSuccessThisObject,t),this.destroy()},i.onError=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];this.onErrorFunc&&this.onErrorFunc.apply(this.onErrorThisObject,t),this.destroy()},i.downloadingSize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];this.downloadingSizeFunc&&this.downloadingSizeFunc.apply(this.downloadingSizeThisObject,t)},i.destroy=function(){this.downloadingSizeThisObject=this.downloadingSizeFunc=this.onErrorThisObject=this.onErrorFunc=this.onSuccessThisObject=this.onSuccessFunc=void 0,e.promiseObjectList.push(this)},e.promiseObjectList=[],e}();t.PromiseObject=e,e.prototype.__class__="egret.PromiseObject"}(egret||(egret={})),function(t){var e=function(e){function i(t){void 0===t&&(t=60),e.call(this),this.frameRate=t,this._time=0,this._requestAnimationId=NaN,this._isActivate=!0,i.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,i.cancelAnimationFrame=window.cancelAnimationFrame||window.msCancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.oCancelAnimationFrame||window.cancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame,i.requestAnimationFrame||(i.requestAnimationFrame=function(e){return window.setTimeout(e,1e3/t)}),i.cancelAnimationFrame||(i.cancelAnimationFrame=function(t){return window.clearTimeout(t)}),i.instance=this,this.registerListener()}__extends(i,e);var n=i.prototype;return n.setFrameRate=function(t){0==60%t&&(i.countTime=60/t-1)},n.enterFrame=function(){var e=i.instance,n=i._thisObject,r=i._callback,s=t.getTimer(),a=s-e._time;e._requestAnimationId=i.requestAnimationFrame.call(window,i.prototype.enterFrame),i.count<i.countTime?i.count++:(i.count=0,r.call(n,a),e._time=s)},n.executeMainLoop=function(t,e){i._callback=t,i._thisObject=e,this.enterFrame()},n.reset=function(){var e=i.instance;e._requestAnimationId&&(e._time=t.getTimer(),i.cancelAnimationFrame.call(window,e._requestAnimationId),e.enterFrame())},n.registerListener=function(){var e,n,r=this,s=function(){r._isActivate&&(r._isActivate=!1,t.MainContext.instance.stage.dispatchEvent(new t.Event(t.Event.DEACTIVATE)))},a=function(){r._isActivate||(r._isActivate=!0,i.instance.reset(),t.MainContext.instance.stage.dispatchEvent(new t.Event(t.Event.ACTIVATE)))},o=function(){document[e]?s():a()};window.addEventListener("focus",a,!1),window.addEventListener("blur",s,!1),void 0!==document.hidden?(e="hidden",n="visibilitychange"):void 0!==document.mozHidden?(e="mozHidden",n="mozvisibilitychange"):void 0!==document.msHidden?(e="msHidden",n="msvisibilitychange"):void 0!==document.webkitHidden?(e="webkitHidden",n="webkitvisibilitychange"):void 0!==document.oHidden&&(e="oHidden",n="ovisibilitychange"),"onpageshow"in window&&"onpagehide"in window&&(window.addEventListener("pageshow",a,!1),window.addEventListener("pagehide",s,!1)),e&&n&&document.addEventListener(n,o,!1),o=navigator.userAgent,n=/micromessenger/gi.test(o);var h=/mqq/gi.test(o);(/mobile.*qq/gi.test(o)||n)&&(h=!1),h&&((o=window.browser||{}).execWebFn=o.execWebFn||{},o.execWebFn.postX5GamePlayerMessage=function(t){"app_enter_background"==(t=t.type)?s():"app_enter_foreground"==t&&a()},window.browser=o)},i.instance=null,i.countTime=0,i.requestAnimationFrame=null,i.cancelAnimationFrame=null,i._thisObject=null,i._callback=null,i.count=0,i}(t.DeviceContext);t.HTML5DeviceContext=e,e.prototype.__class__="egret.HTML5DeviceContext"}(egret||(egret={})),function(t){t.getItem=function(t){return window.localStorage.getItem(t)},t.setItem=function(t,e){try{return window.localStorage.setItem(t,e),!0}catch(i){return egret.$warn(1018,t,e),!1}},t.removeItem=function(t){window.localStorage.removeItem(t)},t.clear=function(){window.localStorage.clear()},t.init=function(){for(var e in t)egret.localStorage[e]=t[e]}}(egret_html5_localStorage||(egret_html5_localStorage={})),egret_html5_localStorage.init(),function(t){var e=function(e){function i(i,n){void 0===n&&(n=!0),e.call(this),this.useCacheCanvas=n,t.Texture.prototype.draw=t.Texture.prototype._drawForCanvas,t.Texture.prototype.dispose=t.Texture.prototype._disposeForCanvas,this.canvas=i||this.createCanvas(),this.canvasContext=this.canvas.getContext("2d"),n?(this._cacheCanvas=document.createElement("canvas"),this._cacheCanvas.width=this.canvas.width,this._cacheCanvas.height=this.canvas.height,this.drawCanvasContext=this._cacheCanvasContext=this._cacheCanvas.getContext("2d")):this.drawCanvasContext=this.canvasContext;var r=this.drawCanvasContext;if(null==r.imageSmoothingEnabled){for(var s=["webkitImageSmoothingEnabled","mozImageSmoothingEnabled","msImageSmoothingEnabled"],a=0;a<s.length;a++){var o=s[a];if(null!=r[o])break}Object.defineProperty(r,"imageSmoothingEnabled",{get:function(){return this[o]},set:function(t){this[o]=t},enumerable:!0,configurable:!0})}this.onResize();var h=this.drawCanvasContext.setTransform,l=this;this.drawCanvasContext.setTransform=function(t,e,i,n,r,s){l._matrixA=t,l._matrixB=e,l._matrixC=i,l._matrixD=n,l._matrixTx=r,l._matrixTy=s,h.call(l.drawCanvasContext,t,e,i,n,r,s)},this._matrixA=1,this._matrixC=this._matrixB=0,this._matrixD=1,this._transformTy=this._transformTx=this._matrixTy=this._matrixTx=0,this.initBlendMode()}__extends(i,e);var n=i.prototype;return n.createCanvas=function(){if(!(e=t.Browser.getInstance().$("#egretCanvas"))){var e,i=document.getElementById(t.StageDelegate.canvas_div_name);(e=t.Browser.getInstance().$new("canvas")).id="egretCanvas",i.appendChild(e)}return t.MainContext.instance.stage.addEventListener(t.Event.RESIZE,this.onResize,this),e},n.onResize=function(){if(this.canvas){var e=document.getElementById(t.StageDelegate.canvas_div_name);this.canvas.width=t.MainContext.instance.stage.stageWidth,this.canvas.height=t.MainContext.instance.stage.stageHeight,this.canvas.style.width=e.style.width,this.canvas.style.height=e.style.height,this.useCacheCanvas&&(this._cacheCanvas.width=this.canvas.width,this._cacheCanvas.height=this.canvas.height),this.drawCanvasContext.imageSmoothingEnabled=t.RendererContext.imageSmoothingEnabled}},n.clearScreen=function(){for(var e=t.RenderFilter.getInstance().getDrawAreaList(),i=0,n=e.length;i<n;i++){var r=e[i];this.clearRect(r.x,r.y,r.width,r.height)}e=t.MainContext.instance.stage,this.useCacheCanvas&&this._cacheCanvasContext.clearRect(0,0,e.stageWidth,e.stageHeight),this.renderCost=0},n.clearRect=function(t,e,i,n){this.canvasContext.clearRect(t,e,i,n)},n.drawImage=function(i,n,r,s,a,o,h,l,c,u){void 0===u&&(u=void 0),o+=this._transformTx,h+=this._transformTy;var _=t.getTimer();i.draw(this.drawCanvasContext,n,r,s,a,o,h,l,c,u),e.prototype.drawImage.call(this,i,n,r,s,a,o,h,l,c,u),this.renderCost+=t.getTimer()-_},n.setTransform=function(t){1==t.a&&0==t.b&&0==t.c&&1==t.d&&1==this._matrixA&&0==this._matrixB&&0==this._matrixC&&1==this._matrixD?(this._transformTx=t.tx-this._matrixTx,this._transformTy=t.ty-this._matrixTy):(this._transformTx=this._transformTy=0,this._matrixA==t.a&&this._matrixB==t.b&&this._matrixC==t.c&&this._matrixD==t.d&&this._matrixTx==t.tx&&this._matrixTy==t.ty||this.drawCanvasContext.setTransform(t.a,t.b,t.c,t.d,t.tx,t.ty))},n.setAlpha=function(e,i){this.drawCanvasContext.globalAlpha=e,i?(this.blendValue=this.blendModes[i],this.drawCanvasContext.globalCompositeOperation=this.blendValue):this.blendValue!=t.BlendMode.NORMAL&&(this.blendValue=this.blendModes[t.BlendMode.NORMAL],this.drawCanvasContext.globalCompositeOperation=this.blendValue)},n.initBlendMode=function(){this.blendModes={},this.blendModes[t.BlendMode.NORMAL]="source-over",this.blendModes[t.BlendMode.ADD]="lighter",this.blendModes[t.BlendMode.ERASE]="destination-out",this.blendModes[t.BlendMode.ERASE_REVERSE]="destination-in"},n.setupFont=function(t,e){void 0===e&&(e=null),e=e||{};var i=t._TF_Props_,n=null==e.size?i._size:e.size,r=null==e.fontFamily?i._fontFamily:e.fontFamily,s=this.drawCanvasContext,a=(a=(null==e.italic?i._italic:e.italic)?"italic ":"normal ")+((null==e.bold?i._bold:e.bold)?"bold ":"normal ");s.font=a+(n+"px ")+r,s.textAlign="left",s.textBaseline="middle"},n.measureText=function(t){return this.drawCanvasContext.measureText(t).width},n.drawText=function(i,n,r,s,a,o){void 0===o&&(o=null),this.setupFont(i,o),o=o||{};var h,l,c=i._TF_Props_;h=null!=o.textColor?t.toColorString(o.textColor):c._textColorString,l=null!=o.strokeColor?t.toColorString(o.strokeColor):c._strokeColorString;c=null!=o.stroke?o.stroke:c._stroke;var u=this.drawCanvasContext;u.fillStyle=h,u.strokeStyle=l,c&&(u.lineWidth=2*c,u.strokeText(n,r+this._transformTx,s+this._transformTy,a||65535)),u.fillText(n,r+this._transformTx,s+this._transformTy,a||65535),e.prototype.drawText.call(this,i,n,r,s,a,o)},n.strokeRect=function(t,e,i,n,r){this.drawCanvasContext.strokeStyle=r,this.drawCanvasContext.strokeRect(t,e,i,n)},n.pushMask=function(t){this.drawCanvasContext.save(),this.drawCanvasContext.beginPath(),this.drawCanvasContext.rect(t.x+this._transformTx,t.y+this._transformTy,t.width,t.height),this.drawCanvasContext.clip(),this.drawCanvasContext.closePath()},n.popMask=function(){this.drawCanvasContext.restore(),this.drawCanvasContext.setTransform(1,0,0,1,0,0)},n.onRenderStart=function(){this.drawCanvasContext.save()},n.onRenderFinish=function(){if(this.drawCanvasContext.restore(),this.drawCanvasContext.setTransform(1,0,0,1,0,0),this.useCacheCanvas)for(var e=this._cacheCanvas.width,i=this._cacheCanvas.height,n=t.RenderFilter.getInstance().getDrawAreaList(),r=0,s=n.length;r<s;r++){var a,o=(a=n[r]).x,h=a.y,l=a.width;o+l>e&&(l=e-o),h+(a=a.height)>i&&(a=i-h),0<l&&0<a&&this.canvasContext.drawImage(this._cacheCanvas,o,h,l,a,o,h,l,a)}},n.drawCursor=function(t,e,i,n){this.drawCanvasContext.strokeStyle="#40a5ff",this.drawCanvasContext.lineWidth=2,this.drawCanvasContext.beginPath(),this.drawCanvasContext.moveTo(Math.round(t+this._transformTx),Math.round(e+this._transformTy)),this.drawCanvasContext.lineTo(Math.round(i+this._transformTx),Math.round(n+this._transformTy)),this.drawCanvasContext.closePath(),this.drawCanvasContext.stroke()},n.createLinearGradient=function(t,e,i,n){return this.drawCanvasContext.createLinearGradient(t,e,i,n)},n.createRadialGradient=function(t,e,i,n,r,s){return this.drawCanvasContext.createRadialGradient(t,e,i,n,r,s)},i}(t.RendererContext);t.HTML5CanvasRenderer=e,e.prototype.__class__="egret.HTML5CanvasRenderer"}(egret||(egret={})),egret.RendererContext.createRendererContext=function(t){return new egret.HTML5CanvasRenderer(t,!1)},egret.Graphics.prototype._beginDraw=function(t){this._renderContext=t.drawCanvasContext;var e=t._transformTx;t=t._transformTy,0==e&&0==t||this._renderContext.translate(e,t)},egret.Graphics.prototype._endDraw=function(t){this._renderContext=t.drawCanvasContext;var e=t._transformTx;t=t._transformTy,0==e&&0==t||this._renderContext.translate(-e,-t)};var egret_webgl_graphics,RES,originCanvas2DFill=CanvasRenderingContext2D.prototype.fill;CanvasRenderingContext2D.prototype.fill=function(){var t=this.fillStyle;"string"!=typeof t&&(t=t.matrix)?(this.transform(t.a,t.b,t.c,t.d,t.tx,t.ty),originCanvas2DFill.call(this),(t=egret.MainContext.instance.rendererContext)._transformTx=t._transformTy=0,this.setTransform(t._matrixA,t._matrixB,t._matrixC,t._matrixD,t._matrixTx,t._matrixTy)):originCanvas2DFill.call(this)},function(t){var e=function(e){function i(i){e.call(this),this.glID=this.gl=this.canvas=null,this.size=2e3,this.vertices=null,this.vertSize=5,this.indices=null,this.projectionY=this.projectionX=NaN,this.shaderManager=null,this.contextLost=!1,this.glContextId=0,this.currentBlendMode="",this.currentBaseTexture=null,this.currentBatchSize=0,this.worldTransform=null,this.worldAlpha=1,this.maskList=[],this.maskDataFreeList=[],this.graphicsIndexBuffer=this.graphicsBuffer=this.graphicsIndices=this.graphicsPoints=this.filterType=this.colorTransformMatrix=null,this.graphicsStyle={},t.Texture.prototype.dispose=t.Texture.prototype._disposeForCanvas,this.canvas=i||this.createCanvas(),this.canvas.addEventListener("webglcontextlost",this.handleContextLost.bind(this),!1),this.canvas.addEventListener("webglcontextrestored",this.handleContextRestored.bind(this),!1),this.html5Canvas=document.createElement("canvas"),this.canvasContext=new t.HTML5CanvasRenderer(this.html5Canvas),this.onResize(),this.projectionX=this.canvas.width/2,this.projectionY=-this.canvas.height/2,i=6*this.size,this.vertices=new Float32Array(4*this.size*this.vertSize),this.indices=new Uint16Array(i);for(var n=0,r=0;n<i;n+=6,r+=4)this.indices[n+0]=r+0,this.indices[n+1]=r+1,this.indices[n+2]=r+2,this.indices[n+3]=r+0,this.indices[n+4]=r+2,this.indices[n+5]=r+3;this.initWebGL(),this.shaderManager=new t.WebGLShaderManager(this.gl),this.worldTransform=new t.Matrix,this.initAll()}__extends(i,e);var n=i.prototype;return n.onRenderFinish=function(){this._drawWebGL()},i.initWebGLCanvas=function(){t.RenderTexture.WebGLCanvas||(t.RenderTexture.WebGLCanvas=document.createElement("canvas"),t.RenderTexture.WebGLCanvas.avaliable=!0,t.RenderTexture.WebGLRenderer=new t.WebGLRenderer(t.RenderTexture.WebGLCanvas),t.RenderTexture.WebGLRenderer.setAlpha(1))},n.initAll=function(){i.isInit||(i.isInit=!0,egret_webgl_graphics.init(),t.TextField.prototype._makeBitmapCache=function(){if(this.renderTexture||(this.renderTexture=new t.RenderTexture),0==(s=this.getBounds(t.Rectangle.identity)).width||0==s.height)return this._texture_to_render=null,!1;this._bitmapData||(this._bitmapData=document.createElement("canvas"),this._bitmapData.avaliable=!0,this.renderContext=t.RendererContext.createRendererContext(this._bitmapData));var e,i,n=this._bitmapData,r=s.width,s=s.height,a=t.MainContext.instance.rendererContext._texture_scale_factor;e=r/a,i=s/a,e=Math.round(e),i=Math.round(i),n.width=e,n.height=i,n.style.width=e+"px",n.style.height=i+"px",this.renderContext._cacheCanvas&&(this.renderContext._cacheCanvas.width=e,this.renderContext._cacheCanvas.height=i),this._worldTransform.identity(),this._worldTransform.a=1/a,this._worldTransform.d=1/a,this.renderContext.setTransform(this._worldTransform),this.worldAlpha=1,a=(n=t.RenderFilter.getInstance())._drawAreaList.concat(),n._drawAreaList.length=0,this.renderContext.clearScreen(),this.renderContext.onRenderStart(),t.Texture.deleteWebGLTexture(this.renderTexture),this.renderTexture.dispose(),this._hasFilters()&&this._setGlobalFilters(this.renderContext);var o=this.mask||this._DO_Props_._scrollRect;return o&&this.renderContext.pushMask(o),this._render(this.renderContext),o&&this.renderContext.popMask(),this._hasFilters()&&this._removeGlobalFilters(this.renderContext),t.RenderTexture.identityRectangle.width=e,t.RenderTexture.identityRectangle.height=i,n.addDrawArea(t.RenderTexture.identityRectangle),this.renderContext.onRenderFinish(),n._drawAreaList=a,this.renderTexture._bitmapData=this._bitmapData,this.renderTexture._sourceWidth=e,this.renderTexture._sourceHeight=i,this.renderTexture._textureWidth=r,this.renderTexture._textureHeight=s,this._texture_to_render=this.renderTexture,!0},t.TextField.prototype._draw=function(e){this._TF_Props_._type==t.TextFieldType.INPUT&&this._isTyping||(this.getDirty()&&(this._texture_to_render=this.renderTexture,this._DO_Props_._cacheAsBitmap=!0),t.DisplayObject.prototype._draw.call(this,e))},t.RenderTexture.prototype.init=function(){this._bitmapData=document.createElement("canvas"),this._bitmapData.avaliable=!0,this.canvasContext=this._bitmapData.getContext("2d"),i.initWebGLCanvas(),this._webglBitmapData=t.RenderTexture.WebGLCanvas,this.renderContext=t.RenderTexture.WebGLRenderer},t.RenderTexture.prototype.setSize=function(t,e){if(this._webglBitmapData&&this.renderContext.setSize(t,e),this._bitmapData){var i=this._bitmapData;i.width=t,i.height=e,i.style.width=t+"px",i.style.height=e+"px"}},t.RenderTexture.prototype.end=function(){},t.RenderTexture.prototype.drawToTexture=function(e,i,n){if(0==(o=i||e.getBounds(t.Rectangle.identity)).width||0==o.height)return!1;void 0===n&&(n=1),this._bitmapData||this.init();var r=o.x,s=o.y,a=o.width,o=(o=o.height)/n,h=t.MainContext.instance.rendererContext._texture_scale_factor;a=Math.round(a/n),o=Math.round(o);this.setSize(a,o);var l=this._bitmapData,c=a/h*n,u=o/h*n;if(l.width=c,l.height=u,l.style.width=c+"px",l.style.height=u+"px",this.begin(),e._worldTransform.identity(),l=e._DO_Props_._anchorOffsetX,c=e._DO_Props_._anchorOffsetY,0==e._DO_Props_._anchorX&&0==e._DO_Props_._anchorY||(l=e._DO_Props_._anchorX*a,c=e._DO_Props_._anchorY*o),this._offsetX=r+l,this._offsetY=s+c,e._worldTransform.append(1,0,0,1,-this._offsetX,-this._offsetY),i&&(this._offsetX-=r,this._offsetY-=s),e.worldAlpha=1,i=t.MainContext.__use_new_draw,t.MainContext.__use_new_draw=!1,e instanceof t.DisplayObjectContainer)for(s=0,l=(r=e._children).length;s<l;s++)r[s]._updateTransform();return this.renderContext.setTransform(e._worldTransform),s=(r=t.RenderFilter.getInstance())._drawAreaList.concat(),r._drawAreaList.length=0,(l=this.renderContext.gl).viewport(0,0,a,o),l.bindFramebuffer(l.FRAMEBUFFER,null),l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT),this.renderContext.onRenderStart(),t.Texture.deleteWebGLTexture(this),e._hasFilters()&&e._setGlobalFilters(this.renderContext),(l=e.mask||e._DO_Props_._scrollRect)&&this.renderContext.pushMask(l),e._render(this.renderContext),this.renderContext._drawWebGL(),t.MainContext.__use_new_draw=i,l&&this.renderContext.popMask(),e._hasFilters()&&e._removeGlobalFilters(this.renderContext),t.RenderTexture.identityRectangle.width=a,t.RenderTexture.identityRectangle.height=o,r.addDrawArea(t.RenderTexture.identityRectangle),this.renderContext.onRenderFinish(),r._drawAreaList=s,this._sourceWidth=a/h*n,this._sourceHeight=o/h*n,this._textureWidth=a*n,this._textureHeight=o*n,this.canvasContext.drawImage(this._webglBitmapData,0,0,a,o,0,0,this._sourceWidth,this._sourceHeight),!0})},n.createCanvas=function(){if(!(e=t.Browser.getInstance().$("#egretCanvas"))){var e,i=document.getElementById(t.StageDelegate.canvas_div_name);(e=t.Browser.getInstance().$new("canvas")).id="egretCanvas",i.appendChild(e)}return t.MainContext.instance.stage.addEventListener(t.Event.RESIZE,this.onResize,this),e},n.onResize=function(){this.setSize(t.MainContext.instance.stage.stageWidth,t.MainContext.instance.stage.stageHeight)},n.setSize=function(e,i){var n=document.getElementById(t.StageDelegate.canvas_div_name);this.canvas&&(this.canvas.width=e,this.canvas.height=i,this.canvas.style.width=n.style.width,this.canvas.style.height=n.style.height,this.projectionX=this.canvas.width/2,this.projectionY=-this.canvas.height/2),this.html5Canvas&&(this.html5Canvas.width=e,this.html5Canvas.height=i,this.html5Canvas.style.width=n.style.width,this.html5Canvas.style.height=n.style.height),this.width=e,this.height=i},n.handleContextLost=function(){this.contextLost=!0},n.handleContextRestored=function(){this.initWebGL(),this.shaderManager.setContext(this.gl),this.contextLost=!1},n.initWebGL=function(){for(var e,n={},r=["experimental-webgl","webgl"],s=0;s<r.length;s++){try{e=this.canvas.getContext(r[s],n)}catch(t){}if(e)break}e||t.$error(1021),i.glID++,this.glID=i.glID,this.setContext(e)},n.setContext=function(t){this.gl=t,t.id=this.glContextId++,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),t.colorMask(!0,!0,!0,!0)},n.start=function(){if(!this.contextLost){var t,e=this.gl;e.activeTexture(e.TEXTURE0),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t="colorTransform"==this.filterType?this.shaderManager.colorTransformShader:"blur"==this.filterType?this.shaderManager.blurShader:this.shaderManager.defaultShader,this.shaderManager.activateShader(t),t.syncUniforms(),e.uniform2f(t.projectionVector,this.projectionX,this.projectionY);var i=4*this.vertSize;e.vertexAttribPointer(t.aVertexPosition,2,e.FLOAT,!1,i,0),e.vertexAttribPointer(t.aTextureCoord,2,e.FLOAT,!1,i,8),e.vertexAttribPointer(t.colorAttribute,2,e.FLOAT,!1,i,16)}},n.clearScreen=function(){var e=this.gl;e.colorMask(!0,!0,!0,!0);for(var i=t.RenderFilter.getInstance().getDrawAreaList(),n=0,r=i.length;n<r;n++){var s=i[n];e.viewport(s.x,s.y,s.width,s.height),e.bindFramebuffer(e.FRAMEBUFFER,null),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)}e.viewport(0,0,this.width,this.height),this.renderCost=0},n.setBlendMode=function(e){if(e||(e=t.BlendMode.NORMAL),this.currentBlendMode!=e){var i=t.RendererContext.blendModesForGL[e];i&&(this._drawWebGL(),this.gl.blendFunc(i[0],i[1]),this.currentBlendMode=e)}},n.drawRepeatImage=function(e,i,n,r,s,a,o,h,l,c){for(r*=c=t.MainContext.instance.rendererContext._texture_scale_factor,s*=c;a<h;a+=r)for(var u=o;u<l;u+=s){var _=Math.min(r,h-a),d=Math.min(s,l-u);this.drawImage(e,i,n,_/c,d/c,a,u,_,d)}},n.drawImage=function(t,e,i,n,r,s,a,o,h,l){if(void 0===l&&(l=void 0),!this.contextLost){var c=t._bitmapData;if(c&&c.avaliable)if(void 0!==l)this.drawRepeatImage(t,e,i,n,r,s,a,o,h,l);else{if(this.filters)for(l=0;1>l;l++)if("glow"==this.filters[0].type)return void this.useGlow(t,e,i,n,r,s,a,o,h);this._drawImage(t,e,i,n,r,s,a,o,h)}}},n._drawImage=function(t,e,i,n,r,s,a,o,h){this.createWebGLTexture(t),((p=t._bitmapData.webGLTexture[this.glID])!==this.currentBaseTexture||this.currentBatchSize>=this.size-1)&&(this._drawWebGL(),this.currentBaseTexture=p);var l=this.worldTransform,c=l.a,u=l.b,_=l.c,d=l.d,g=l.tx,f=l.ty;0==s&&0==a||l.append(1,0,0,1,s,a),1==n/o&&1==r/h||l.append(o/n,0,0,h/r,0,0),s=l.a,a=l.b,o=l.c,h=l.d;var p=l.tx,m=l.ty;l.a=c,l.b=u,l.c=_,l.d=d,l.tx=g,l.ty=f,c=t._sourceWidth,u=t._sourceHeight,t=n,l=r,e/=c,i/=u,n/=c,r/=u,c=this.vertices,u=4*this.currentBatchSize*this.vertSize,_=this.worldAlpha,c[u++]=p,c[u++]=m,c[u++]=e,c[u++]=i,c[u++]=_,c[u++]=s*t+p,c[u++]=a*t+m,c[u++]=n+e,c[u++]=i,c[u++]=_,c[u++]=s*t+o*l+p,c[u++]=h*l+a*t+m,c[u++]=n+e,c[u++]=r+i,c[u++]=_,c[u++]=o*l+p,c[u++]=h*l+m,c[u++]=e,c[u++]=r+i,c[u++]=_,this.currentBatchSize++},n.useGlow=function(e,n,r,s,a,o,h,l,c){var u=this.filters[0],_=u.distance||0,d=u.angle||0,g=0,f=0;0!=_&&0!=d&&(g=Math.ceil(_*t.NumberUtils.cos(d)),f=Math.ceil(_*t.NumberUtils.sin(d)));_=u.quality,d=u.blurX/10;var p=u.blurY/10,m=l+2*d+20+Math.abs(g),v=c+2*p+20+Math.abs(f);i.initWebGLCanvas();var y=t.RenderTexture.WebGLRenderer,T=t.RenderTexture.WebGLCanvas,x=t.RenderTexture.create();x._bitmapData||x.init(),x.setSize(m,v),x._sourceWidth=m,x._sourceHeight=v;var b=t.RenderTexture.create();for(b._bitmapData||b.init(),b.setSize(m,v),b._sourceWidth=m,b._sourceHeight=v,y.clearScreen(),y.filterType="colorTransform",y.setGlobalColorTransform([0,0,0,0,u._red,0,0,0,0,u._green,0,0,0,0,u._blue,0,0,0,0,255*u.alpha]),y.setAlpha(1,t.BlendMode.NORMAL),y.setTransform(new t.Matrix(1,0,0,1,0,0)),y.drawImage(e,n,r,s,a,d+10,p+10,l,c),y._drawWebGL(),y.filterType=null,x.canvasContext.clearRect(0,0,m,v),x.canvasContext.drawImage(T,0,0,m,v,0,0,m,v),y.clearScreen(),y.setAlpha(1,t.BlendMode.NORMAL),y.setTransform(new t.Matrix(1,0,0,1,0,0)),y.filterType="blur",y.setBlurData(d,0),t.Texture.deleteWebGLTexture(x),y.drawImage(x,d,p,m-2*d,v-2*p,d,p,m-2*d,v-2*p),y._drawWebGL(),y.filterType=null,b.canvasContext.clearRect(0,0,m,v),b.canvasContext.drawImage(T,0,0,m,v,0,0,m,v),y.clearScreen(),y.setAlpha(1,t.BlendMode.NORMAL),y.setTransform(new t.Matrix(1,0,0,1,0,0)),y.filterType="blur",y.setBlurData(0,p),t.Texture.deleteWebGLTexture(b),y.drawImage(b,0,p,m,v-2*p,0,p+5,m,v-2*p),y._drawWebGL(),y.filterType=null,x.canvasContext.clearRect(0,0,m,v),x.canvasContext.drawImage(T,0,0,m,v,0,0,m,v),y.clearScreen(),y.setAlpha(1,t.BlendMode.NORMAL),y.setTransform(new t.Matrix(1,0,0,1,0,0)),t.Texture.deleteWebGLTexture(x),u=0;u<_;u++)y.drawImage(x,0,0,m,v,g,f,m,v);y._drawWebGL(),y.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),y.currentBlendMode=null,y.drawImage(e,n,r,s,a,o+d+10,h+p+15,l,c),y._drawWebGL(),b.canvasContext.clearRect(0,0,m,v),b.canvasContext.drawImage(T,0,0,m,v,0,0,m,v),t.Texture.deleteWebGLTexture(b),this._drawImage(b,0,0,m,v,o-d-10,h-p-15,m,v),this._drawWebGL(),t.RenderTexture.release(x),t.RenderTexture.release(b)},n._drawWebGL=function(){if(0!=this.currentBatchSize&&!this.contextLost){var e=t.getTimer();this.start();var i=this.gl;i.bindTexture(i.TEXTURE_2D,this.currentBaseTexture);var n=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);i.bufferSubData(i.ARRAY_BUFFER,0,n),i.drawElements(i.TRIANGLES,6*this.currentBatchSize,i.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderCost+=t.getTimer()-e,t.Profiler.getInstance().onDrawImage()}},n.setTransform=function(t){var e=this.worldTransform;e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.tx=t.tx,e.ty=t.ty},n.setAlpha=function(t,e){this.worldAlpha=t,this.setBlendMode(e)},n.createWebGLTexture=function(t){if((t=t._bitmapData).webGLTexture||(t.webGLTexture={}),!t.webGLTexture[this.glID]){var e=this.gl;t.webGLTexture[this.glID]=e.createTexture(),t.webGLTexture[this.glID].glContext=e,e.bindTexture(e.TEXTURE_2D,t.webGLTexture[this.glID]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null)}},n.pushMask=function(t){this._drawWebGL();var e=this.gl;0==this.maskList.length&&e.enable(e.SCISSOR_TEST),t=this.getScissorRect(t),this.maskList.push(t),this.scissor(t.x,t.y,t.width,t.height)},n.getScissorRect=function(e){var i,n,r,s=this.maskList[this.maskList.length-1];return s?s.intersects(s)?(i=Math.max(e.x+this.worldTransform.tx,s.x),n=Math.max(e.y+this.worldTransform.ty,s.y),r=Math.min(e.x+this.worldTransform.tx+e.width,s.x+s.width)-i,e=Math.min(e.y+this.worldTransform.ty+e.height,s.y+s.height)-n):e=r=n=i=0:(i=e.x+this.worldTransform.tx,n=e.y+this.worldTransform.ty,r=e.width,e=e.height),(s=this.maskDataFreeList.pop())?(s.x=i,s.y=n,s.width=r,s.height=e):s=new t.Rectangle(i,n,r,e),s},n.popMask=function(){this._drawWebGL();var t=this.gl,e=this.maskList.pop();this.maskDataFreeList.push(e),0!=(e=this.maskList.length)?(0<(e=this.maskList[e-1]).width||0<e.height)&&this.scissor(e.x,e.y,e.width,e.height):t.disable(t.SCISSOR_TEST)},n.scissor=function(e,i,n,r){0>n&&(n=0),0>r&&(r=0),this.gl.scissor(e,-i+t.MainContext.instance.stage.stageHeight-r,n,r)},n.setGlobalColorTransform=function(t){if(this.colorTransformMatrix!=t&&(this._drawWebGL(),this.colorTransformMatrix=t)){t=t.concat();var e=this.shaderManager.colorTransformShader;e.uniforms.colorAdd.value.w=t.splice(19,1)[0]/255,e.uniforms.colorAdd.value.z=t.splice(14,1)[0]/255,e.uniforms.colorAdd.value.y=t.splice(9,1)[0]/255,e.uniforms.colorAdd.value.x=t.splice(4,1)[0]/255,e.uniforms.matrix.value=t}},n.setBlurData=function(t,e){var i=this.shaderManager.blurShader;i.uniforms.blur.value.x=t,i.uniforms.blur.value.y=e},n.setGlobalFilters=function(t){this._drawWebGL(),this.setFilterProperties(t)},n.setFilterProperties=function(t){if((this.filters=t)&&t.length)for(var e=0;1>e;e++){var i=t[e];switch(this.filterType=i.type,i.type){case"blur":this.setBlurData(i.blurX,i.blurY);break;case"colorTransform":this.setGlobalColorTransform(i._matrix)}}else this.filterType=null},n.setupFont=function(t,e){void 0===e&&(e=null),this.canvasContext.setupFont(t,e)},n.measureText=function(t){return this.canvasContext.measureText(t)},n.renderGraphics=function(t){this._drawWebGL();var e=this.gl,i=this.shaderManager.primitiveShader;this.graphicsPoints?(this.graphicsPoints.length=0,this.graphicsIndices.length=0):(this.graphicsPoints=[],this.graphicsIndices=[],this.graphicsBuffer=e.createBuffer(),this.graphicsIndexBuffer=e.createBuffer()),this.updateGraphics(t),this.shaderManager.activateShader(i),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.uniformMatrix3fv(i.translationMatrix,!1,this.worldTransform.toArray(!0)),e.uniform2f(i.projectionVector,this.projectionX,-this.projectionY),e.uniform2f(i.offsetVector,0,0),e.uniform3fv(i.tintColor,[1,1,1]),e.uniform1f(i.alpha,this.worldAlpha),e.bindBuffer(e.ARRAY_BUFFER,this.graphicsBuffer),e.vertexAttribPointer(i.aVertexPosition,2,e.FLOAT,!1,24,0),e.vertexAttribPointer(i.colorAttribute,4,e.FLOAT,!1,24,8),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.graphicsIndexBuffer),e.drawElements(e.TRIANGLE_STRIP,this.graphicsIndices.length,e.UNSIGNED_SHORT,0),this.shaderManager.activateShader(this.shaderManager.defaultShader)},n.updateGraphics=function(t){var e=this.gl;this.buildRectangle(t),e.bindBuffer(e.ARRAY_BUFFER,this.graphicsBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.graphicsPoints),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.graphicsIndexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.graphicsIndices),e.STATIC_DRAW)},n.buildRectangle=function(t){var e=t.x,i=t.y,n=t.w;t=t.h;var r=this.graphicsStyle.a,s=this.graphicsStyle.r*r,a=this.graphicsStyle.g*r,o=this.graphicsStyle.b*r,h=this.graphicsPoints,l=this.graphicsIndices,c=h.length/6;h.push(e,i),h.push(s,a,o,r),h.push(e+n,i),h.push(s,a,o,r),h.push(e,i+t),h.push(s,a,o,r),h.push(e+n,i+t),h.push(s,a,o,r),l.push(c,c,c+1,c+2,c+3,c+3)},n.setGraphicsStyle=function(t,e,i,n){this.graphicsStyle.r=t,this.graphicsStyle.g=e,this.graphicsStyle.b=i,this.graphicsStyle.a=n},i.glID=0,i.isInit=!1,i}(t.RendererContext);t.WebGLRenderer=e,e.prototype.__class__="egret.WebGLRenderer"}(egret||(egret={})),function(t){t.beginFill=function(t,i){void 0===i&&(i=1),this._pushCommand(new e(this._setStyle,this,[(t>>16)/255,((65280&t)>>8)/255,(255&t)/255,i]))},t.beginGradientFill=function(t,e,i,n,r){},t.drawRect=function(t,i,n,r){this._pushCommand(new e((function(t){this.renderContext.renderGraphics(t)}),this,[{x:t,y:i,w:n,h:r}])),this._checkRect(t,i,n,r)},t.drawCircle=function(t,e,i){},t.drawRoundRect=function(t,e,i,n,r,s){},t.drawEllipse=function(t,e,i,n){},t.lineStyle=function(t,e,i,n,r,s,a,o){},t.lineTo=function(t,e){},t.curveTo=function(t,e,i,n){},t.cubicCurveTo=function(t,e,i,n,r,s){},t.moveTo=function(t,e){},t.clear=function(){this._maxY=this._maxX=this._minY=this._minX=this.commandQueue.length=0},t.endFill=function(){},t._pushCommand=function(t){this.commandQueue.push(t)},t._draw=function(t){var e=this.commandQueue.length;if(0!=e)for(this.renderContext=t,t=0;t<e;t++){var i=this.commandQueue[t];i.method.apply(i.thisObject,i.args)}};var e=function(t,e,i){this.method=t,this.thisObject=e,this.args=i};e.prototype.__class__="egret_webgl_graphics.Command",t._setStyle=function(t,e,i,n){this.renderContext.setGraphicsStyle(t,e,i,n)},t.init=function(){for(var e in t)egret.Graphics.prototype[e]=t[e]}}(egret_webgl_graphics||(egret_webgl_graphics={})),function(t){var e=function(){function e(){}return e.compileProgram=function(i,n,r){r=e.compileFragmentShader(i,r),n=e.compileVertexShader(i,n);var s=i.createProgram();return i.attachShader(s,n),i.attachShader(s,r),i.linkProgram(s),i.getProgramParameter(s,i.LINK_STATUS)||t.$warn(1020),s},e.compileFragmentShader=function(t,i){return e._compileShader(t,i,t.FRAGMENT_SHADER)},e.compileVertexShader=function(t,i){return e._compileShader(t,i,t.VERTEX_SHADER)},e._compileShader=function(e,i,n){return n=e.createShader(n),e.shaderSource(n,i),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)?n:(t.Logger.info(e.getShaderInfoLog(n)),null)},e.checkCanUseWebGL=function(){if(null==e.canUseWebGL)try{var t=document.createElement("canvas");e.canUseWebGL=!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){e.canUseWebGL=!1}return e.canUseWebGL},e}();t.WebGLUtils=e,e.prototype.__class__="egret.WebGLUtils"}(egret||(egret={})),function(t){var e=function(){function e(t){this.defaultVertexSrc="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aColor;\nuniform vec2 projectionVector;\nuniform vec2 offsetVector;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\n   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.x, aColor.x, aColor.x, aColor.x);\n}",this.program=this.gl=null,this.fragmentSrc="precision lowp float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main(void) {\ngl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;\n}",this.uniforms=null,this.gl=t,this.init()}var i=e.prototype;return i.init=function(){var e=this.gl,i=t.WebGLUtils.compileProgram(e,this.defaultVertexSrc,this.fragmentSrc);for(var n in e.useProgram(i),this.uSampler=e.getUniformLocation(i,"uSampler"),this.projectionVector=e.getUniformLocation(i,"projectionVector"),this.offsetVector=e.getUniformLocation(i,"offsetVector"),this.dimensions=e.getUniformLocation(i,"dimensions"),this.aVertexPosition=e.getAttribLocation(i,"aVertexPosition"),this.aTextureCoord=e.getAttribLocation(i,"aTextureCoord"),this.colorAttribute=e.getAttribLocation(i,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute],this.uniforms)this.uniforms[n].uniformLocation=e.getUniformLocation(i,n);this.initUniforms(),this.program=i},i.initUniforms=function(){if(this.uniforms){var t,e,i=this.gl;for(e in this.uniforms){var n=(t=this.uniforms[e]).type;"mat2"===n||"mat3"===n||"mat4"===n?(t.glMatrix=!0,t.glValueLength=1,"mat2"===n?t.glFunc=i.uniformMatrix2fv:"mat3"===n?t.glFunc=i.uniformMatrix3fv:"mat4"===n&&(t.glFunc=i.uniformMatrix4fv)):(t.glFunc=i["uniform"+n],t.glValueLength="2f"===n||"2i"===n?2:"3f"===n||"3i"===n?3:"4f"===n||"4i"===n?4:1)}}},i.syncUniforms=function(){if(this.uniforms){var t,e,i=this.gl;for(e in this.uniforms)1===(t=this.uniforms[e]).glValueLength?!0===t.glMatrix?t.glFunc.call(i,t.uniformLocation,t.transpose,t.value):t.glFunc.call(i,t.uniformLocation,t.value):2===t.glValueLength?t.glFunc.call(i,t.uniformLocation,t.value.x,t.value.y):3===t.glValueLength?t.glFunc.call(i,t.uniformLocation,t.value.x,t.value.y,t.value.z):4===t.glValueLength&&t.glFunc.call(i,t.uniformLocation,t.value.x,t.value.y,t.value.z,t.value.w)}},e}();t.EgretShader=e,e.prototype.__class__="egret.EgretShader"}(egret||(egret={})),function(t){var e=function(t){function e(e){t.call(this,e),this.fragmentSrc="precision mediump float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform float invert;\nuniform mat4 matrix;\nuniform vec4 colorAdd;\nuniform sampler2D uSampler;\nvoid main(void) {\nvec4 texColor = texture2D(uSampler, vTextureCoord);\nvec4 locColor = texColor * matrix;\nif(texColor.a != 0.0){\nlocColor += colorAdd;\n}\ngl_FragColor = vColor*vec4(locColor.rgb*locColor.a,locColor.a);\n}",this.uniforms={matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},colorAdd:{type:"4f",value:{x:0,y:0,z:0,w:0}}},this.init()}return __extends(e,t),e}(t.EgretShader);t.ColorTransformShader=e,e.prototype.__class__="egret.ColorTransformShader"}(egret||(egret={})),function(t){var e=function(t){function e(e){t.call(this,e),this.fragmentSrc="precision mediump float;uniform vec2 blur;uniform sampler2D uSampler;varying vec2 vTextureCoord;void main(){gl_FragColor = vec4(0.0);gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.028 * blur.x, -0.028 * blur.y))) * 0.0044299121055113265;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.024 * blur.x, -0.024 * blur.y))) * 0.00895781211794;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.020 * blur.x, -0.020 * blur.y))) * 0.0215963866053;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.016 * blur.x, -0.016 * blur.y))) * 0.0443683338718;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.012 * blur.x, -0.012 * blur.y))) * 0.0776744219933;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.008 * blur.x, -0.008 * blur.y))) * 0.115876621105;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.004 * blur.x, -0.004 * blur.y))) * 0.147308056121;gl_FragColor += texture2D(uSampler, vTextureCoord) * 0.159576912161;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.004 * blur.x,  0.004 * blur.y))) * 0.147308056121;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.008 * blur.x,  0.008 * blur.y))) * 0.115876621105;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.012 * blur.x,  0.012 * blur.y))) * 0.0776744219933;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.016 * blur.x,  0.016 * blur.y))) * 0.0443683338718;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.020 * blur.x,  0.020 * blur.y))) * 0.0215963866053;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.024 * blur.x,  0.024 * blur.y))) * 0.00895781211794;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.028 * blur.x,  0.028 * blur.y))) * 0.0044299121055113265;}",this.uniforms={blur:{type:"2f",value:{x:2,y:2}}},this.init()}return __extends(e,t),e}(t.EgretShader);t.BlurShader=e,e.prototype.__class__="egret.BlurShader"}(egret||(egret={})),function(t){var e=function(){function e(t){this.alpha=this.translationMatrix=this.attributes=this.colorAttribute=this.aVertexPosition=this.tintColor=this.offsetVector=this.projectionVector=this.program=this.gl=null,this.fragmentSrc="precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n   gl_FragColor = vColor;\n}",this.vertexSrc="attribute vec2 aVertexPosition;\nattribute vec4 aColor;\nuniform mat3 translationMatrix;\nuniform vec2 projectionVector;\nuniform vec2 offsetVector;\nuniform float alpha;\nuniform vec3 tint;\nvarying vec4 vColor;\nvoid main(void) {\n   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);\n   v -= offsetVector.xyx;\n   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);\n   vColor = aColor * vec4(tint * alpha, alpha);\n}",this.gl=t,this.init()}return e.prototype.init=function(){var e=this.gl,i=t.WebGLUtils.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(i),this.projectionVector=e.getUniformLocation(i,"projectionVector"),this.offsetVector=e.getUniformLocation(i,"offsetVector"),this.tintColor=e.getUniformLocation(i,"tint"),this.aVertexPosition=e.getAttribLocation(i,"aVertexPosition"),this.colorAttribute=e.getAttribLocation(i,"aColor"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=e.getUniformLocation(i,"translationMatrix"),this.alpha=e.getUniformLocation(i,"alpha"),this.program=i},e}();t.PrimitiveShader=e,e.prototype.__class__="egret.PrimitiveShader"}(egret||(egret={})),function(t){var e=function(){function e(t){this.gl=null,this.maxAttibs=10,this.attribState=[],this.tempAttribState=[],this.blurShader=this.colorTransformShader=this.primitiveShader=this.defaultShader=this.currentShader=null;for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.setContext(t)}var i=e.prototype;return i.setContext=function(e){this.gl=e,this.primitiveShader=new t.PrimitiveShader(e),this.defaultShader=new t.EgretShader(e),this.colorTransformShader=new t.ColorTransformShader(e),this.blurShader=new t.BlurShader(e),this.activateShader(this.defaultShader)},i.activateShader=function(t){this.currentShader!=t&&(this.gl.useProgram(t.program),this.setAttribs(t.attributes),this.currentShader=t)},i.setAttribs=function(t){var e,i;for(i=this.tempAttribState.length,e=0;e<i;e++)this.tempAttribState[e]=!1;for(i=t.length,e=0;e<i;e++)this.tempAttribState[t[e]]=!0;for(t=this.gl,i=this.attribState.length,e=0;e<i;e++)this.attribState[e]!==this.tempAttribState[e]&&(this.attribState[e]=this.tempAttribState[e],this.tempAttribState[e]?t.enableVertexAttribArray(e):t.disableVertexAttribArray(e))},e}();t.WebGLShaderManager=e,e.prototype.__class__="egret.WebGLShaderManager"}(egret||(egret={})),function(t){var e=function(e){function i(){e.call(this),t.Texture.createBitmapData=t.Texture._createBitmapDataForCanvasAndWebGl}__extends(i,e);var n=i.prototype;return n.initVersion=function(t){this._versionCtr=t},n.proceed=function(e){if(e.dataFormat==t.URLLoaderDataFormat.TEXTURE)this.loadTexture(e);else if(e.dataFormat==t.URLLoaderDataFormat.SOUND)t.Html5Capatibility._audioType==t.AudioType.WEB_AUDIO?this.loadWebAudio(e):t.Html5Capatibility._audioType==t.AudioType.QQ_AUDIO?this.loadQQAudio(e):this.loadSound(e);else{var i=e._request,n=this.getXHR();n.onreadystatechange=function(){if(4==n.readyState)if(n.status!=e._status&&(e._status=n.status,t.HTTPStatusEvent.dispatchHTTPStatusEvent(e,n.status)),400<=n.status||0==n.status)t.IOErrorEvent.dispatchIOErrorEvent(e);else{switch(e.dataFormat){case t.URLLoaderDataFormat.TEXT:e.data=n.responseText;break;case t.URLLoaderDataFormat.VARIABLES:e.data=new t.URLVariables(n.responseText);break;case t.URLLoaderDataFormat.BINARY:e.data=n.response;break;default:e.data=n.responseText}t.__callAsync(t.Event.dispatchEvent,t.Event,e,t.Event.COMPLETE)}};var r=this.getVirtualUrl(t.NetContext._getUrl(i));n.open(i.method,r,!0),this.setResponseType(n,e.dataFormat),i.method!=t.URLRequestMethod.GET&&i.data?i.data instanceof t.URLVariables?(n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(i.data.toString())):(n.setRequestHeader("Content-Type","multipart/form-data"),n.send(i.data)):n.send()}},n.loadSound=function(e){function i(r){t.clearTimeout(s.__timeoutId),s.removeEventListener("canplaythrough",i,!1),s.removeEventListener("error",n,!1),(r=new t.Html5Audio)._setAudio(s);var a=new t.Sound;a._setAudio(r),e.data=a,t.__callAsync(t.Event.dispatchEvent,t.Event,e,t.Event.COMPLETE)}function n(r){t.clearTimeout(s.__timeoutId),s.removeEventListener("canplaythrough",i,!1),s.removeEventListener("error",n,!1),t.IOErrorEvent.dispatchIOErrorEvent(e)}var r=this.getVirtualUrl(e._request.url),s=new Audio(r);s.__timeoutId=t.setTimeout(i,this,100),s.addEventListener("canplaythrough",i,!1),s.addEventListener("error",n,!1),s.load()},n.loadQQAudio=function(e){var i=t.Html5Capatibility._QQRootPath+this.getVirtualUrl(e._request.url);QZAppExternal.preloadSound((function(n){if(0==n.code){(n=new t.QQAudio)._setPath(i);var r=new t.Sound;r._setAudio(n),e.data=r,t.__callAsync(t.Event.dispatchEvent,t.Event,e,t.Event.COMPLETE)}else t.IOErrorEvent.dispatchIOErrorEvent(e)}),{bid:-1,url:i,refresh:1})},n.loadWebAudio=function(e){var i=this.getVirtualUrl(e._request.url),n=new XMLHttpRequest;n.open("GET",i,!0),n.responseType="arraybuffer",n.onload=function(){var i=new t.WebAudio;i._setArrayBuffer(n.response,(function(){var n=new t.Sound;n._setAudio(i),e.data=n,t.__callAsync(t.Event.dispatchEvent,t.Event,e,t.Event.COMPLETE)}))},n.send()},n.getXHR=function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")},n.setResponseType=function(e,i){switch(i){case t.URLLoaderDataFormat.TEXT:case t.URLLoaderDataFormat.VARIABLES:e.responseType=t.URLLoaderDataFormat.TEXT;break;case t.URLLoaderDataFormat.BINARY:e.responseType="arraybuffer";break;default:e.responseType=i}},n.loadTexture=function(e){var i=this.getVirtualUrl(e._request.url);t.Texture.createBitmapData(i,(function(i,n){if(0!=i)t.IOErrorEvent.dispatchIOErrorEvent(e);else{var r=new t.Texture;r._setBitmapData(n),e.data=r,t.__callAsync(t.Event.dispatchEvent,t.Event,e,t.Event.COMPLETE)}}))},n.getVirtualUrl=function(t){return this._versionCtr?this._versionCtr.getVirtualUrl(t):t},i}(t.NetContext);t.HTML5NetContext=e,e.prototype.__class__="egret.HTML5NetContext"}(egret||(egret={})),function(t){var e=function(e){function i(){if(e.call(this),this._isTouchDown=!1,this.rootDiv=null,this.rootDiv=document.getElementById(t.StageDelegate.canvas_div_name),!this.rootDiv){var i=document.getElementById(t.StageDelegate.egret_root_div);this.rootDiv=t.Browser.getInstance().$new("div"),this.rootDiv.id=t.StageDelegate.canvas_div_name,i.appendChild(this.rootDiv)}}__extends(i,e);var n=i.prototype;return n.prevent=function(e){e.stopPropagation(),1==e.isScroll||t.HTMLInput.getInstance().isInputOn()||e.preventDefault()},n.run=function(){var e=this;window.navigator.msPointerEnabled?(this.rootDiv.addEventListener("MSPointerDown",(function(t){e._onTouchBegin(t),e.prevent(t)}),!1),this.rootDiv.addEventListener("MSPointerMove",(function(t){e._onTouchMove(t),e.prevent(t)}),!1),this.rootDiv.addEventListener("MSPointerUp",(function(t){e._onTouchEnd(t),e.prevent(t)}),!1)):t.MainContext.deviceType==t.MainContext.DEVICE_MOBILE?this.addTouchListener():t.MainContext.deviceType==t.MainContext.DEVICE_PC&&(this.addTouchListener(),this.addMouseListener()),window.addEventListener("mousedown",(function(t){e.inOutOfCanvas(t)?e.dispatchLeaveStageEvent():e._isTouchDown=!0})),window.addEventListener("mouseup",(function(t){e._isTouchDown&&(e.inOutOfCanvas(t)?e.dispatchLeaveStageEvent():e._onTouchEnd(t)),e._isTouchDown=!1}))},n.addMouseListener=function(){var t=this;this.rootDiv.addEventListener("mousedown",(function(e){t._onTouchBegin(e)})),this.rootDiv.addEventListener("mousemove",(function(e){t._onTouchMove(e)})),this.rootDiv.addEventListener("mouseup",(function(e){t._onTouchEnd(e)}))},n.addTouchListener=function(){var t=this;this.rootDiv.addEventListener("touchstart",(function(e){for(var i=e.changedTouches.length,n=0;n<i;n++)t._onTouchBegin(e.changedTouches[n]);t.prevent(e)}),!1),this.rootDiv.addEventListener("touchmove",(function(e){for(var i=e.changedTouches.length,n=0;n<i;n++)t._onTouchMove(e.changedTouches[n]);t.prevent(e)}),!1),this.rootDiv.addEventListener("touchend",(function(e){for(var i=e.changedTouches.length,n=0;n<i;n++)t._onTouchEnd(e.changedTouches[n]);t.prevent(e)}),!1),this.rootDiv.addEventListener("touchcancel",(function(e){for(var i=e.changedTouches.length,n=0;n<i;n++)t._onTouchEnd(e.changedTouches[n]);t.prevent(e)}),!1)},n.inOutOfCanvas=function(e){e=(i=this.getLocation(this.rootDiv,e)).x;var i=i.y,n=t.MainContext.instance.stage;return 0>e||0>i||e>n.stageWidth||i>n.stageHeight},n.dispatchLeaveStageEvent=function(){this.touchingIdentifiers.length=0,t.MainContext.instance.stage.dispatchEventWith(t.Event.LEAVE_STAGE)},n._onTouchBegin=function(t){var e=this.getLocation(this.rootDiv,t),i=-1;t.hasOwnProperty("identifier")&&(i=t.identifier),this.onTouchBegan(e.x,e.y,i)},n._onTouchMove=function(t){var e=this.getLocation(this.rootDiv,t),i=-1;t.hasOwnProperty("identifier")&&(i=t.identifier),this.onTouchMove(e.x,e.y,i)},n._onTouchEnd=function(t){var e=this.getLocation(this.rootDiv,t),i=-1;t.hasOwnProperty("identifier")&&(i=t.identifier),this.onTouchEnd(e.x,e.y,i)},n.getLocation=function(e,i){var n,r,s=document.documentElement,a=window;"function"==typeof e.getBoundingClientRect?(n=(r=e.getBoundingClientRect()).left,r=r.top):r=n=0,n+=a.pageXOffset-s.clientLeft,r+=a.pageYOffset-s.clientTop,null!=i.pageX?(s=i.pageX,a=i.pageY):(n-=document.body.scrollLeft,r-=document.body.scrollTop,s=i.clientX,a=i.clientY);var o=t.Point.identity;return o.x=(s-n)/t.StageDelegate.getInstance().getScaleX(),o.y=(a-r)/t.StageDelegate.getInstance().getScaleY(),o},i}(t.TouchContext);t.HTML5TouchContext=e,e.prototype.__class__="egret.HTML5TouchContext"}(egret||(egret={})),function(t){var e=function(e){function n(){e.call(this),this._isNeedShow=!1,this.inputDiv=this.inputElement=null,this._gscaleY=this._gscaleX=0,this._isNeesHide=!1,this.textValue="",this._styleInfoes={},i.getInstance()}__extends(n,e);var r=n.prototype;return r._initElement=function(e,i,n,r){var s=t.StageDelegate.getInstance().getScaleX(),a=t.StageDelegate.getInstance().getScaleY();this.inputDiv.style.left=e*s+"px",this.inputDiv.style.top=i*a+"px",this._gscaleX=s*n,this._gscaleY=a*r},r._show=function(t,e,n,r){this._multiline=t,i.getInstance().isCurrentStageText(this)?this.inputElement.onblur=null:(this.inputElement=i.getInstance().getInputElement(this),this.inputDiv=i.getInstance()._inputDIV),this._isNeedShow=i.getInstance()._needShow=!0},r.onBlurHandler=function(){i.getInstance().clearInputElement(),window.scrollTo(0,0)},r.executeShow=function(){this.inputElement.value=this._getText(),null==this.inputElement.onblur&&(this.inputElement.onblur=this.onBlurHandler),this._resetStageText(),0<this._textfield._TF_Props_._maxChars?this.inputElement.setAttribute("maxlength",this._textfield._TF_Props_._maxChars):this.inputElement.removeAttribute("maxlength"),this.inputElement.selectionStart=this.inputElement.value.length,this.inputElement.selectionEnd=this.inputElement.value.length,this.inputElement.focus()},r._hide=function(){this._isNeesHide=!0,0<=t.Browser.getInstance().getUserAgent().indexOf("ios")&&i.getInstance().disconnectStageText(this)},r._getText=function(){return this.textValue||(this.textValue=""),this.textValue},r._setText=function(t){this.textValue=t,this.resetText()},r.resetText=function(){this.inputElement&&(this.inputElement.value=this.textValue)},r._onInput=function(){this.textValue=this.inputElement.value,t.Event.dispatchEvent(this,"updateText",!1)},r._onClickHandler=function(e){this._isNeedShow&&(e.stopImmediatePropagation(),this._isNeedShow=!1,this.executeShow(),this.dispatchEvent(new t.Event("focus")))},r._onDisconnect=function(){this.inputElement=null,this.dispatchEvent(new t.Event("blur"))},r.setElementStyle=function(t,e){this.inputElement&&this._styleInfoes[t]!=e&&(this.inputElement.style[t]=e)},r._removeInput=function(){this.inputElement&&i.getInstance().disconnectStageText(this)},r._resetStageText=function(){if(this.inputElement){var e=this._textfield,i=e._TF_Props_;this.setElementStyle("fontFamily",i._fontFamily),this.setElementStyle("fontStyle",i._italic?"italic":"normal"),this.setElementStyle("fontWeight",i._bold?"bold":"normal"),this.setElementStyle("textAlign",i._textAlign),this.setElementStyle("fontSize",i._size*this._gscaleY+"px"),this.setElementStyle("lineHeight",i._size*this._gscaleY+"px"),this.setElementStyle("color",i._textColorString),this.setElementStyle("width",e._getSize(t.Rectangle.identity).width*this._gscaleX+"px"),this.setElementStyle("height",e._getSize(t.Rectangle.identity).height*this._gscaleY+"px"),this.setElementStyle("verticalAlign",i._verticalAlign)}},n}(t.StageText);t.HTML5StageText=e,e.prototype.__class__="egret.HTML5StageText";var i=function(){function e(){this._needShow=!1}var i=e.prototype;return i.isInputOn=function(){return null!=this._stageText},i.isCurrentStageText=function(t){return this._stageText==t},i.initValue=function(t){t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.border="none",t.style.padding="0"},i._initStageDelegateDiv=function(){var i=this,n=t.Browser.getInstance().$("#StageDelegateDiv");n||((n=t.Browser.getInstance().$new("div")).id="StageDelegateDiv",document.getElementById(t.StageDelegate.egret_root_div).appendChild(n),i.initValue(n),n.style.width="0px",n.style.height="0px",i._inputDIV=t.Browser.getInstance().$new("div"),i.initValue(i._inputDIV),i._inputDIV.style.width="0px",i._inputDIV.style.height="0px",i._inputDIV.style.left="0px",i._inputDIV.style.top="-100px",i._inputDIV.style[t.Browser.getInstance().getTrans("transformOrigin")]="0% 0% 0px",n.appendChild(i._inputDIV),document.getElementById(t.StageDelegate.canvas_div_name).addEventListener("click",(function(n){i._needShow?(i._needShow=!1,t.MainContext.instance.stage._changeSizeDispatchFlag=!1,i._stageText._onClickHandler(n),e.getInstance().show()):i._inputElement&&(i.clearInputElement(),i._inputElement.blur(),i._inputElement=null)})),i.initInputElement(!0),i.initInputElement(!1))},i.initInputElement=function(t){var e=this;t?((t=document.createElement("textarea")).style.resize="none",e._multiElement=t,t.id="egretTextarea"):(t=document.createElement("input"),e._simpleElement=t,t.id="egretInput"),t.type="text",e._inputDIV.appendChild(t),t.setAttribute("tabindex","-1"),t.style.width="1px",t.style.height="12px",e.initValue(t),t.style.outline="thin",t.style.background="none",t.style.overflow="hidden",t.style.wordBreak="break-all",t.style.opacity=0,t.oninput=function(){e._stageText&&e._stageText._onInput()}},i.show=function(){var e=this._inputElement;t.__callAsync((function(){e.style.opacity=1}),this)},i.disconnectStageText=function(t){null!=this._stageText&&this._stageText!=t||(this.clearInputElement(),this._inputElement&&this._inputElement.blur())},i.clearInputElement=function(){this._inputElement&&(this._inputElement.value="",this._inputElement.onblur=null,this._inputElement.style.width="1px",this._inputElement.style.height="12px",this._inputElement.style.left="0px",this._inputElement.style.top="0px",this._inputElement.style.opacity=0,(this._simpleElement==this._inputElement?this._multiElement:this._simpleElement).style.display="block",this._inputDIV.style.left="0px",this._inputDIV.style.top="-100px"),this._stageText&&(this._stageText._onDisconnect(),this._stageText=null),t.MainContext.instance.stage._changeSizeDispatchFlag=!0},i.getInputElement=function(t){return this.clearInputElement(),this._stageText=t,this._inputElement=this._stageText._multiline?this._multiElement:this._simpleElement,(this._simpleElement==this._inputElement?this._multiElement:this._simpleElement).style.display="none",this._inputElement},e.getInstance=function(){return null==e._instance&&(e._instance=new t.HTMLInput),e._instance},e}();t.HTMLInput=i,i.prototype.__class__="egret.HTMLInput"}(egret||(egret={})),egret.StageText.create=function(){return egret.HTMLInput.getInstance()._initStageDelegateDiv(),new egret.HTML5StageText},function(t){var e=function(){function e(){this._loop=!1,this.paused=!0,this._listeners=[],this._onEndedCall=null,this._volume=1,this._startTime=0}var i=e.prototype;return i._play=function(e){this.removeListeners(),t.Html5Capatibility._audioMustLoad&&this._audio.load(),this.paused=!1,this._audio.autoplay=!0,this._audio.volume=this._volume;var i=this,n=function(t){i._audio.removeEventListener("ended",n),i._onEndedCall&&i._onEndedCall.call(null,t),i.clear()};this._audio.addEventListener("ended",n),this.initStart();try{this._audio.currentTime=this._startTime}catch(t){}finally{this._audio.play()}},i.clear=function(){try{this._audio.pause()}catch(t){}finally{this.removeListeners(),this._loop&&!this.paused&&this._play()}},i._pause=function(){this.paused=!0,this._audio.pause()},i._load=function(){this._audio.load()},i._setAudio=function(t){this._audio=t},i.initStart=function(){for(var t=0;t<this._listeners.length;t++){var e=this._listeners[t];this._audio.addEventListener(e.type,e.listener,e.useCapture)}},i._addEventListener=function(t,e,i){void 0===i&&(i=!1),"ended"==t?this._onEndedCall=e:(this._listeners.push({type:t,listener:e,useCapture:i}),this._audio&&this._audio.addEventListener(t,e,i))},i.removeListeners=function(){for(var t=0;t<this._listeners.length;t++){var e=this._listeners[t];this._audio&&this._audio.removeEventListener(e.type,e.listener,e.useCapture)}},i._removeEventListener=function(t,e,i){if(void 0===i&&(i=!1),"ended"==t)this._onEndedCall=null;else for(var n=0;n<this._listeners.length;n++){var r=this._listeners[n];if(r.listener==e&&r.useCapture==i&&r.type==t){this._listeners.splice(n,1),this._audio&&this._audio.removeEventListener(t,e,i);break}}},i._preload=function(e,i,n){void 0===i&&(i=null),void 0===n&&(n=null),t.callLater(i,n)},i._destroy=function(){},i._getVolume=function(){return this._volume},i._setVolume=function(t){this._volume=Math.max(0,Math.min(t,1)),this._audio.volume=this._volume},i._setLoop=function(t){this._loop=t},i._getCurrentTime=function(){return this._audio.currentTime},i._setCurrentTime=function(t){this._startTime=t},e}();t.Html5Audio=e,e.prototype.__class__="egret.Html5Audio"}(egret||(egret={})),function(t){var e=function(){function e(){this.context=e.ctx,this.bufferSource=null,this.paused=!0,this._loop=!1,this._listeners=[],this._onEndedCall=null,this._volume=1,this._currentTime=this._startTime=0,this.gain=e.ctx.createGain?e.ctx.createGain():e.ctx.createGainNode()}var i=e.prototype;return e.decodeAudios=function(){if(!(0>=e.decodeArr.length||e.isDecoding)){e.isDecoding=!0;var t=e.decodeArr.shift();e.ctx.decodeAudioData(t.buffer,(function(i){t.self.audioBuffer=i,t.callback&&t.callback(),e.isDecoding=!1,e.decodeAudios()}))}},i._play=function(t){var e=this;this.bufferSource&&(this.bufferSource.onended=null,this.removeListeners(),this.bufferSource=null),t=this.context;var i=this.gain,n=t.createBufferSource();this.bufferSource=n,this.addListeners(),n.buffer=this.audioBuffer,n.connect(i),i.connect(t.destination),n.onended=function(t){e.clear(),e._onEndedCall&&e._onEndedCall.call(null,t),e._loop&&!e.paused&&e._play()},this.paused=!1,this._startTime=Date.now(),this.gain.gain.value=this._volume,n.start(0,this._currentTime),this._currentTime=0},i.clear=function(){if(this.bufferSource){this.removeListeners();var t=this.bufferSource;t.stop?t.stop(0):t.noteOff(0),this.bufferSource.disconnect(),this.bufferSource=null}},i.addListeners=function(){for(var t=0;t<this._listeners.length;t++){var e=this._listeners[t];this.bufferSource.addEventListener(e.type,e.listener,e.useCapture)}},i.removeListeners=function(){for(var t=0;t<this._listeners.length;t++){var e=this._listeners[t];this.bufferSource.removeEventListener(e.type,e.listener,e.useCapture)}},i._pause=function(){this.paused=!0,this.clear()},i._addEventListener=function(t,e,i){void 0===i&&(i=!1),"ended"==t?this._onEndedCall=e:(this._listeners.push({type:t,listener:e,useCapture:i}),this.bufferSource&&this.bufferSource.addEventListener(t,e,i))},i._removeEventListener=function(t,e,i){if(void 0===i&&(i=!1),"ended"==t)this._onEndedCall=null;else for(var n=0;n<this._listeners.length;n++){var r=this._listeners[n];if(r.listener==e&&r.useCapture==i&&r.type==t){this._listeners.splice(n,1),this.bufferSource&&this.bufferSource.removeEventListener(t,e,i);break}}},i._load=function(){this._setArrayBuffer(this._arrayBuffer,null)},i._setArrayBuffer=function(t,i){this._arrayBuffer=t,e.decodeArr.push({buffer:t,callback:i,self:this}),e.decodeAudios()},i._preload=function(e,i,n){void 0===i&&(i=null),void 0===n&&(n=null),t.callLater(i,n)},i._getVolume=function(){return this._volume},i._setVolume=function(t){this._volume=t,this.gain.gain.value=t},i._setLoop=function(t){this._loop=t},i._getCurrentTime=function(){return this.bufferSource?(Date.now()-this._startTime)/1e3:0},i._setCurrentTime=function(t){this._currentTime=t},i._destroy=function(){},e.canUseWebAudio=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,e.ctx=e.canUseWebAudio?new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext):void 0,e.decodeArr=[],e.isDecoding=!1,e}();t.WebAudio=e,e.prototype.__class__="egret.WebAudio"}(egret||(egret={})),function(t){var e=function(){function e(){this._loop=!1,this._currentTime=0}var i=e.prototype;return i._play=function(e){this._type=e,e==t.Sound.EFFECT?QZAppExternal.playLocalSound((function(t){alert(JSON.stringify(t))}),{bid:-1,url:this._path,loop:this._loop?-1:0}):QZAppExternal.playLocalBackSound({bid:-1,url:this._path,loop:this._loop?-1:0})},i._pause=function(){this._type==t.Sound.EFFECT?QZAppExternal.stopSound():QZAppExternal.stopBackSound()},i._addEventListener=function(t,e,i){},i._removeEventListener=function(t,e,i){},i._load=function(){},i._preload=function(e,i,n){void 0===i&&(i=null),void 0===n&&(n=null),t.callLater(i,n)},i._setPath=function(t){this._path=t},i._getVolume=function(){return 1},i._setVolume=function(t){},i._setLoop=function(t){this._loop=t},i._getCurrentTime=function(){return 0},i._setCurrentTime=function(t){this._currentTime=t},i._destroy=function(){},e}();t.QQAudio=e,e.prototype.__class__="egret.QQAudio"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.QQ_AUDIO=1,t.WEB_AUDIO=2,t.HTML5_AUDIO=3,t}();t.AudioType=e,e.prototype.__class__="egret.AudioType";var i=function(){function t(){}return t.WPHONE=1,t.IOS=2,t.ADNROID=3,t}();t.SystemOSType=i,i.prototype.__class__="egret.SystemOSType";var n=function(n){function r(){n.call(this)}return __extends(r,n),r._init=function(){var n=navigator.userAgent.toLowerCase();r.ua=n,r._canUseBlob=!1,r._audioType=e.HTML5_AUDIO,r._AudioClass=t.Html5Audio,r._audioMustLoad=!0,0<=n.indexOf("windows phone")?(r._System_OS=i.WPHONE,r._audioMustLoad=!1):0<=n.indexOf("android")?(r._System_OS=i.ADNROID,0<=n.indexOf("ucbrowser")&&(r._audioMustLoad=!1),window.hasOwnProperty("QZAppExternal")&&0<=n.indexOf("qzone")&&(r._AudioClass=t.QQAudio,r._audioType=e.QQ_AUDIO,(n=document.getElementsByTagName("base"))&&0<n.length?r._QQRootPath=n[0].baseURI:(-1==(n=window.location.href.indexOf("?"))&&(n=window.location.href.length),n=(n=window.location.href.substring(0,n)).substring(0,n.lastIndexOf("/")),r._QQRootPath=n+"/"))):(0<=n.indexOf("iphone")||0<=n.indexOf("ipad")||0<=n.indexOf("ipod"))&&(r._System_OS=i.IOS,7<=r.getIOSVersion()&&(r._canUseBlob=!0,r._AudioClass=t.WebAudio,r._audioType=e.WEB_AUDIO)),window.URL||window.webkitURL||(r._canUseBlob=!1),window.AudioContext||window.webkitAudioContext||window.mozAudioContext||r._audioType!=e.WEB_AUDIO||(r._audioType=e.HTML5_AUDIO,r._AudioClass=t.Html5Audio)},r.getIOSVersion=function(){var t=r.ua.toLowerCase().match(/cpu [^\d]*\d.*like mac os x/)[0];return parseInt(t.match(/\d(_\d)*/)[0])||0},r._canUseBlob=!1,r._audioType=0,r._audioMustLoad=!1,r._QQRootPath="",r._System_OS=0,r.ua="",r}(t.HashObject);t.Html5Capatibility=n,n.prototype.__class__="egret.Html5Capatibility",n._init()}(egret||(egret={})),function(t){var e=function(e){function i(){e.call(this),this.localVersionDataPath="localVersion.manifest",this.localVersionData=null,this.changeVersionDataPath="version.manifest",this.changeVersionData=null,this.baseVersionDataPath="base.manifest",this.baseVersionData=null,this.localVersionCodePath="localCode.manifest",this.serverVersionCodePath="code.manifest",this._call=this._load=null}__extends(i,e);var n=i.prototype;return n.fetchVersion=function(){this._load=new t.NativeResourceLoader,this._load.addEventListener(t.IOErrorEvent.IO_ERROR,this.loadError,this),this._load.addEventListener(t.Event.COMPLETE,this.fileLoadComplete,this),this.initLocalVersionData()},n.initLocalVersionData=function(){var t=this.getData("appVersion.manifest",!0);if(t){if(1==t.debug){if(this.baseVersionData=null,t=this.getData(this.localVersionDataPath,!1))for(var e in t)this.deleteFile(e);return this.deleteFile(this.localVersionDataPath),this.deleteFile(this.localVersionCodePath),void this.loadOver()}var i=this.getData("appVersion.manifest",!1);if(null==i||i.version!=t.version){if(this.localVersionData=this.getData(this.localVersionDataPath,!0),null==this.localVersionData&&(this.localVersionData={}),this.deleteFile(this.localVersionCodePath),this.save("appVersion.manifest",JSON.stringify(t)),t=this.getData(this.localVersionCodePath,!1))for(e in t)t[e]!=this.localVersionData[e]&&this.deleteFile(e);else t={};for(e in this.localVersionData)t[e]!=this.localVersionData[e]&&this.deleteFile(e);return this.save(this.localVersionDataPath,JSON.stringify(this.localVersionData)),void this.loadCodeVersion()}}this.localVersionData=this.getLocalData(this.localVersionDataPath),null==this.localVersionData&&(this.localVersionData=this.getLocalData(this.baseVersionDataPath),null==this.localVersionData&&(this.localVersionData={}),this.save(this.localVersionDataPath,JSON.stringify(this.localVersionData))),this.loadCodeVersion()},n.deleteFile=function(t){egret_native.deleteUpdateFile&&egret_native.deleteUpdateFile(t)},n.loadCodeVersion=function(){var t=1;this.newCode=1;var e=this.getLocalData(this.localVersionCodePath);null!=e&&(t=e.code),null!=(e=this.getLocalData(this.serverVersionCodePath))&&(this.newCode=e.code),this.loadBaseVersion(t!=this.newCode)},n.loadBaseVersion=function(t){this.baseVersionData=this.getLocalData(this.baseVersionDataPath),this.changeVersionData=this.getLocalData(this.changeVersionDataPath);var e=this;null==e.baseVersionData||t?e.loadFile(e.baseVersionDataPath,(function(){e.baseVersionData=e.getLocalData(e.baseVersionDataPath),e.loadBaseOver()})):e.loadBaseOver()},n.loadBaseOver=function(){this.save(this.localVersionCodePath,JSON.stringify({code:this.newCode})),this.loadOver()},n.loadFile=function(t,e){void 0===e&&(e=null),this._call=e,this._load.load(t,1e3)},n.fileLoadComplete=function(t){this._call&&this._call()},n.loadError=function(e){this._load.removeEventListener(t.IOErrorEvent.IO_ERROR,this.loadError,this),this._load.removeEventListener(t.Event.COMPLETE,this.fileLoadComplete,this),this.dispatchEvent(e)},n.loadOver=function(){this._load.removeEventListener(t.IOErrorEvent.IO_ERROR,this.loadError,this),this._load.removeEventListener(t.Event.COMPLETE,this.fileLoadComplete,this),this.dispatchEvent(new t.Event(t.Event.COMPLETE))},n.save=function(t,e){egret_native.writeFileSync?egret_native.writeFileSync(t,e):egret_native.saveRecord&&egret_native.saveRecord(t,e)},n.getData=function(t,e){if(egret_native.readUpdateFileSync&&egret_native.readResourceFileSync){var i=e?egret_native.readResourceFileSync(t):egret_native.readUpdateFileSync(t);return null!=i?JSON.parse(i):null}return this.getLocalDataByOld(t)},n.getLocalData=function(t){if(egret_native.readUpdateFileSync&&egret_native.readResourceFileSync){var e=egret_native.readUpdateFileSync(t);return null!=e||null!=(e=egret_native.readResourceFileSync(t))?JSON.parse(e):null}return this.getLocalDataByOld(t)},n.getLocalDataByOld=function(t){var e=null;return egret_native.isRecordExists(t)?(t=egret_native.loadRecord(t),e=JSON.parse(t)):egret_native.isFileExists(t)&&(t=egret_native.readFileSync(t),e=JSON.parse(t)),e},n.getChangeList=function(){if(!this.baseVersionData)return[];var t,e={};for(t in this.changeVersionData)1==this.changeVersionData[t].d?delete this.baseVersionData[t]:this.baseVersionData[t]=this.changeVersionData[t];for(t in this.baseVersionData)null!=this.localVersionData[t]&&this.compareVersion(this.localVersionData,this.baseVersionData,t)||(e[t]={url:t,size:this.baseVersionData[t].s});var i=[];for(t in e)i.push(e[t]);return i},n.compareVersion=function(t,e,i){return null!=t[i]&&null!=e[i]&&t[i].v==e[i].v},n.checkIsNewVersion=function(t){return!this.baseVersionData||(null!=this.changeVersionData[t]?this.compareVersion(this.changeVersionData,this.localVersionData,t):null==this.baseVersionData[t]||this.compareVersion(this.baseVersionData,this.localVersionData,t))},n.saveVersion=function(t){if(this.baseVersionData){var e=!1;null!=this.changeVersionData[t]?this.compareVersion(this.changeVersionData,this.localVersionData,t)||(e=!0,this.localVersionData[t]=this.changeVersionData[t]):null==this.baseVersionData[t]||this.compareVersion(this.baseVersionData,this.localVersionData,t)||(e=!0,this.localVersionData[t]=this.baseVersionData[t]),e&&this.save(this.localVersionDataPath,JSON.stringify(this.localVersionData))}},n.getVirtualUrl=function(t){return t},i}(t.EventDispatcher);t.NativeVersionController=e,e.prototype.__class__="egret.NativeVersionController"}(egret||(egret={})),function(t){var e=function(t){function e(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n),this.itemsTotal=this.itemsLoaded=0,this.groupName="",this.resItem=null}return __extends(e,t),e.dispatchResourceEvent=function(t,i,n,r,s,a){void 0===n&&(n=""),void 0===r&&(r=null),void 0===s&&(s=0),void 0===a&&(a=0);var o=egret.Event._getPropertyData(e);o.groupName=n,o.resItem=r,o.itemsLoaded=s,o.itemsTotal=a,egret.Event._dispatchByTarget(e,t,i,o)},e.ITEM_LOAD_ERROR="itemLoadError",e.CONFIG_COMPLETE="configComplete",e.CONFIG_LOAD_ERROR="configLoadError",e.GROUP_PROGRESS="groupProgress",e.GROUP_COMPLETE="groupComplete",e.GROUP_LOAD_ERROR="groupLoadError",e}(egret.Event);t.ResourceEvent=e,e.prototype.__class__="RES.ResourceEvent"}(RES||(RES={})),function(t){var e=function(){function t(t,e,i){this.groupName="",this.data=null,this._loaded=!1,this.name=t,this.url=e,this.type=i}var e=t.prototype;return Object.defineProperty(e,"loaded",{get:function(){return this.data?this.data.loaded:this._loaded},set:function(t){this.data&&(this.data.loaded=t),this._loaded=t},enumerable:!0,configurable:!0}),e.toString=function(){return'[ResourceItem name="'+this.name+'" url="'+this.url+'" type="'+this.type+'"]'},t.TYPE_XML="xml",t.TYPE_IMAGE="image",t.TYPE_BIN="bin",t.TYPE_TEXT="text",t.TYPE_JSON="json",t.TYPE_SHEET="sheet",t.TYPE_FONT="font",t.TYPE_SOUND="sound",t}();t.ResourceItem=e,e.prototype.__class__="RES.ResourceItem"}(RES||(RES={})),function(t){var e=function(){function e(){this.keyMap={},this.groupDic={},t.configInstance=this}var i=e.prototype;return i.getGroupByName=function(t){var e=[];if(!this.groupDic[t])return e;for(var i=(t=this.groupDic[t]).length,n=0;n<i;n++)e.push(this.parseResourceItem(t[n]));return e},i.getRawGroupByName=function(t){return this.groupDic[t]?this.groupDic[t]:[]},i.createGroup=function(t,e,i){if(void 0===i&&(i=!1),!i&&this.groupDic[t]||!e||0==e.length)return!1;i=this.groupDic;for(var n=[],r=e.length,s=0;s<r;s++){var a=i[o=e[s]];if(a)for(var o=a.length,h=0;h<o;h++){var l=a[h];-1==n.indexOf(l)&&n.push(l)}else(l=this.keyMap[o])?-1==n.indexOf(l)&&n.push(l):egret.$warn(2e3,o)}return 0!=n.length&&(this.groupDic[t]=n,!0)},i.parseConfig=function(t,e){if(t){var i=t.resources;if(i)for(var n=i.length,r=0;r<n;r++){var s=i[r];(a=s.url)&&-1==a.indexOf("://")&&(s.url=e+a),this.addItemToKeyMap(s)}if(i=t.groups)for(n=i.length,r=0;r<n;r++){for(var a,o=[],h=(a=i[r]).keys.split(","),l=h.length,c=0;c<l;c++)s=h[c].trim(),(s=this.keyMap[s])&&-1==o.indexOf(s)&&o.push(s);this.groupDic[a.name]=o}}},i.addSubkey=function(t,e){var i=this.keyMap[e];i&&!this.keyMap[t]&&(this.keyMap[t]=i)},i.addItemToKeyMap=function(t){if(this.keyMap[t.name]||(this.keyMap[t.name]=t),t.hasOwnProperty("subkeys")){var e=t.subkeys.split(",");t.subkeys=e;for(var i=e.length,n=0;n<i;n++){var r=e[n];null==this.keyMap[r]&&(this.keyMap[r]=t)}}},i.getName=function(t){return(t=this.keyMap[t])?t.name:""},i.getType=function(t){return(t=this.keyMap[t])?t.type:""},i.getRawResourceItem=function(t){return this.keyMap[t]},i.getResourceItem=function(t){return(t=this.keyMap[t])?this.parseResourceItem(t):null},i.parseResourceItem=function(e){var i=new t.ResourceItem(e.name,e.url,e.type);return i.data=e,i},e}();t.ResourceConfig=e,e.prototype.__class__="RES.ResourceConfig"}(RES||(RES={})),function(t){var e=function(e){function i(){e.call(this),this.thread=2,this.loadingCount=0,this.resInstance=this.callBack=null,this.groupTotalDic={},this.numLoadedDic={},this.itemListDic={},this.groupErrorDic={},this.retryTimesDic={},this.maxRetryTimes=3,this.failedList=[],this.priorityQueue={},this.lazyLoadList=[],this.analyzerDic={},this.queueIndex=0}__extends(i,e);var n=i.prototype;return n.isGroupInLoading=function(t){return void 0!==this.itemListDic[t]},n.loadGroup=function(e,i,n){if(void 0===n&&(n=0),!this.itemListDic[i]&&i)if(e&&0!=e.length){this.priorityQueue[n]?this.priorityQueue[n].push(i):this.priorityQueue[n]=[i],this.itemListDic[i]=e,n=e.length;for(var r=0;r<n;r++)e[r].groupName=i;this.groupTotalDic[i]=e.length,this.numLoadedDic[i]=0,this.next()}else egret.$warn(2001,i),(e=new t.ResourceEvent(t.ResourceEvent.GROUP_LOAD_ERROR)).groupName=i,this.dispatchEvent(e)},n.loadItem=function(t){this.lazyLoadList.push(t),t.groupName="",this.next()},n.next=function(){for(;this.loadingCount<this.thread;){var e=this.getOneResourceItem();if(!e)break;if(this.loadingCount++,e.loaded)this.onItemComplete(e);else{var i=this.analyzerDic[e.type];i||(i=this.analyzerDic[e.type]=egret.Injector.getInstance(t.AnalyzerBase,e.type)),i.loadFile(e,this.onItemComplete,this)}}},n.getOneResourceItem=function(){if(0<this.failedList.length)return this.failedList.shift();var t,e=Number.NEGATIVE_INFINITY;for(t in this.priorityQueue)e=Math.max(e,t);if(!(e=this.priorityQueue[e])||0==e.length)return 0==this.lazyLoadList.length?null:this.lazyLoadList.pop();t=e.length;for(var i,n=0;n<t&&(this.queueIndex>=t&&(this.queueIndex=0),!(0<(i=this.itemListDic[e[this.queueIndex]]).length));n++)this.queueIndex++;return 0==i.length?null:i.shift()},n.onItemComplete=function(e){this.loadingCount--;var i=e.groupName;if(!e.loaded){if(!((n=this.retryTimesDic[e.name]||1)>this.maxRetryTimes))return this.retryTimesDic[e.name]=n+1,this.failedList.push(e),void this.next();delete this.retryTimesDic[e.name],t.ResourceEvent.dispatchResourceEvent(this.resInstance,t.ResourceEvent.ITEM_LOAD_ERROR,i,e)}if(i){this.numLoadedDic[i]++;var n=this.numLoadedDic[i],r=this.groupTotalDic[i];e.loaded||(this.groupErrorDic[i]=!0),t.ResourceEvent.dispatchResourceEvent(this.resInstance,t.ResourceEvent.GROUP_PROGRESS,i,e,n,r),n==r&&(e=this.groupErrorDic[i],this.removeGroupName(i),delete this.groupTotalDic[i],delete this.numLoadedDic[i],delete this.itemListDic[i],delete this.groupErrorDic[i],e?t.ResourceEvent.dispatchResourceEvent(this,t.ResourceEvent.GROUP_LOAD_ERROR,i):t.ResourceEvent.dispatchResourceEvent(this,t.ResourceEvent.GROUP_COMPLETE,i))}else this.callBack.call(this.resInstance,e);this.next()},n.removeGroupName=function(t){for(var e in this.priorityQueue){for(var i=this.priorityQueue[e],n=i.length,r=0,s=!1,a=(n=i.length,0);a<n;a++){if(i[a]==t){i.splice(r,1),s=!0;break}r++}if(s){0==i.length&&delete this.priorityQueue[e];break}}},i}(egret.EventDispatcher);t.ResourceLoader=e,e.prototype.__class__="RES.ResourceLoader"}(RES||(RES={})),function(t){var e=function(e){function i(){e.call(this),this.resourceConfig=null,this.resourceConfig=t.configInstance}__extends(i,e);var n=i.prototype;return n.addSubkey=function(t,e){this.resourceConfig.addSubkey(t,e)},n.loadFile=function(t,e,i){},n.getRes=function(t){},n.destroyRes=function(t){return!1},i.getStringPrefix=function(t){if(!t)return"";var e=t.indexOf(".");return-1!=e?t.substring(0,e):""},i.getStringTail=function(t){if(!t)return"";var e=t.indexOf(".");return-1!=e?t.substring(e+1):""},i}(egret.HashObject);t.AnalyzerBase=e,e.prototype.__class__="RES.AnalyzerBase"}(RES||(RES={})),function(t){var e=function(t){function e(){t.call(this),this.fileDic={},this.resItemDic=[],this._dataFormat=egret.URLLoaderDataFormat.BINARY,this.recycler=new egret.Recycler}__extends(e,t);var i=e.prototype;return i.loadFile=function(t,e,i){if(this.fileDic[t.name])e.call(i,t);else{var n=this.getLoader();this.resItemDic[n.hashCode]={item:t,func:e,thisObject:i},n.load(new egret.URLRequest(t.url))}},i.getLoader=function(){var t=this.recycler.pop();return t||((t=new egret.URLLoader).addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),t.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this)),t.dataFormat=this._dataFormat,t},i.onLoadFinish=function(t){var e=t.target,i=this.resItemDic[e.hashCode];delete this.resItemDic[e.hashCode];var n=i.item,r=i.func;n.loaded=t.type==egret.Event.COMPLETE,n.loaded&&this.analyzeData(n,e.data),this.recycler.push(e),r.call(i.thisObject,n)},i.analyzeData=function(t,e){var i=t.name;!this.fileDic[i]&&e&&(this.fileDic[i]=e)},i.getRes=function(t){return this.fileDic[t]},i.hasRes=function(t){return null!=this.getRes(t)},i.destroyRes=function(t){return!!this.fileDic[t]&&(this.onResourceDestroy(this.fileDic[t]),delete this.fileDic[t],!0)},i.onResourceDestroy=function(t){},e}(t.AnalyzerBase);t.BinAnalyzer=e,e.prototype.__class__="RES.BinAnalyzer"}(RES||(RES={})),function(t){var e=function(t){function e(){t.call(this),this._dataFormat=egret.URLLoaderDataFormat.TEXTURE}__extends(e,t);var i=e.prototype;return i.analyzeData=function(t,e){var i=t.name;!this.fileDic[i]&&e&&(this.fileDic[i]=e,(i=t.data)&&i.scale9grid&&(i=i.scale9grid.split(","),e.scale9Grid=new egret.Rectangle(parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),parseInt(i[3]))))},i.onResourceDestroy=function(t){t.dispose()},e}(t.BinAnalyzer);t.ImageAnalyzer=e,e.prototype.__class__="RES.ImageAnalyzer"}(RES||(RES={})),function(t){var e=function(t){function e(){t.call(this),this._dataFormat=egret.URLLoaderDataFormat.TEXT}return __extends(e,t),e.prototype.analyzeData=function(t,e){var i=t.name;if(!this.fileDic[i]&&e)try{this.fileDic[i]=JSON.parse(e)}catch(i){egret.$warn(1017,t.url,e)}},e}(t.BinAnalyzer);t.JsonAnalyzer=e,e.prototype.__class__="RES.JsonAnalyzer"}(RES||(RES={})),function(t){var e=function(t){function e(){t.call(this),this._dataFormat=egret.URLLoaderDataFormat.TEXT}return __extends(e,t),e}(t.BinAnalyzer);t.TextAnalyzer=e,e.prototype.__class__="RES.TextAnalyzer"}(RES||(RES={})),function(t){var e=function(e){function i(){e.call(this),this.sheetMap={},this.textureMap={},this._dataFormat=egret.URLLoaderDataFormat.TEXT}__extends(i,e);var n=i.prototype;return n.getRes=function(e){var i=this.fileDic[e];return i||(i=this.textureMap[e]),!i&&(i=t.AnalyzerBase.getStringPrefix(e),i=this.fileDic[i])&&(e=t.AnalyzerBase.getStringTail(e),i=i.getTexture(e)),i},n.onLoadFinish=function(t){var e=t.target,i=this.resItemDic[e.hashCode];delete this.resItemDic[e.hashCode];var n=i.item,r=i.func;if(n.loaded=t.type==egret.Event.COMPLETE,n.loaded)if("string"==typeof e.data){if(n.loaded=!1,t=this.analyzeConfig(n,e.data))return e=n.url,n.url=t,this._dataFormat=egret.URLLoaderDataFormat.TEXTURE,this.loadFile(n,r,i.thisObject),this._dataFormat=egret.URLLoaderDataFormat.TEXT,void(n.url=e)}else this.analyzeBitmap(n,e.data);this.recycler.push(e),r.call(i.thisObject,n)},n.analyzeConfig=function(t,e){var i,n=t.name,r="";try{i=JSON.parse(e)}catch(i){egret.$warn(1017,t.url,e)}return i&&(this.sheetMap[n]=i,r=this.getRelativePath(t.url,i.file)),r},n.analyzeBitmap=function(t,e){var i=t.name;if(!this.fileDic[i]&&e){var n=this.sheetMap[i];delete this.sheetMap[i],n=this.parseSpriteSheet(e,n,t.data&&t.data.subkeys?"":i),this.fileDic[i]=n}},n.getRelativePath=function(t,e){var i=(t=t.split("\\").join("/")).lastIndexOf("/");return-1!=i?t.substring(0,i+1)+e:e},n.parseSpriteSheet=function(t,e,i){if(!(e=e.frames))return null;var n,r=new egret.SpriteSheet(t),s=this.textureMap;for(n in e){var a=e[n];t=r.createTexture(n,a.x,a.y,a.w,a.h,a.offX,a.offY,a.sourceW,a.sourceH),a.scale9grid&&(a=a.scale9grid.split(","),t.scale9Grid=new egret.Rectangle(parseInt(a[0]),parseInt(a[1]),parseInt(a[2]),parseInt(a[3]))),null==s[n]&&(s[n]=t,i&&this.addSubkey(n,i))}return r},n.destroyRes=function(t){var e=this.fileDic[t];if(e){for(var i in delete this.fileDic[t],e._textureMap)this.textureMap[i]&&delete this.textureMap[i];return this.onResourceDestroy(e),!0}return!1},n.onResourceDestroy=function(t){t.dispose()},i}(t.BinAnalyzer);t.SheetAnalyzer=e,e.prototype.__class__="RES.SheetAnalyzer"}(RES||(RES={})),function(t){var e=function(t){function e(){t.call(this)}__extends(e,t);var i=e.prototype;return i.analyzeConfig=function(t,e){var i,n=t.name,r="";try{i=JSON.parse(e)}catch(t){}return i?r=this.getRelativePath(t.url,i.file):(i=e,r=this.getTexturePath(t.url,i)),this.sheetMap[n]=i,r},i.analyzeBitmap=function(t,e){var i=t.name;if(!this.fileDic[i]&&e){var n=this.sheetMap[i];delete this.sheetMap[i],n=new egret.BitmapFont(e,n),this.fileDic[i]=n}},i.getTexturePath=function(t,e){var i="",n=e.split("\n")[2],r=n.indexOf('file="');return-1!=r&&(r=(n=n.substring(r+6)).indexOf('"'),i=n.substring(0,r)),-1!=(r=(t=t.split("\\").join("/")).lastIndexOf("/"))?t.substring(0,r+1)+i:i},i.onResourceDestroy=function(t){t.dispose()},e}(t.SheetAnalyzer);t.FontAnalyzer=e,e.prototype.__class__="RES.FontAnalyzer"}(RES||(RES={})),function(t){var e=function(t){function e(){t.call(this),this._dataFormat=egret.URLLoaderDataFormat.SOUND}return __extends(e,t),e.prototype.analyzeData=function(t,e){var i=t.name;!this.fileDic[i]&&e&&(this.fileDic[i]=e,(i=t.data)&&i.soundType?e.preload(i.soundType):e.preload(egret.Sound.EFFECT))},e}(t.BinAnalyzer);t.SoundAnalyzer=e,e.prototype.__class__="RES.SoundAnalyzer"}(RES||(RES={})),function(t){var e=function(t){function e(){t.call(this),this._dataFormat=egret.URLLoaderDataFormat.TEXT}return __extends(e,t),e.prototype.analyzeData=function(t,e){var i=t.name;if(!this.fileDic[i]&&e)try{var n=egret.XML.parse(e);this.fileDic[i]=n}catch(t){}},e}(t.BinAnalyzer);t.XMLAnalyzer=e,e.prototype.__class__="RES.XMLAnalyzer"}(RES||(RES={})),function(t){t.loadConfig=function(t,e,n){void 0===e&&(e=""),void 0===n&&(n="json"),i.loadConfig(t,e,n)},t.loadGroup=function(t,e){void 0===e&&(e=0),i.loadGroup(t,e)},t.isGroupLoaded=function(t){return i.isGroupLoaded(t)},t.getGroupByName=function(t){return i.getGroupByName(t)},t.createGroup=function(t,e,n){return void 0===n&&(n=!1),i.createGroup(t,e,n)},t.hasRes=function(t){return i.hasRes(t)},t.parseConfig=function(t,e){void 0===e&&(e=""),i.parseConfig(t,e)},t.getRes=function(t){return i.getRes(t)},t.getResAsync=function(t,e,n){i.getResAsync(t,e,n)},t.getResByUrl=function(t,e,n,r){void 0===r&&(r=""),i.getResByUrl(t,e,n,r)},t.destroyRes=function(t,e){return i.destroyRes(t,e)},t.setMaxLoadingThread=function(t){i.setMaxLoadingThread(t)},t.setMaxRetryTimes=function(t){i.setMaxRetryTimes(t)},t.addEventListener=function(t,e,n,r,s){void 0===r&&(r=!1),void 0===s&&(s=0),i.addEventListener(t,e,n,r,s)},t.removeEventListener=function(t,e,n,r){void 0===r&&(r=!1),i.removeEventListener(t,e,n,r)};var e=function(e){function i(){e.call(this),this.analyzerDic={},this.configItemList=[],this.configComplete=this.callLaterFlag=!1,this.loadedGroups=[],this.groupNameList=[],this.asyncDic={},this.init()}__extends(i,e);var n=i.prototype;return n.getAnalyzerByType=function(e){var i=this.analyzerDic[e];return i||(i=this.analyzerDic[e]=egret.Injector.getInstance(t.AnalyzerBase,e)),i},n.init=function(){egret.Injector.hasMapRule(t.AnalyzerBase,t.ResourceItem.TYPE_BIN)||egret.Injector.mapClass(t.AnalyzerBase,t.BinAnalyzer,t.ResourceItem.TYPE_BIN),egret.Injector.hasMapRule(t.AnalyzerBase,t.ResourceItem.TYPE_IMAGE)||egret.Injector.mapClass(t.AnalyzerBase,t.ImageAnalyzer,t.ResourceItem.TYPE_IMAGE),egret.Injector.hasMapRule(t.AnalyzerBase,t.ResourceItem.TYPE_TEXT)||egret.Injector.mapClass(t.AnalyzerBase,t.TextAnalyzer,t.ResourceItem.TYPE_TEXT),egret.Injector.hasMapRule(t.AnalyzerBase,t.ResourceItem.TYPE_JSON)||egret.Injector.mapClass(t.AnalyzerBase,t.JsonAnalyzer,t.ResourceItem.TYPE_JSON),egret.Injector.hasMapRule(t.AnalyzerBase,t.ResourceItem.TYPE_SHEET)||egret.Injector.mapClass(t.AnalyzerBase,t.SheetAnalyzer,t.ResourceItem.TYPE_SHEET),egret.Injector.hasMapRule(t.AnalyzerBase,t.ResourceItem.TYPE_FONT)||egret.Injector.mapClass(t.AnalyzerBase,t.FontAnalyzer,t.ResourceItem.TYPE_FONT),egret.Injector.hasMapRule(t.AnalyzerBase,t.ResourceItem.TYPE_SOUND)||egret.Injector.mapClass(t.AnalyzerBase,t.SoundAnalyzer,t.ResourceItem.TYPE_SOUND),egret.Injector.hasMapRule(t.AnalyzerBase,t.ResourceItem.TYPE_XML)||egret.Injector.mapClass(t.AnalyzerBase,t.XMLAnalyzer,t.ResourceItem.TYPE_XML),this.resConfig=new t.ResourceConfig,this.resLoader=new t.ResourceLoader,this.resLoader.callBack=this.onResourceItemComp,this.resLoader.resInstance=this,this.resLoader.addEventListener(t.ResourceEvent.GROUP_COMPLETE,this.onGroupComp,this),this.resLoader.addEventListener(t.ResourceEvent.GROUP_LOAD_ERROR,this.onGroupError,this)},n.loadConfig=function(t,e,i){void 0===i&&(i="json"),this.configItemList.push({url:t,resourceRoot:e,type:i}),this.callLaterFlag||(egret.callLater(this.startLoadConfig,this),this.callLaterFlag=!0)},n.startLoadConfig=function(){this.callLaterFlag=!1;var e=this.configItemList;this.configItemList=[],this.loadingConfigList=e;for(var n=e.length,r=[],s=0;s<n;s++){var a=e[s];a=new t.ResourceItem(a.url,a.url,a.type);r.push(a)}this.resLoader.loadGroup(r,i.GROUP_CONFIG,Number.MAX_VALUE)},n.isGroupLoaded=function(t){return-1!=this.loadedGroups.indexOf(t)},n.getGroupByName=function(t){return this.resConfig.getGroupByName(t)},n.loadGroup=function(e,i){if(void 0===i&&(i=0),-1!=this.loadedGroups.indexOf(e))t.ResourceEvent.dispatchResourceEvent(this,t.ResourceEvent.GROUP_COMPLETE,e);else if(!this.resLoader.isGroupInLoading(e))if(this.configComplete){var n=this.resConfig.getGroupByName(e);this.resLoader.loadGroup(n,e,i)}else this.groupNameList.push({name:e,priority:i})},n.createGroup=function(t,e,i){if(void 0===i&&(i=!1),i){var n=this.loadedGroups.indexOf(t);-1!=n&&this.loadedGroups.splice(n,1)}return this.resConfig.createGroup(t,e,i)},n.onGroupComp=function(e){if(e.groupName==i.GROUP_CONFIG){e=this.loadingConfigList.length;for(var n=0;n<e;n++){var r=this.loadingConfigList[n],s=this.getAnalyzerByType(r.type),a=s.getRes(r.url);s.destroyRes(r.url),this.resConfig.parseConfig(a,r.resourceRoot)}this.configComplete=!0,this.loadingConfigList=null,t.ResourceEvent.dispatchResourceEvent(this,t.ResourceEvent.CONFIG_COMPLETE),this.loadDelayGroups()}else this.loadedGroups.push(e.groupName),this.dispatchEvent(e)},n.loadDelayGroups=function(){var t=this.groupNameList;this.groupNameList=[];for(var e=t.length,i=0;i<e;i++){var n=t[i];this.loadGroup(n.name,n.priority)}},n.onGroupError=function(e){e.groupName==i.GROUP_CONFIG?(this.loadingConfigList=null,t.ResourceEvent.dispatchResourceEvent(this,t.ResourceEvent.CONFIG_LOAD_ERROR)):this.dispatchEvent(e)},n.hasRes=function(e){var i=this.resConfig.getType(e);return""!=i||(e=t.AnalyzerBase.getStringPrefix(e),""!=(i=this.resConfig.getType(e)))},n.parseConfig=function(t,e){this.resConfig.parseConfig(t,e),this.configComplete||this.loadingConfigList||(this.configComplete=!0,this.loadDelayGroups())},n.getRes=function(e){var i=this.resConfig.getType(e);return""==i&&(i=t.AnalyzerBase.getStringPrefix(e),""==(i=this.resConfig.getType(i)))?null:this.getAnalyzerByType(i).getRes(e)},n.getResAsync=function(e,i,n){var r=this.resConfig.getType(e),s=this.resConfig.getName(e);""!=r||(s=t.AnalyzerBase.getStringPrefix(e),""!=(r=this.resConfig.getType(s)))?(r=this.getAnalyzerByType(r).getRes(e))?i.call(n,r):(e={key:e,compFunc:i,thisObject:n},this.asyncDic[s]?this.asyncDic[s].push(e):(this.asyncDic[s]=[e],s=this.resConfig.getResourceItem(s),this.resLoader.loadItem(s))):i.call(n,null)},n.getResByUrl=function(e,i,n,r){if(void 0===r&&(r=""),e){r||(r=this.getTypeByUrl(e));var s=this.getAnalyzerByType(r).getRes(e);s?i.call(n,s):(i={key:e,compFunc:i,thisObject:n},this.asyncDic[e]?this.asyncDic[e].push(i):(this.asyncDic[e]=[i],e=new t.ResourceItem(e,e,r),this.resLoader.loadItem(e)))}else i.call(n,null)},n.getTypeByUrl=function(e){switch((e=e.substr(e.lastIndexOf(".")+1))&&(e=e.toLowerCase()),e){case t.ResourceItem.TYPE_XML:case t.ResourceItem.TYPE_JSON:case t.ResourceItem.TYPE_SHEET:break;case"png":case"jpg":case"gif":case"jpeg":case"bmp":e=t.ResourceItem.TYPE_IMAGE;break;case"fnt":e=t.ResourceItem.TYPE_FONT;break;case"txt":e=t.ResourceItem.TYPE_TEXT;break;case"mp3":case"ogg":case"mpeg":case"wav":case"m4a":case"mp4":case"aiff":case"wma":case"mid":e=t.ResourceItem.TYPE_SOUND;break;default:e=t.ResourceItem.TYPE_BIN}return e},n.onResourceItemComp=function(t){var e=this.asyncDic[t.name];delete this.asyncDic[t.name],t=this.getAnalyzerByType(t.type);for(var i=e.length,n=0;n<i;n++){var r=e[n],s=t.getRes(r.key);r.compFunc.call(r.thisObject,s,r.key)}},n.destroyRes=function(t,e){void 0===e&&(e=!0);var i=this.resConfig.getRawGroupByName(t);if(i&&0<i.length){var n=this.loadedGroups.indexOf(t);-1!=n&&this.loadedGroups.splice(n,1);for(var r=i.length,s=0;s<r;s++)if(n=i[s],e||!this.isResInLoadedGroup(n.name)){n.loaded=!1;var a=this.getAnalyzerByType(n.type);a.destroyRes(n.name),this.removeLoadedGroupsByItemName(n.name)}return!0}return""!=(i=this.resConfig.getType(t))&&((n=this.resConfig.getRawResourceItem(t)).loaded=!1,i=(a=this.getAnalyzerByType(i)).destroyRes(t),this.removeLoadedGroupsByItemName(n.name),i)},n.removeLoadedGroupsByItemName=function(t){for(var e=this.loadedGroups,i=e.length,n=0;n<i;n++)for(var r=this.resConfig.getRawGroupByName(e[n]),s=r.length,a=0;a<s;a++)if(r[a].name==t){e.splice(n,1),n--,i=e.length;break}},n.isResInLoadedGroup=function(t){for(var e=this.loadedGroups,i=e.length,n=0;n<i;n++)for(var r=this.resConfig.getRawGroupByName(e[n]),s=r.length,a=0;a<s;a++)if(r[a].name==t)return!0;return!1},n.setMaxLoadingThread=function(t){1>t&&(t=1),this.resLoader.thread=t},n.setMaxRetryTimes=function(t){t=Math.max(t,0),this.resLoader.maxRetryTimes=t},i.GROUP_CONFIG="RES__CONFIG",i}(egret.EventDispatcher);e.prototype.__class__="RES.Resource";var i=new e}(RES||(RES={}));var Block=function(t){function e(){t.call(this),this.createView()}__extends(e,t);var i=e.prototype;return i.createView=function(){this.background=new egret.Bitmap,this.addChild(this.background),this.shapeContainer=new egret.DisplayObjectContainer,this.addChild(this.shapeContainer);for(var t=0;4>t;++t){var e=new egret.Bitmap;e.x=8,e.y=8,this.shapeContainer.addChild(e)}},i.destroy=function(){},i.cleanShape=function(){for(var t=0;t<this.shapeContainer.numChildren;++t)this.shapeContainer.getChildAt(t).texture=null},i.updatePoint=function(t,e){"0"!=t.charAt(0)&&"0"==t.charAt(1)&&"0"==t.charAt(2)&&"0"==t.charAt(3)?(e.x=8,e.y=8):"0"==t.charAt(0)&&"0"!=t.charAt(1)&&"0"==t.charAt(2)&&"0"==t.charAt(3)?(e.x=39,e.y=8):"0"==t.charAt(0)&&"0"==t.charAt(1)&&"0"!=t.charAt(2)&&"0"==t.charAt(3)?(e.x=8,e.y=39):"0"==t.charAt(0)&&"0"==t.charAt(1)&&"0"==t.charAt(2)&&"0"!=t.charAt(3)?(e.x=39,e.y=39):(e.x=8,e.y=8)},i.updateShape=function(t,e){this.mType=t,this.mColor=e,""!=this.mType&&this.changeColor(this.mColor),""!=this.mColor&&this.changeShape(this.mType)},i.changeColor=function(t){this.background.texture=""!=t?RES.getRes("block_"+t):RES.getRes("block_orange")},i.changeShape=function(t){if(this.cleanShape(),void 0===t&&(t="3333"),"question"!=t){t=[t.charAt(0)+"000","0"+t.charAt(1)+"00","00"+t.charAt(2)+"0","000"+t.charAt(3)];for(var e=0;4>e;++e){var i=this.shapeContainer.getChildAt(e),n=t[e];"0000"==n?i.texture=null:(i.texture="white"==this.mColor?RES.getRes("h_"+n):RES.getRes("b_"+n),this.updatePoint(n,i))}}else this.shapeContainer.getChildAt(0).texture=RES.getRes("question")},Object.defineProperty(i,"Type",{get:function(){return this.mType},enumerable:!0,configurable:!0}),e}(egret.DisplayObjectContainer);Block.prototype.__class__="Block";var SG_HooksAPI=function(){function t(){}return t.getLanguage=function(t){return SG_Hooks.getLanguage(t)},t.setOrientationHandler=function(t){SG_Hooks.setOrientationHandler(t)},t.setResizeHandler=function(t){SG_Hooks.setResizeHandler(t)},t.start=function(){SG_Hooks.start()},t.levelStarted=function(t,e){SG_Hooks.levelStarted(t,e)},t.levelFinished=function(t,e){SG_Hooks.levelFinished(t,e)},t.levelUp=function(t,e){SG_Hooks.levelUp(t,e)},t.gameOver=function(t,e){SG_Hooks.gameOver(t,e)},t.setPauseHandler=function(t){SG_Hooks.setPauseHandler(t)},t.setUnpauseHandler=function(t){SG_Hooks.setUnpauseHandler(t)},t.setStorageItem=function(t,e){SG_Hooks.setStorageItem(t,e)},t.getStorageItem=function(t){return SG_Hooks.getStorageItem(t)},t.SG_check=function(){return SG_check()},t.isEnabledIncentiviseButton=function(){return SG_Hooks.isEnabledIncentiviseButton()},t.triggerIncentivise=function(t){SG_Hooks.triggerIncentivise(t)},t.getGameConfig=function(){return SG_Hooks.getGameConfig()},t}();SG_HooksAPI.prototype.__class__="SG_HooksAPI";var BlockManager=function(){function t(){this._blockPool=[]}var e=t.prototype;return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},e.createBlock=function(t,e){var i=this.getBlock();return i.updateShape(t,e),i},e.destroyBlock=function(t){null!=t&&null!=t.parent&&(t.parent.removeChild(t),t.destroy(),this._blockPool.push(t))},e.PoolLength=function(){return this._blockPool.length},e.getBlock=function(){return this._blockPool.length?this._blockPool.shift():new Block},t}();BlockManager.prototype.__class__="BlockManager";var GameData=function(){function t(){}return t.stageWidth=480,t.stageHeight=852,t.isIphone4=!1,t.gameSound=!0,t.gameFontType=0,t.gameLanguageType="",t.languageType=[],t.gameLanguage=[],t.isFrist=1,t.gameMaxTime=15,t.gamePause=!1,t.gameSroce=0,t.gameMax=0,t.easyLevel=1,t.normalLevel=1,t.hardLevel=1,t.gameBlock=["1000 0100 0010 0001 1100 1010 1001 0110 0101 0011 1110 1101 1011 0111".split(" "),"2000 0200 0020 0002 2200 2020 2002 0220 0202 0022 2220 2202 2022 0222".split(" "),"3000 0300 0030 0003 3300 3030 3003 0330 0303 0033 3330 3303 3033 0333".split(" ")],t}();GameData.prototype.__class__="GameData";var GameTool=function(){function t(){}return t.createBitmapByName=function(t){var e=new egret.Bitmap;return t=""!=t?RES.getRes(t):null,e.texture=t,e},t.createMovieClipByName=function(t){var e=RES.getRes(t+"_json");return t=RES.getRes(t+"_png"),e=new egret.MovieClipDataFactory(e,t),new egret.MovieClip(e.generateMovieClipData())},t.createTextField=function(t,e,i,n,r,s,a,o,h,l,c){var u=new egret.TextField;return u.fontFamily="Russo One",c&&(u.anchorX=.5,u.anchorY=.5),u.width=n,u.height=r,u.x=e,u.y=i,u.textAlign=s,u.size=a,u.textColor=o,0!=h&&(u.stroke=h,u.strokeColor=l),t.addChild(u),u},t.createGameUI=function(e){var i=new egret.DisplayObjectContainer;e=RES.getRes(e),i.name=e.file,e=e.layers;for(var n=0;n<e.length;++n){var r=t.createBitmapByName(e[n].libs);r.name=e[n].name,r.anchorX=e[n].anx,r.anchorY=e[n].any,r.x=e[n].x,r.y=e[n].y,r.scaleX=e[n].sacle,r.scaleY=e[n].sacle,r.alpha=e[n].alpha,0!=e[n].cx&&(r.width=e[n].cx),0!=e[n].cy&&(r.height=e[n].cy),i.addChild(r)}return i},t.saveData=function(){SG_HooksAPI.setStorageItem("theshapegame",GameData.gameMax.toString()+"_"+GameData.isFrist.toString())},t.loadData=function(){var t=SG_HooksAPI.getStorageItem("theshapegame");null==t?(GameData.gameMax=0,GameData.isFrist=1):(t=t.split("_"),GameData.gameMax=parseInt(t[0]),GameData.isFrist=parseInt(t[1]))},t}();GameTool.prototype.__class__="GameTool";var GameEvent=function(){function t(){}return t.GAMEEVENT_LOAD_COMPLETE="gameevent_load_complete",t.GAMEEVENT_OPEN_STARTUI="gameevent_open_startui",t.GAMEEVENT_CLOSE_STARTUI="gameevent_close_startui",t.GAMEEVENT_OPEN_GUIDEUI="gameevent_open_guideui",t.GAMEEVENT_CLOSE_GUIDEUI="gameevent_close_guideui",t.GAMEEVENT_OPEN_GAMEUI="gameevent_open_gameui",t.GAMEEVENT_CLOSE_GAMETUI="gameevent_close_gameui",t.GAMEEVENT_OPEN_PAUSEUI="gameevent_open_pauseui",t.GAMEEVENT_CLOSE_PAUSEUI="gameevent_close_pauseui",t.GAMEEVENT_OPEN_FINISHUI="gameevent_open_finishui",t.GAMEEVENT_CLOSE_FINISHUI="gameevent_close_finishui",t.BLOCK_UNVISIBLE="block_unvisible",t}();GameEvent.prototype.__class__="GameEvent";var GameEventManager=function(t){function e(){t.call(this),this.initEvents()}__extends(e,t);var i=e.prototype;return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},i.initEvents=function(){this.addEventListener(GameEvent.GAMEEVENT_OPEN_STARTUI,this.openStartUI,this),this.addEventListener(GameEvent.GAMEEVENT_OPEN_GUIDEUI,this.openGuideUI,this),this.addEventListener(GameEvent.GAMEEVENT_OPEN_GAMEUI,this.openGameUI,this)},i.openStartUI=function(){GameContainer.openStartUI(),GameContainer.closeGameUI()},i.openGuideUI=function(){GameContainer.openGuideUI(),GameContainer.closeStartUI()},i.openGameUI=function(){GameContainer.openGameUI(),GameContainer.closeStartUI(),GameContainer.closeGuideUI()},e}(egret.DisplayObjectContainer);GameEventManager.prototype.__class__="GameEventManager";var ImgNumManager=function(){function t(){this._imgPool=[],this._containerPool=[]}var e=t.prototype;return t.i=function(){return this._instance||(this._instance=new t),this._instance},e.createNumPic=function(t,e){var i=this.getContainer(),n="";"number"==typeof t?n=t.toString():"string"==typeof t&&(n=t);for(var r,s=0;s<n.length;s++)"-"==(r=n.charAt(s))?r="11":"+"==r&&(r="12"),r=this.getSingleNumPic(parseInt(r),e),i.addChild(r);return this.repositionNumPic(i),i},e.desstroyNumPic=function(t){this.clearContainer(t),t.parent&&(t.parent.removeChild(t),t.anchorX=0,t.anchorY=0),this._containerPool.push(t)},e.changeNum=function(t,e,i){var n="";if("number"==typeof e?n=e.toString():"string"==typeof e&&(n=e),t.numChildren>n.length)for(;t.numChildren>n.length;)this.recycleBM(t.getChildAt(t.numChildren-1));for(e=0;e<n.length;e++){e>=t.numChildren&&t.addChild(this.getBitmap());var r=n.charAt(e);"-"==r?r="11":"+"==r&&(r="12"),t.getChildAt(e).texture=RES.getRes("number_"+i+"_"+r)}this.repositionNumPic(t)},e.repositionNumPic=function(t){for(var e,i=0,n=0;i<t.numChildren;i++)(e=t.getChildAt(i)).x=n,n=e.x+e.width},e.clearContainer=function(t){for(;t.numChildren;)this.recycleBM(t.removeChildAt(0))},e.recycleBM=function(t){t&&t.parent&&(t.parent.removeChild(t),t.texture=null,this._imgPool.push(t))},e.getContainer=function(){return this._containerPool.length?this._containerPool.shift():new egret.DisplayObjectContainer},e.getSingleNumPic=function(t,e){var i=this.getBitmap();return i.texture=RES.getRes("number_"+e+"_"+t),i},e.getBitmap=function(){return this._imgPool.length?this._imgPool.shift():new egret.Bitmap},t}();ImgNumManager.prototype.__class__="ImgNumManager";var GameView=function(t){function e(){t.call(this),this.mPuzzle="",this.mIndex=0,this.mAnswer="",this.mWeight=0,this.allArray=[],this.blockArray=[],this.mTimer=new egret.Timer(500),this.mCombo=this.mRover=this.mTime=0,this.isCombo=!1,this.createView()}__extends(e,t);var i=e.prototype;return i.createView=function(){var t=GameTool.createBitmapByName("background_png");this.addChild(t),this.mInfo=new egret.Bitmap,this.mInfo.anchorX=.5,this.mInfo.anchorY=.5,this.mInfo.x=GameData.stageWidth/2,this.mInfo.y=300,this.mInfo.visible=!1,this.addChild(this.mInfo),this.mOver=GameTool.createTextField(this,GameData.stageWidth/2,300,GameData.stageWidth,GameData.gameFontType+10,"center",GameData.gameFontType+10,16777215,0,0,!0),this.mOver.bold=!0,this.mOver.text=GameData.gameLanguage[0],this.mOver.visible=!1,this.prossContainer=new egret.DisplayObjectContainer,this.prossContainer.x=25,this.prossContainer.y=115,this.addChild(this.prossContainer),this.puzzleContainer=new egret.DisplayObjectContainer,this.puzzleContainer.anchorX=.5,this.puzzleContainer.x=GameData.stageWidth/2,this.puzzleContainer.y=245,this.addChild(this.puzzleContainer),this.blockContainer=new egret.DisplayObjectContainer,this.blockContainer.y=390,this.addChild(this.blockContainer),this.sroceContainer=new egret.DisplayObjectContainer,this.sroceContainer.x=368,this.sroceContainer.y=115,this.addChild(this.sroceContainer),this.touchContainer=new egret.DisplayObject,this.touchContainer.x=0,this.touchContainer.y=370,this.touchContainer.width=GameData.stageWidth,this.touchContainer.height=GameData.stageHeight,this.addChild(this.touchContainer),this.createPross(),this.createSroce(),this.createBlocks()},i.createPross=function(){var t=GameTool.createBitmapByName("prossBK");this.prossContainer.addChild(t),t=GameTool.createBitmapByName("pross"),this.prossContainer.addChild(t),this.prossMask=new egret.Rectangle(0,0,320,80),t.mask=this.prossMask,this.combo=GameTool.createBitmapByName("combo"),this.combo.x=240,this.combo.y=27,this.combo.visible=!1,this.prossContainer.addChild(this.combo)},i.createSroce=function(){var t=GameTool.createBitmapByName("block_purple");this.sroceContainer.addChild(t),this.mSroce=ImgNumManager.i().createNumPic(0,"n"),this.mSroce.anchorX=.5,this.mSroce.anchorY=.5,this.mSroce.x=40,this.mSroce.y=42,this.sroceContainer.addChild(this.mSroce),this.mAnim=GameTool.createMovieClipByName("correct_anim"),this.mAnim.anchorX=.5,this.mAnim.anchorY=.5,this.mAnim.x=40,this.mAnim.y=35,this.mAnim.visible=!1,this.sroceContainer.addChild(this.mAnim)},i.createPuzzle=function(t,e){this.puzzleContainer.removeChildren();for(var i=t.split("_"),n=0,r=0;r<i.length;++r){var s="",a="";0==r?s=r!=e?i[r]:"question":(a=i[r].charAt(0),s=r!=e?i[r].slice(1,i[r].length):"question",(a=new egret.Bitmap(RES.getRes(this.oppoChange(a)))).x=n,a.y=25,this.puzzleContainer.addChild(a),n+=38),(a=new Block).updateShape(s,"white"),a.x=n,this.puzzleContainer.addChild(a),n+=88,"question"==s&&(this.mQuestion=a)}},i.createBlocks=function(){Math.round(19*Math.random());for(var t=0;20>t;++t){var e=BlockManager.getInstance().createBlock("","");e.x=90*Math.round(t%5)+20,e.y=115*Math.floor(t/5),this.blockContainer.addChild(e)}},i.updateBlocks=function(){this.updateBlockArray();for(var t=0;20>t;++t)this.blockContainer.getChildAt(t).updateShape(this.blockArray[t],"orange")},i.destroyView=function(){for(this.touchContainer.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.mAnim.removeEventListener(egret.Event.COMPLETE,this.animComplete,this),this.mTimer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this.mTimer.stop(),this.mTimer.reset(),this.prossContainer.removeChildren(),this.sroceContainer.removeChildren(),this.puzzleContainer.removeChildren();this.blockContainer.numChildren;){var t=this.blockContainer.getChildAt(0);this.blockContainer.removeChild(t),BlockManager.getInstance().destroyBlock(t)}ImgNumManager.i().desstroyNumPic(this.mSroce),this.removeChildren()},i.resetData=function(){this.mPuzzle="",this.mIndex=0,this.mAnswer="",this.mWeight=0,this.allArray=[],this.blockArray=[],this.mTime=GameData.gameMaxTime,this.mRover=0,GameData.gamePause=!0,GameData.gameSroce=0,GameData.easyLevel=0,GameData.normalLevel=0,GameData.hardLevel=0},i.createNewPuzzle=function(){this.gameLevel(),this.puzzleContainer.x=1.5*GameData.stageWidth,this.getPuzzle(),this.getAnswer(this.mPuzzle,this.mIndex),this.createPuzzle(this.mPuzzle,this.mIndex),this.updateBlocks(),egret.Tween.get(this.puzzleContainer).to({x:GameData.stageWidth/2},250).call((function(){GameData.gamePause=!1}),this)},i.goPuzzleAnimation=function(){egret.Tween.get(this.puzzleContainer).to({x:1.5*-GameData.stageWidth},250).call((function(){this.mTime=this.mTime+this.mRover>GameData.gameMaxTime?GameData.gameMaxTime:this.mTime+this.mRover,this.isCombo&&(this.mTime++,this.comboAnimation()),this.updatePross(),this.createNewPuzzle()}),this)},i.oppoChange=function(t){return"-"==t?"subtraction":"+"==t?"plus":"="==t?"equal":""},i.getAnswer=function(t,e){var i=t.split("_");for(this.mAnswer=0==e?i[0]:i[e].slice(1,i[e].length),i=0;i<this.mAnswer.length;++i)"0"!=this.mAnswer.charAt(i)&&this.mWeight++},i.checkAnswer=function(t,e){for(var i=0;i<this.blockContainer.numChildren;++i){var n=this.blockContainer.getChildAt(i);if(t>=n.x&&t<n.x+80&&e>=n.y&&e<n.y+105)return n.Type==this.mAnswer?"next_"+n.Type:"error_"+n.Type}return""},i.checkCorrect=function(t){this.mQuestion.updateShape(t,"white"),GameData.gamePause=!0,egret.Tween.get(this).wait(250).call(this.goPuzzleAnimation,this)},i.checkError=function(t){this.mQuestion.updateShape(t,"red"),this.errorAnimation()},i.errorAnimation=function(){function t(){this.mTime=0,GameData.gameSound&&GameData.soundGameover.play(),this.gameOver()}GameData.gamePause=!0,egret.Tween.get(this).wait(800).call((function(){if(this.showAnswer(),null!=this.mAnswerBlock){var e=this.mAnswerBlock.y,i=e-20;egret.Tween.get(this.mAnswerBlock).to({y:i},150).to({y:e},150).to({y:i},150).to({y:e},150).to({y:i},150).to({y:e},150).wait(1500).call(t,this)}}),this)},i.showAnswer=function(){for(var t=0;t<this.blockContainer.numChildren;++t){var e=this.blockContainer.getChildAt(t);if(e.Type==this.mAnswer){this.mAnswerBlock=e,e.changeColor("green");break}}},i.gameLevel=function(){5>=GameData.gameSroce?(GameData.easyLevel=1,GameData.normalLevel=0,GameData.hardLevel=0,this.mRover=8):5<GameData.gameSroce&&15>=GameData.gameSroce?(GameData.easyLevel=1,GameData.normalLevel=1,GameData.hardLevel=0,this.mRover=4):15<GameData.gameSroce&&(GameData.easyLevel=1,GameData.normalLevel=1,GameData.hardLevel=1,this.mRover=2)},i.getPuzzle=function(){function t(t){for(var e=[],i=0;i<t.length;++i)"0"!=t.charAt(i)?e.push(t.charAt(i)):e.push("o");return e[0]+e[1]+e[2]+e[3]}function e(t,e){var i,n=[];t:{for(i=0;i<e.length;++i)if("o"!=e.charAt(i)){i=parseInt(e.charAt(i));break t}i=-1}for(var r=0;r<t.length;++r)for(var s=0;s<t[r].length;++s){var a=t[r][s];"0"!=a.charAt(0)&&"o"!=e.charAt(0)||"0"!=a.charAt(1)&&"o"!=e.charAt(1)||"0"!=a.charAt(2)&&"o"!=e.charAt(2)||"0"!=a.charAt(3)&&"o"!=e.charAt(3)||-1!=i&&i-1!=r&&n.push(t[r][s])}return n}var i="oooo",n="",r="",s=i="",a="";s=[],s=i=0,i=0;this.createAllArray(),1==GameData.easyLevel&&(i=Math.round(Math.random()*(this.allArray.length-1)),s=Math.round(9*Math.random()),i=t(n=this.allArray[i][s]),r=(s=e(this.allArray,i))[i=Math.round(Math.random()*(s.length-1))],a=this.AddType(n,r),50>Math.round(100*Math.random())?(this.mPuzzle=a+"_-"+r+"_="+n,this.mIndex=Math.round(1*Math.random())+1):(this.mPuzzle=n+"_+"+r+"_="+a,this.mIndex=Math.round(1*Math.random()))),1==GameData.normalLevel&&(50>(i=0==GameData.hardLevel?0:Math.round(100*Math.random()))?(i=t(a),0<(s=e(this.allArray,i)).length&&(i=s[i=Math.round(Math.random()*(s.length-1))],a=this.AddType(i,a),50>Math.round(100*Math.random())?(this.mPuzzle=a+"_-"+i+"_-"+r+"_="+n,this.mIndex=Math.round(1*Math.random())+2):(this.mPuzzle=n+"_+"+r+"_+"+i+"_="+a,this.mIndex=Math.round(2*Math.random())))):(i=t(a),0<(s=e(this.allArray,i)).length&&(i=s[i=Math.round(Math.random()*(s.length-1))],s=this.AddType(n,i),50>Math.round(100*Math.random())?(this.mPuzzle=s+"_-"+i+"_+"+r+"_="+a,this.mIndex=Math.round(1*Math.random())+1):(this.mPuzzle=r+"_+"+s+"_-"+i+"_="+a,n=[0,2],this.mIndex=n[Math.round(Math.random()*(n.length-1))]))))},i.AddType=function(t,e){return(parseInt(t.charAt(0))+parseInt(e.charAt(0))).toString()+(parseInt(t.charAt(1))+parseInt(e.charAt(1))).toString()+(parseInt(t.charAt(2))+parseInt(e.charAt(2))).toString()+(parseInt(t.charAt(3))+parseInt(e.charAt(3))).toString()},i.getRandomType=function(){for(var t="",e=0;4>e;++e)25>Math.round(100*Math.random())?t+="0":(t+=(Math.round(2*Math.random())+1).toString());return t},i.createAllArray=function(){this.allArray=[];for(var t=0;t<GameData.gameBlock.length;++t){this.allArray[t]=[];for(var e=0;e<GameData.gameBlock[t].length;++e)this.allArray[t][e]=GameData.gameBlock[t][e]}},i.updateBlockArray=function(){this.createAllArray(),this.blockArray=[];for(var t=!1,e=0;20>e;++e){var i=Math.round(Math.random()*(this.allArray.length-1)),n=Math.round(Math.random()*(this.allArray[i].length-1));this.blockArray.push(this.allArray[i][n]),this.allArray[i][n]==this.mAnswer&&(t=!0),this.allArray[i].splice(n,1),0==this.allArray[i].length&&this.allArray.splice(i,1)}t||(t=Math.round(Math.random()*(this.blockArray.length-1)),this.blockArray[t]=this.mAnswer)},i.updateSroce=function(){GameData.gameSroce++,ImgNumManager.i().changeNum(this.mSroce,GameData.gameSroce,"n"),this.mAnim.visible=!0,this.mAnim.gotoAndPlay("start")},i.updatePross=function(){this.prossMask.width=this.mTime/GameData.gameMaxTime*320},i.comboAnimation=function(){this.combo.visible=!0,this.combo.alpha=1,egret.Tween.get(this.combo).to({alpha:.2},200).to({alpha:1},200).to({alpha:.2},200).to({alpha:1},200).call((function(){this.combo.visible=!1}),this)},i.countDown=function(){this.mInfo.visible=!0,this.gameLevel(),this.puzzleContainer.x=1.5*GameData.stageWidth,this.getPuzzle(),this.getAnswer(this.mPuzzle,this.mIndex),this.createPuzzle(this.mPuzzle,this.mIndex),this.updateBlocks(),this.countDownAnimation(["num_3","num_2","num_1"],0)},i.countDownAnimation=function(t,e){function i(){GameData.gamePause=!1}this.mInfo.texture=RES.getRes(t[e]),this.mInfo.scaleX=2,this.mInfo.scaleY=2,egret.Tween.get(this.mInfo).to({scaleX:1,scaleY:1},250).wait(500).call((function(){e!=t.length-1?this.countDownAnimation(t,e+1):(this.mInfo.texture=null,this.mInfo.visible=!1,egret.Tween.get(this.puzzleContainer).to({x:GameData.stageWidth/2},250).call(i,this))}),this)},i.checkCombo=function(t){"next"==t?(this.isCombo||this.mCombo++,5<=this.mCombo&&(this.isCombo=!0,this.mCombo=5)):"error"==t&&(this.isCombo=!1,this.mCombo=0)},i.blockOverAnimation=function(){function t(){++e==this.blockContainer.numChildren-1&&GameEventManager.getInstance().dispatchEventWith(GameEvent.GAMEEVENT_OPEN_STARTUI)}var e=0;SG_HooksAPI.gameOver(1,GameData.gameSroce);for(var i=this.blockContainer.numChildren-1;0<=i;--i){var n=this.blockContainer.getChildAt(i),r=n.y+500;egret.Tween.get(n).wait(20*(this.blockContainer.numChildren-1-i)).to({y:r},300).call(t,this)}},i.uiOverAnimation=function(){egret.Tween.get(this.prossContainer).to({y:-200},350),egret.Tween.get(this.sroceContainer).wait(250).to({y:-200},350),egret.Tween.get(this.mOver).wait(250).to({y:-200},400),egret.Tween.get(this).wait(250).call(this.blockOverAnimation,this)},i.gameStart=function(){GameData.gamePause=!0,SG_HooksAPI.levelStarted(1,GameData.gameSroce),this.resetData(),this.touchContainer.touchEnabled=!0,this.touchContainer.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.mAnim.addEventListener(egret.Event.COMPLETE,this.animComplete,this),this.mTimer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this.mTimer.start(),this.countDown()},i.gameOver=function(){SG_HooksAPI.levelFinished(1,GameData.gameSroce),this.touchContainer.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.mAnim.removeEventListener(egret.Event.COMPLETE,this.animComplete,this),GameData.gameSroce>GameData.gameMax&&(GameData.gameMax=GameData.gameSroce),GameTool.saveData(),this.mOver.visible=!0,this.puzzleContainer.visible=!1,this.mInfo.visible=!0,SG_Hooks.triggerMidroll(function(){egret.Tween.get(this).wait(1e3).call(this.uiOverAnimation,this)}.bind(this))},i.onTouch=function(t){GameData.gamePause||(t=this.checkAnswer(t.localX,t.localY).split("_"),this.checkCombo(t[0]),"next"==t[0]?(this.updateSroce(),this.checkCorrect(t[1]),SG_Hooks.levelFinished(1,GameData.gameSroce),GameData.gameSound&&GameData.soundCorrect.play()):"error"==t[0]&&(this.checkError(t[1]),GameData.gameSound&&GameData.soundError.play()))},i.animComplete=function(t){this.mAnim.visible=!1},i.onTimer=function(t){GameData.gamePause||(0<this.mTime?(this.mTime--,this.updatePross()):(this.mTime=0,this.mTimer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this.mTimer.stop(),this.mTimer.reset(),GameData.gameSound&&GameData.soundError.play(),this.errorAnimation()))},e}(egret.DisplayObjectContainer);GameView.prototype.__class__="GameView";var GuideUI=function(t){function e(){t.call(this),this.isLoop=!1,this.createView(),this.createFinger(),this.initEvents()}__extends(e,t);var i=e.prototype;return i.createView=function(){var t=GameTool.createBitmapByName("background_png");this.addChild(t),this.img1=GameTool.createBitmapByName("guide_1_png"),this.img1.x=0,this.img1.y=120,this.img1.visible=!1,this.addChild(this.img1),this.img2=GameTool.createBitmapByName("guide_2_png"),this.img2.x=0,this.img2.y=270,this.img2.visible=!1,this.addChild(this.img2),this.img3=GameTool.createBitmapByName("guide_3_png"),this.img3.x=0,this.img3.y=395,this.img3.visible=!1,this.addChild(this.img3),this.img4=GameTool.createBitmapByName("guide_4_png"),this.img4.x=181.5,this.img4.y=476,this.img4.visible=!1,this.addChild(this.img4),this.fingerContainer=new egret.DisplayObjectContainer,this.fingerContainer.visible=!1,this.addChild(this.fingerContainer),(t=new egret.Shape).graphics.beginFill(4798539,1),t.graphics.drawRect(0,0,GameData.stageWidth,96),t.graphics.endFill(),this.addChild(t),(t=new egret.Shape).graphics.beginFill(4798539,1),t.graphics.drawRect(0,GameData.stageHeight-105,GameData.stageWidth,105),t.graphics.endFill(),this.addChild(t),this.mBtnPlay=GameTool.createBitmapByName("btn_play"),this.mBtnPlay.anchorX=.5,this.mBtnPlay.anchorY=.5,this.mBtnPlay.x=GameData.stageWidth/2,this.mBtnPlay.y=800,this.mBtnPlay.touchEnabled=!0,this.addChild(this.mBtnPlay)},i.createFinger=function(){var t=GameTool.createBitmapByName("finger_shadow");t.anchorX=.5,t.x=-10,t.y=10,this.fingerContainer.addChild(t),(t=GameTool.createBitmapByName("finger")).anchorX=.5,this.fingerContainer.addChild(t),(t=GameTool.createBitmapByName("click")).anchorX=.5,t.anchorY=.5,t.x=-35,t.y=-10,t.visible=!1,this.fingerContainer.addChild(t)},i.destroyView=function(){this.removeEvents(),this.removeChildren()},i.initEvents=function(){this.mBtnPlay.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},i.removeEvents=function(){this.mBtnPlay.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},i.guidePlay=function(){function t(){this.img2.visible=!0,this.isLoop&&egret.Tween.get(this).wait(1500).call(e,this)}function e(){this.img3.visible=!0,this.isLoop&&egret.Tween.get(this).wait(1e3).call(this.fingerAnimation,this)}this.isLoop=!0,egret.Tween.get(this).wait(500).call((function(){this.img1.visible=!0,this.isLoop&&egret.Tween.get(this).wait(1500).call(t,this)}),this)},i.fingerAnimation=function(){this.isLoop&&(this.img4.visible=!1,this.fingerContainer.visible=!0,this.fingerContainer.x=340,this.fingerContainer.y=560,this.fingerContainer.getChildAt(0).visible=!0,this.fingerContainer.getChildAt(2).visible=!1,egret.Tween.get(this.fingerContainer).to({x:230,y:490},1e3).call(this.fingerHit,this))},i.fingerHit=function(){this.fingerContainer.getChildAt(0).visible=!1,this.fingerContainer.getChildAt(2).visible=!0,this.img4.visible=!0,egret.Tween.get(this.fingerContainer).wait(1e3).call(this.fingerAnimation,this)},i.onTouch=function(t){this.isLoop=!1,1==GameData.isFrist&&(GameData.isFrist=0),GameEventManager.getInstance().dispatchEventWith(GameEvent.GAMEEVENT_OPEN_GAMEUI)},e}(egret.DisplayObjectContainer);GuideUI.prototype.__class__="GuideUI";var StartUI=function(t){function e(){t.call(this),this.uiPause=!1,this.uiPause=!0,this.createView(),this.initEvent()}__extends(e,t);var i=e.prototype;return i.createView=function(){var t=GameTool.createBitmapByName("background_png");this.addChild(t),this.mTitle=GameTool.createBitmapByName("title_png"),this.mTitle.anchorX=.5,this.mTitle.x=GameData.stageWidth/2,this.mTitle.y=170,this.addChild(this.mTitle),this.sroceContainer=new egret.DisplayObjectContainer,this.addChild(this.sroceContainer),this.mScore=GameTool.createBitmapByName("score"),this.mScore.anchorX=.5,this.mScore.x=GameData.stageWidth/2,this.mScore.y=320,this.sroceContainer.addChild(this.mScore),this.scoreText=GameTool.createTextField(this.sroceContainer,GameData.stageWidth/2,350,GameData.stageWidth,GameData.gameFontType,"center",GameData.gameFontType,16777215,0,0,!0),this.scoreText.bold=!0,this.scoreText.text=GameData.gameLanguage[1],this.bestText=GameTool.createTextField(this.sroceContainer,GameData.stageWidth/2,445,GameData.stageWidth,GameData.gameFontType-10,"center",GameData.gameFontType-10,16777215,0,0,!0),this.bestText.bold=!0,this.bestText.text=GameData.gameLanguage[2],this.mTextScore=ImgNumManager.i().createNumPic(0,"n"),this.mTextScore.anchorX=.5,this.mTextScore.x=GameData.stageWidth/2,this.mTextScore.y=375,this.sroceContainer.addChild(this.mTextScore),this.mTextBest=ImgNumManager.i().createNumPic(0,"v"),this.mTextBest.anchorX=.5,this.mTextBest.x=GameData.stageWidth/2,this.mTextBest.y=470,this.sroceContainer.addChild(this.mTextBest),this.mBtnStart=this.createButton("start",(GameData.stageWidth-175)/2,565),this.addChild(this.mBtnStart),this.mBtnHelp=this.createButton("help",60,700),this.addChild(this.mBtnHelp),this.mBtnMore=this.createButton("more",200,700),this.addChild(this.mBtnMore),this.mBtnMore.visible=!1,this.mBtnSound=this.createButton("sound",340,700),this.addChild(this.mBtnSound)},i.initEvent=function(){this.mBtnStart.touchEnabled=!0,this.mBtnHelp.touchEnabled=!0,this.mBtnMore.touchEnabled=!0,this.mBtnSound.touchEnabled=!0,this.mBtnStart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.mBtnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.mBtnMore.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.mBtnSound.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},i.destroyView=function(){this.mBtnStart.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.mBtnHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.mBtnMore.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.mBtnSound.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.removeChildren(),ImgNumManager.i().desstroyNumPic(this.mTextScore),ImgNumManager.i().desstroyNumPic(this.mTextBest)},i.createButton=function(t,e,i){var n;return(n="sound"!=t?GameTool.createBitmapByName("btn_"+t):GameData.gameSound?GameTool.createBitmapByName("btn_"+t+"_on"):GameTool.createBitmapByName("btn_"+t+"_off")).x=e,n.y=i,n.name=t,n},i.animationView=function(){function t(){egret.Tween.get(this.mBtnHelp).to({y:700},400,egret.Ease.backOut),egret.Tween.get(this.mBtnMore).wait(250).to({y:700},400,egret.Ease.backOut),egret.Tween.get(this.mBtnSound).wait(500).to({y:700},400,egret.Ease.backOut).call(e,this)}function e(){this.uiPause=!1}this.updateScore(),this.mTitle.y=-200,this.sroceContainer.x=GameData.stageWidth,this.mBtnHelp.y=GameData.stageHeight,this.mBtnMore.y=GameData.stageHeight,this.mBtnStart.x=-this.mBtnStart.width,this.mBtnSound.y=GameData.stageHeight,egret.Tween.get(this.mTitle).to({y:170},500,egret.Ease.backOut).call((function(){egret.Tween.get(this.mBtnStart).to({x:152.5},400,egret.Ease.backOut),egret.Tween.get(this.sroceContainer).to({x:0},400,egret.Ease.backOut).call(t,this)}),this)},i.updateScore=function(){ImgNumManager.i().changeNum(this.mTextScore,GameData.gameSroce,"n"),ImgNumManager.i().changeNum(this.mTextBest,GameData.gameMax,"v")},i.onClick=function(t){if(!this.uiPause)switch(t.currentTarget.name){case"start":0==GameData.isFrist?GameEventManager.getInstance().dispatchEventWith(GameEvent.GAMEEVENT_OPEN_GAMEUI):GameEventManager.getInstance().dispatchEventWith(GameEvent.GAMEEVENT_OPEN_GUIDEUI);break;case"help":GameEventManager.getInstance().dispatchEventWith(GameEvent.GAMEEVENT_OPEN_GUIDEUI);break;case"more":break;case"sound":GameData.gameSound?(GameData.gameSound=!1,this.mBtnSound.texture=RES.getRes("btn_sound_off")):(GameData.gameSound=!0,this.mBtnSound.texture=RES.getRes("btn_sound_on"))}},e}(egret.DisplayObjectContainer);StartUI.prototype.__class__="StartUI";var GameContainer=function(){function t(){}return t.openStartUI=function(){var t=new StartUI;t.name="startUI",this.thisObj.addChild(t),t.animationView()},t.closeStartUI=function(){var t=this.thisObj.getChildByName("startUI");t&&(this.thisObj.removeChild(t),t.destroyView())},t.openGameUI=function(){var t=new GameView;t.name="gameUI",this.thisObj.addChild(t),t.gameStart()},t.closeGameUI=function(){var t=this.thisObj.getChildByName("gameUI");t&&(this.thisObj.removeChild(t),t.destroyView())},t.openGuideUI=function(){var t=new GuideUI;t.name="guide",this.thisObj.addChild(t),t.guidePlay()},t.closeGuideUI=function(){var t=this.thisObj.getChildByName("guide");t&&(t.destroyView(),this.thisObj.removeChild(t))},t}();GameContainer.prototype.__class__="GameContainer";var LoadingUI=function(t){function e(){t.call(this),this.isOver=!1,this.createView()}__extends(e,t);var i=e.prototype;return i.createView=function(){var t=new egret.Shape;t.graphics.beginFill(12973772,1),t.graphics.drawRect(0,0,GameData.stageWidth,GameData.stageHeight),t.graphics.endFill(),this.addChild(t),(t=GameTool.createBitmapByName("logo_big_png")).anchorX=.5,t.anchorY=.5,t.x=GameData.stageWidth/2,t.y=GameData.stageHeight/2,this.addChild(t),t.visible=!1,this.loading=GameTool.createBitmapByName("loadingwindow_png"),this.loading.x=(GameData.stageWidth-this.loading.width)/2,this.loading.y=523,this.addChild(this.loading),this.loadText=ImgNumManager.i().createNumPic(0,"l"),this.loadText.anchorX=1,this.loadText.x=370,this.loadText.y=510,this.addChild(this.loadText)},i.destroyView=function(){egret.Tween.removeAllTweens(),ImgNumManager.i().desstroyNumPic(this.loadText),this.removeChildren()},i.setProgress=function(t,e){var i=Math.round(t/e*100);ImgNumManager.i().changeNum(this.loadText,i,"l")},i.overComplete=function(){this.isOver=!0,GameEventManager.getInstance().dispatchEventWith(GameEvent.GAMEEVENT_LOAD_COMPLETE)},e}(egret.DisplayObjectContainer);LoadingUI.prototype.__class__="LoadingUI";var Main=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=e.prototype;return i.onAddToStage=function(t){SG_Hooks.createSplashLoader(),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/resource.json","resource/")},i.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("loading")},i.onResourceLoadComplete=function(t){"loading"==t.groupName?(this.loadView=new LoadingUI,this.stage.addChild(this.loadView),RES.loadGroup("preload")):"preload"==t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.loadLanguage(),this.loadData(),this.loadView.destroyView(),this.stage.removeChild(this.loadView),this.createGameScene())},i.onResourceLoadError=function(t){},i.onResourceProgress=function(t){"preload"==t.groupName&&this.loadView.setProgress(t.itemsLoaded,t.itemsTotal)},i.onLoadComplete=function(){this.loadView.parent&&(GameEventManager.getInstance().removeEventListener(GameEvent.GAMEEVENT_LOAD_COMPLETE,this.onLoadComplete,this),this.stage.removeChild(this.loadView),this.loadView.destroyView(),this.createGameScene())},i.createGameScene=function(){GameData.gameLanguageType=SG_HooksAPI.getLanguage(GameData.languageType),this.getLanguage(GameData.gameLanguageType),SG_HooksAPI.start(),SG_HooksAPI.setOrientationHandler(this.apiTest),SG_HooksAPI.setResizeHandler(this.apiTest),GameData.gameFontType="cn"==GameData.gameLanguageType||"fr"==GameData.gameLanguageType||"it"==GameData.gameLanguageType||"tr"==GameData.gameLanguageType||"pl"==GameData.gameLanguageType?40:"ru"==GameData.gameLanguageType?36:42,this.gameLayout=new egret.DisplayObjectContainer,this.addChild(this.gameLayout),GameContainer.thisObj=this.gameLayout,GameEventManager.getInstance().dispatchEventWith(GameEvent.GAMEEVENT_OPEN_STARTUI),SG_Hooks.onLoadProgress(100),SG_Hooks.loadingComplete()},i.loadData=function(){GameTool.loadData(),GameData.soundCorrect=RES.getRes("score_mp3"),GameData.soundError=RES.getRes("error_mp3"),GameData.soundGameover=RES.getRes("gameover_mp3"),GameData.soundCorrect.type=egret.Sound.EFFECT,GameData.soundError.type=egret.Sound.EFFECT,GameData.soundGameover.type=egret.Sound.EFFECT},i.loadLanguage=function(){GameData.gameLanguages=RES.getRes("language_json");for(var t=0;t<GameData.gameLanguages.length;++t)GameData.languageType.push(GameData.gameLanguages[t].language)},i.getLanguage=function(t){for(var e=0;e<GameData.gameLanguages.length;++e)if(GameData.gameLanguages[e].language==t){GameData.gameLanguage=GameData.gameLanguages[e].information;break}0==GameData.gameLanguage.length&&(GameData.gameLanguage=GameData.gameLanguages[0].information)},i.apiTest=function(){},e}(egret.DisplayObjectContainer);Main.prototype.__class__="Main";