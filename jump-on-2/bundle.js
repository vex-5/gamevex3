!function(e,t){"use strict";var i=function(e){function i(i){e.call(this);var n=this.addChild(new t.Container);this.on("text",(function(e){n.removeChildren();var a=0,s=-9999,o=[];e.text+="";for(var r=0;r<e.text.length;r++){var c=n.addChild(new t.Sprite(i.resources.images[e.prefix+e.text[r]+".png"]));c.tint=void 0===e.color?16777215:e.color,c.height>s&&(s=c.height),o.push(c)}if(e.isMonoSpace){var h=n.addChild((new t.Graphics).beginFill(0,.001).drawRect(0,0,e.width*e.text.length,e.height).endFill()),l=0;for(var p in o)o[p].x=a+.5*e.width-.5*o[p].width,o[p].y=.5*e.height-.5*o[p].height,o[p].x<l&&(l=o[p].x),a+=e.width;for(var d in o)o[d].x+=Math.abs(l);h.x=Math.abs(l)}else for(var u in o)o[u].x=a,a+=e.width*e.space}))}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i}(e.Container),n=function(e){function i(i,n){var s=this;e.call(this);var o,r=this.addChild(new t.Graphics),c=this.addChild(new t.Container),h=255,l=!1,p=function(e){if(l){l=!1,e||s.emit("bttap");var t=c.scale.x,i=h;a.tween({target:s,name:"pushanm",time:4,main:function(e){h=a.cubic(i,255,e),c.scale.set(a.cubic(t,1,e))},finish:function(){e||s.emit("bttapanimeend")}})()}};this.on("pointerdown",(function(){!function(){if(!l){l=!0;var e=c.scale.x,t=h;a.tween({target:s,name:"pushanm",time:4,main:function(i){h=a.cubic(t,180,i),c.scale.set(a.cubic(e,.96,i))},finish:function(){}})()}}()})),this.on("pointerup",(function(){p(!1)})),this.on("pointerupoutside",(function(){p(!0)})),this.on("pointerout",(function(){p(!0)})),this.interactive=!0,this.on("spritechange",(function(e){c.removeChildren(),(o=c.addChild(n[Math.min(e,n.length-1)])).x=.5*-o.width,o.y=.5*-o.height,r.clear(),r.beginFill(0,.001).drawRect(0,0,o.width,o.height).endFill(),r.x=.5*-r.width,r.y=.5*-r.height})),this.on("setcollusion",(function(e){r.clear(),r.beginFill(0,.001).drawRect(0,0,o.width+e.width,o.height+e.height).endFill(),r.x=.5*-r.width+e.offx,r.y=.5*-r.height+e.offy})),this.emit("spritechange",0)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i}(e.Container),a=function(){};a.parseTimeData=function(e){return{sec:Math.floor(e/60)%60,min:Math.floor(e/3600)%60,hour:Math.floor(e/216e3)}},a.parseFrameData=function(e,t,i){return 216e3*e+3600*t+60*i},a.parse24BitColorCode=function(e,t,i){return Math.floor(i)+256*Math.floor(t)+256*Math.floor(e)*256},a.GetHSVColor=function(e,t,i){var n=0,s=0,o=0;e>=0&&e<60?(n=255,s=e/60*255,o=0):e>=60&&e<120?(n=255*(1-(e-60)/60),s=255,o=0):e>=120&&e<180?(n=0,s=255,o=(e-120)/60*255):e>=180&&e<240?(n=0,s=255*(1-(e-180)/60),o=255):e>=240&&e<300?(n=(e-240)/60*255,s=0,o=255):e>=300&&e<360&&(n=255,s=0,o=255*(1-(e-300)/60));var r=1-t/255;n+=(255-n)*r,s+=(255-s)*r,o+=(255-o)*r;var c=i/255;return n*=c,s*=c,o*=c,a.parse24BitColorCode(Math.floor(n),Math.floor(s),Math.floor(o))},a.tween=function(e){return function(){var t=1/e.time,i=0;e.target.task.clear(e.name),e.target.task.on(e.name,(function(n){e.main(i),i<1?i=Math.min(1,i+t*n.delta):(e.target.task.clear(e.name),e.finish())}))}},a.cubic=function(e,t,i){return(1-i)*e+i*t},a.arrayShuffle=function(e){for(var t=e.length-1;0<t;t--){var i=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[i],e[i]=n}return e},a.X2Array=function(e,t,i,n){for(var a=0;a<e;a++){i.push([]);for(var s=0;s<t;s++)i[a].push(n(a,s))}},a.tmod=function(e,t){var i=Math.abs(e)%t;return e<0?t-(0===i?t:i):i},a.getPercentageID=function(e){for(var t=e.reduce((function(e,t){return e+t})),i=Math.floor(t*Math.random()),n=0,a=0,s=0;s<e.length;s++)if(i<(a+=e[s])){n=s;break}return n},a.convertCSVtoJSON=function(e){var t=e.split(/,|\r/),i=[],n={};i.push([]);for(var a=0;a<t.length;a++)t[a].match(/\n/)&&i.push([]),i[i.length-1].push(t[a].replace(/\r|\n/,""));for(var s=1;s<i[0].length;s++)for(var o=i[0][s],r=1;r<i.length;r++)n[o]||(n[o]={}),isNaN(i[r][s])||(n[o][i[r][0]]=Math.floor(i[r][s]));return n},a.RandomSelect=function(e,t){for(var i=[],n=[],s=0;s<e.length;s++)i.push(s);i=a.arrayShuffle(i);for(var o=Math.min(t,i.length),r=0;r<o;r++)n.push(e[i[r]]);return n},a.isCossLine=function(e,t,i,n,a,s,o,r){return((e-i)*(s-t)+(t-n)*(e-a))*((e-i)*(r-t)+(t-n)*(e-o))<0&&((a-o)*(t-s)+(s-r)*(a-e))*((a-o)*(n-s)+(s-r)*(a-i))<0},a.getCrossPoint=function(e,t){var i=e.start.x,n=e.start.y,a=e.end.x,s=e.end.y,o=t.start.x,r=t.start.y,c=t.end.x,h=t.end.y,l=(s-n)/(a-i),p=(h-r)/(c-o),d=(l*i-n-p*o+r)/(l-p),u=(s-n)/(a-i)*(d-i)+n;return Math.abs(l)!==Math.abs(p)&&(!(d>Math.max(i,a)||d>Math.max(o,c)||u>Math.max(n,s)||u>Math.max(r,h)||d<Math.min(i,a)||d<Math.min(o,c)||d<Math.min(i,a)||u<Math.min(r,h))&&{x:d,y:u})};var s,o=function(s){function o(o,h,l){var p=this;s.call(this);var d=this.addChild(new e.Container),u=d.addChild(new e.Container),g=d.addChild(new e.Container),m=d.addChild(new e.Container),f=d.addChild(new e.Container),v=g.addChild(new e.Container),w=v.addChild(new t.Sprite(o.resources.images["coin_1.png"])),_=v.addChild(new i(o));_.emit("text",{prefix:"",text:h.save.coin+"",width:180,height:225,isMonoSpace:!0,space:1,color:16777215}),_.scale.set(24/_.height),_.x=w.width+140-_.width,_.y=.5*w.height-.5*_.height;var b=v.addChild((new t.Graphics).beginFill(16777215,1).drawRect(0,0,v.width+8,2).endFill());b.y=w.height,b.visible=!1,v.x=.5*o.width-.5*v.width,v.y=24;var y=u.addChild(new t.Sprite(l.resource.getResource("cmn","images","logo_2x.png")));y.scale.set(.5),y.x=Math.floor(.5*o.width-.5*y.width),y.y=160;var C=u.addChild(new e.Container),x=C.addChild(new t.Sprite(o.resources.images["BEST-SCORE.png"])),M=C.addChild(new i(o));x.scale.set(20/x.height),M.emit("text",{prefix:"",text:h.save.bestscore+"",width:180,height:225,isMonoSpace:!0,space:1,color:16777215}),M.scale.set(32/M.height),x.x=.5*-x.width,M.x=.5*-M.width,M.y=x.height+10,C.x=.5*o.width,C.y=350;var S=u.addChild(new n(o,[new t.Sprite(o.resources.images["t_tap_2x.png"])]));S.scale.set(.5),S.emit("spritechange",0),S.emit("setcollusion",{offx:0,offy:-250,width:600,height:500}),S.x=.5*o.width,S.y=650,S.once("bttap",(function(){h.snd.emit("play",{name:"button.mp3",isloop:!1}),R()}));var k=u.addChild(new n(o,[new t.Sprite(o.resources.images["button_2x.png"])]));k.scale.set(.5),k.emit("spritechange",0),k.x=.5*o.width,k.y=720,k.on("bttap",(function(){h.snd.emit("play",{name:"button.mp3",isloop:!1}),E()}));var O=u.addChild(new n(o,[new t.Sprite(o.resources.images["sound_01_2x.png"]),new t.Sprite(o.resources.images["sound_02_2x.png"])]));if(O.scale.set(.5),O.emit("spritechange",h.save.isMute?1:0),O.x=o.width-.5*O.width-8,O.y=.5*O.height+8,O.on("bttap",(function(){h.save.isMute=!h.save.isMute,O.emit("spritechange",h.save.isMute?1:0)})),o.vars.env.languages&&o.vars.env.languages.length>1){var j=!1,A=null,L=f.addChild(new n(o,[new t.Sprite(o.resources.spritesheets.languageui["language_button_1_2x.png"]),new t.Sprite(o.resources.spritesheets.languageui["language_button_2_2x.png"])]));L.scale.set(.5),L.emit("spritechange",0),L.x=.5*L.width+10,L.y=o.height-.5*L.height-10,L.on("bttap",(function(){h.snd.emit("play",{name:"button.mp3",isloop:!1}),j?(j=!1,u.interactive=u.interactiveChildren=!0,L.emit("spritechange",0),A&&A.emit("pop"),A=null):(j=!0,u.interactive=u.interactiveChildren=!1,L.emit("spritechange",1),(A=m.addChild(new c(o,h))).once("changelanguage",(function(e){p.emit("changelanguage",e)})),A.once("pop",(function(){A.task.clear(),A.destroy()})))}))}var E=function(){p.interactive=p.interactiveChildren=!1,u.interactive=u.interactiveChildren=!1,p.emit("fieldmove",-240),p.emit("setshoplayervisible",!0);var e=g.addChild(new r(o,h));e.once("finish",(function(){p.emit("fieldmove",0),p.emit("setshoplayervisible",!1),a.tween({target:p,name:"endanime",time:14,main:function(e){var t=1-Math.pow(1-e,2);u.alpha=e,u.y=a.cubic(48,0,t)},finish:function(){u.interactive=u.interactiveChildren=!0}})()})),e.on("buyitem",(function(e){_.emit("text",{prefix:"",text:h.save.coin+"",width:180,height:225,isMonoSpace:!0,space:1,color:16777215}),_.x=w.width+140-_.width,p.emit("buyitem",e)})),e.once("pop",(function(){e.task.clear(),e.destroy()})),a.tween({target:p,name:"beginanime",time:14,main:function(e){var t=e*e;u.alpha=1-e,u.y=a.cubic(0,48,t)},finish:function(){p.interactive=p.interactiveChildren=!0}})()},R=function(){p.interactive=p.interactiveChildren=!1,a.tween({target:p,name:"endanime",time:8,main:function(e){d.alpha=1-e},finish:function(){p.emit("pop")}})(),p.emit("pop")};d.alpha=.001,p.interactive=p.interactiveChildren=!1,a.tween({target:p,name:"beginanime",time:22,main:function(e){var t=1-Math.pow(1-e,2);d.alpha=e,d.y=-28*(1-t)},finish:function(){p.interactive=p.interactiveChildren=!0}})()}return s&&(o.__proto__=s),o.prototype=Object.create(s&&s.prototype),o.prototype.constructor=o,o}(e.Container),r=function(i){function s(s,o){var r=this;i.call(this);var c=this.addChild(new e.Container),h=c.addChild(new t.Sprite(s.resources.images["t_shop_2x.png"]));h.scale.set(.5),h.x=.5*s.width-.5*h.width,h.y=110;for(var l=function(){o.save.coin<100&&(f.interactive=f.interactiveChildren=!1,f.alpha=.5)},p=new t.Sprite(s.resources.images["button_3_2x.png"]),d=new t.Container,u=0,g=0;g<"100".length;g++){var m=d.addChild(new t.Sprite(s.resources.images["100"[g]+".png"]));m.tint=4078137,m.scale.set(.28),m.x=u,u+=m.width}d.x=.5*p.width+32-.5*d.width,d.y=.5*p.height-.5*d.height,p.addChild(d);var f=c.addChild(new n(s,[p]));f.scale.set(.5),f.emit("spritechange",0),f.x=.5*s.width,f.y=220,f.on("bttap",(function(){for(var e=[],t=0;t<o.save.skin.length;t++)o.save.skin[t].isrelease||e.push(t);var i=e[Math.floor(Math.random()*e.length)];o.save.skin[i].isrelease=!0,o.save.coin=Math.max(0,o.save.coin-100),l(),o.snd.emit("play",{name:"button.mp3",isloop:!1}),r.emit("buyitem",i)})),l();var v=c.addChild(new n(s,[new t.Sprite(s.resources.images["t_ok_2x.png"])]));v.scale.set(.5),v.emit("spritechange",0),v.emit("setcollusion",{offx:0,offy:0,width:600,height:64}),v.x=.5*s.width,v.y=s.height-74,v.on("bttap",(function(){r.emit("finish"),o.snd.emit("play",{name:"button.mp3",isloop:!1}),w()})),c.alpha=.001;var w=function(){a.tween({target:r,name:"endanime",time:14,main:function(e){var t=1-Math.pow(1-e,2);c.alpha=1-e,c.y=a.cubic(0,-48,t)},finish:function(){r.emit("pop")}})()};c.alpha=.001,a.tween({target:r,name:"beginanime",time:14,main:function(e){var t=1-Math.pow(1-e,2);c.alpha=e,c.y=a.cubic(-48,0,t)},finish:function(){}})()}return i&&(s.__proto__=i),s.prototype=Object.create(i&&i.prototype),s.prototype.constructor=s,s}(e.Container),c=function(i){function s(s,o){var r=this;i.call(this);var c=this.addChild(new e.Container),h=(c.addChild(new t.Graphics).beginFill(0,.7).drawRect(0,0,s.width,s.height).endFill(),c.addChild(new e.Container)),l=h.addChild(new t.Sprite(s.resources.spritesheets.languageui["language_pop_2x.png"])),p=h.addChild(new t.Sprite(s.resources.spritesheets.languageui["language_title_2x.png"]));l.scale.set(.5),p.scale.set(.5),p.x=.5*l.width-.5*p.width,p.y=50;for(var d=0,u=h.addChild(new e.Container),g=function(e){var i=s.vars.env.languages[e],a=s.resources.spritesheets.languages["lang_"+i];if(a){var o=i===s.vars.api.getLanguage(),c=new t.Sprite(s.resources.spritesheets.languageui[o?"language_button_4_2x.png":"language_button_3_2x.png"]),h=c.addChild(new t.Sprite(a));h.x=.5*c.width-.5*h.width,h.y=.5*c.height-.5*h.height;var l=u.addChild(new n(s,[c]));l.emit("spritechange",0),l.scale.set(.5),l.x=.5*l.width,l.y=.5*l.height+88*d,l.on("bttap",(function(){r.emit("changelanguage",i)})),l.interactive=l.interactiveChildren=!o,d++}},m=0;m<s.vars.env.languages.length;m++)g(m);u.x=.5*l.width-.5*u.width,u.y=.5*l.height-.5*u.height,h.x=.5*s.width-.5*h.width,h.y=.5*s.height-.5*h.height;a.tween({target:r,name:"beginanime",time:14,main:function(e){},finish:function(){}})()}return i&&(s.__proto__=i),s.prototype=Object.create(i&&i.prototype),s.prototype.constructor=s,s}(e.Container);!function(e){e[e.GROUND=0]="GROUND",e[e.DOTGROUND=1]="DOTGROUND",e[e.WALL=2]="WALL",e[e.MOVEWALL=3]="MOVEWALL",e[e.MOVEWALL2=4]="MOVEWALL2",e[e.TIMEITEM=5]="TIMEITEM",e[e.WARPITEM=6]="WARPITEM",e[e.SWITCHITEM=7]="SWITCHITEM",e[e.COINITEM=8]="COINITEM"}(s||(s={}));var h=function(e){function t(t,i,n){var s=this;e.call(this);var r={score:0,coin:0,nowfloor:0},c=0,h=this.addChild(new l(t,i,r));h.on("gameover",(function(){i.snd.emit("allstop"),i.snd.emit("play",{name:"gameover.mp3",isloop:!1}),c<1&&t.vars.env.isAdPlatform?u():d()}));var p,d=function(){var e=function(a){var o=s.addChild(new C(t,i,r,a,n));o.once("pop",(function(t){o.task.clear(),o.destroy(),"ads"===t?s.emit("rewordads",{finish:function(){r.coin*=2,i.save.coin+=r.coin,e(!0)},skip:function(){e(!1)},error:function(){e(!1)}}):(a||(i.save.coin+=r.coin),s.emit("save",(function(){s.emit("scoreregister",(function(){s.emit("pop")}),r.score)})))}))};i.save.bestscore=Math.max(i.save.bestscore,r.score),e(!1)},u=function(){var e=s.addChild(new y(t,i,r,n));e.once("pop",(function(t){e.task.clear(),e.destroy(),"yes"===t?s.emit("rewordads",{finish:function(){c++,h.emit("continue")},skip:function(){u()},error:function(){u()}}):d()}))};(p=s.addChild(new o(t,i,n))).once("changelanguage",(function(e){s.emit("changelanguage",e)})),p.on("buyitem",(function(e){h.emit("buyitem",e)})),p.on("fieldmove",(function(e){var t=h.y;a.tween({target:s,name:"shopfieldmoveanime00",time:14,main:function(i){var n=a.cubic(i*i,1-Math.pow(1-i,2),i);h.y=a.cubic(t,e,n)},finish:function(){}})()})),p.on("setshoplayervisible",(function(e){h.emit("setshoplayervisible",e)})),p.once("pop",(function(){t.vars.api.callAsync("playGame").then((function(){p.task.clear(),p.destroy(),h.emit("gamestart"),i.snd.emit("play",{name:"bgm.mp3",isloop:!0})}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(e.Container),l=function(i){function n(n,o,r){var c=this;i.call(this);var h=this.addChild(new e.Container),l=this.addChild(new e.Container),u=l.addChild(new e.Container),g=u.addChild(new e.Container),m=u.addChild(new e.Container),f=u.addChild(new e.Container),_=u.addChild(new e.Container),b=u.addChild(new e.Container),y=this.addChild(new e.Container),C=this.addChild(new e.Container),x=this.addChild(new e.Container),M=this.addChild(new w(n,o,r));M.x=.5*n.width,M.y=24;var S=y.addChild(new L(n)),E=this.addChild((new t.Graphics).beginFill(0,.001).drawRect(0,0,n.width,n.height).endFill()),R=n.height-190,I=0,P=I,T=0,G=0,N=null,F=0,W=-1,D=-999,V=!1,B=!1,U=!0,$=[],Y=C.addChild(new v(n,o,r));Y.x=.5*n.width,Y.y=190,Y.on("timeover",(function(){H(),te.emit("deathanime",(function(){te.x=-9999,te.visible=!1,X(50,16777215,.85,(function(){c.emit("gameover")}))}))})),Y.on("timewarn",(function(){X(30,16711680,.3,(function(){}))})),l.x=-6,u.y=R;var J=function(){for(var e=0;e<$.length;e++)for(var t=0;t<$[e].objects.length;t++)$[e].objects[t].objecttype===s.COINITEM&&($[e].objects[t].isexist=!0,$[e].objects[t].emit("beginanim"));var i=a.tween({target:x,name:"coinsystemtask",time:420,main:function(e){},finish:function(){for(var e=0;e<$.length;e++)for(var t=0;t<$[e].objects.length;t++)$[e].objects[t].objecttype===s.COINITEM&&$[e].objects[t].isexist&&$[e].objects[t].emit("warnanim");n()}}),n=a.tween({target:x,name:"coinsystemtask",time:180,main:function(e){},finish:function(){for(var e=0;e<$.length;e++)for(var t=0;t<$[e].objects.length;t++)$[e].objects[t].objecttype===s.COINITEM&&$[e].objects[t].isexist&&($[e].objects[t].isexist=!1,$[e].objects[t].emit("endanim"))}});i()},H=function(){c.task.clear("systemtask"),c.task.clear("timeuplayerctrlwait"),E.interactive=E.interactiveChildren=!1,Y.emit("settimeractive",!1),x.taskEnabled=x.taskEnabledChildren=!1},X=function(e,t,i,a){var s=c.addChild(new O(n,e,t,i));s.once("pop",(function(){s.task.clear(),s.destroy(),a()}))},K=function(e,t){for(var i=0,n=R+60*G,s=u.x,o=u.y,r=0;r<$.length;r++)if($[r].heightid===G){i=-$[r].distWidth;break}a.tween({target:c,name:"scrollXYAnim",time:e,main:function(e){var t=1-Math.pow(1-e,2);u.x=a.cubic(s,i,t),u.y=a.cubic(o,n,t)},finish:function(){t()}})()},q=function(e,t,i){var n=e,s=-60*G-40,o=te.x,r=te.y;E.interactive=E.interactiveChildren=!1,te.emit("setstate",2),a.tween({target:c,name:"moveballAnim",time:t,main:function(e){var t=1-Math.pow(1-e,2);te.x=a.cubic(o,n,t),te.y=a.cubic(r,s,t)},finish:function(){i(),te.x=n,te.y=s,oe=0,ie=1,te.emit("setway",ie)}})()},z=null,Q=null,Z=0,ee=function(e,t){var i=60*-T,r={floorid:-999,heightid:0,distWidth:0,objects:[],next:null,prev:null,height:i};if($.push(r),e>=-1){var c=-1===e?I:e,h=o.data[c][0][1];r.distWidth=h,r.floorid=t,r.heightid=T,r.next=null,r.prev=$[$.length-2]?$[$.length-2]:null,$[$.length-2]&&($[$.length-2].next=r),t%10==0&&(z=Q=null);for(var l=null,d=1;d<o.data[c].length;d++){var u=o.data[c][d],g=u[0]+"";if("wall"===g||"dotwall"===g){var v=m.addChild(new p(n,o,s.WALL,t,r,0));v.x=u[1]+h,v.y=i-v.height,r.objects.push(v)}else if("ground"===g){var w=f.addChild(new p(n,o,s.GROUND,t,r,u[3]+11));w.x=u[1]+h,w.y=i-18,w.floorwidth>=20&&(l=w),r.objects.push(w)}else if("dotground"===g)for(var b=0;b<u[3];){var y=f.addChild(new p(n,o,s.DOTGROUND,t,r,14));y.x=u[1]+b+h,y.y=i-18,r.objects.push(y),b+=18}else if("hitItem1"===g||"hitItem2"===g){var C="hitItem1"===g?s.MOVEWALL:s.MOVEWALL2,x=_.addChild(new p(n,o,C,t,r,0));x.x=u[1]+h+("hitItem1"===g?-8:0),x.y=i-x.height,x.mwallprev=C===s.MOVEWALL?z:Q,(C===s.MOVEWALL&&z||C===s.MOVEWALL2&&Q)&&(x.visible=!1,x.iscollusion=x.isexist=!1),C===s.MOVEWALL&&z?z.mwallnext=x:C===s.MOVEWALL2&&Q&&(Q.mwallnext=x),C===s.MOVEWALL?z=x:C===s.MOVEWALL2&&(Q=x),r.objects.push(x)}else if("timeItem"===g){if(Math.random()<=.5){var M=_.addChild(new p(n,o,s.TIMEITEM,t,r,0));M.x=u[1]+h,M.y=i-M.height+6,r.objects.push(M)}}else if("warpItem"===g&&Math.random()<=.5){var S=_.addChild(new p(n,o,s.WARPITEM,t,r,0));S.x=u[1]+h,S.y=i-S.height+6,r.objects.push(S)}}if(t%50==0&&(Z=Math.min(t+2+Math.floor(50*Math.random()),t+50-21))%10==0&&Z--,Z<=t&&t<Z+20&&l){for(var k=l.x+14,O=l.x+l.width,j=[],A=0;A<20&&!(k>O);A++)j.push(k),k+=30;a.arrayShuffle(j);for(var L=Math.min(j.length,2),E=0;E<L;E++){var R=_.addChild(new p(n,o,s.COINITEM,t,r,0));R.x=j[E],R.y=l.y+8-30,r.objects.push(R)}}if(Z===t&&l){var G=_.addChild(new p(n,o,s.SWITCHITEM,t,r,0));G.x=l.x+14+(l.floorwidth-G.width)*Math.random(),G.y=l.y+8,r.objects.push(G)}-1===e&&(I++,P++,o.data.length<=I&&(I=0))}T++},te=_.addChild(new d(n,o,f)),ie=1;te.scale.set(.8),te.x=.5*n.width,te.y=.5*-te.height;var ne=te.x,ae=te.y,se=(te.x,te.y),oe=0,re=0,ce=0,he=78,le=1,pe=function(){c.task.on("systemtask",(function(e){if(2!==oe){0===oe?U&&(te.x+=2.6*ie,te.y+=ce*ce*8,ce+=.05*e.delta):1===oe&&U&&(te.x+=2.6*ie,te.y=se-(1-re*re)*he,re+=1/14*e.delta),le=ae-te.y;for(var t=$.length-1;t>=0;t--){var i=$[t];if(i.height>=te.y){de!==i.heightid&&(ge=0,ue=de,de=i.heightid);break}}for(var l=$.length-1;l>=0;l--){var p=$[l];p.floorid>=0&&p.height-18>=te.y&&D<p.heightid&&(G=D=p.heightid,Y.emit("setScore",p.floorid),ee(-1,P),K(20,(function(){})),F=p.floorid);for(var d=function(e){var t=$[l].objects[e];if(t.isexist)if(t.objecttype===s.WALL){var i=-5;ne>t.x&&(i=t.width+5),a.isCossLine(t.x+i,t.y-11,t.x+i,t.y+t.height,te.x,te.y,ne,ae)&&(ne>t.x?te.x=t.x+i+1:te.x=t.x+i-1,ie=ie>0?-1:1,te.emit("setway",ie))}else if(t.objecttype===s.GROUND)ae<t.y&&le<0&&a.isCossLine(t.x-2,t.y,t.x+t.floorwidth+2,t.y,te.x,te.y+6,ne,ae)&&(N=t,t.emit("floorflash"),te.y=t.y-6,F=p.floorid,0!==oe&&te.emit("setstate",0),oe=0,ce=0);else if(t.objecttype===s.DOTGROUND)ae<t.y&&t.iscollusion&&le<0&&a.isCossLine(t.x-5,t.y,t.x+t.floorwidth+5,t.y,te.x,te.y+6,ne,ae)&&(t.emit("erasedotground"),te.y=t.y-6,F=p.floorid,0!==oe&&te.emit("setstate",0),oe=0,ce=0);else if(t.objecttype===s.MOVEWALL||t.objecttype===s.MOVEWALL2){var d=-5;ne>t.x&&(d=t.width+5),a.isCossLine(t.x+d,t.y-20,t.x+d,t.y+t.height,te.x,te.y,ne,ae)&&(ne>t.x?te.x=t.x+d+1:te.x=t.x+d-1,ie=ie>0?-1:1,te.emit("setway",ie),t.mwallnext&&(t.isexist=!1,t.mwallnext.emit("setwallanim",(function(){t.mwallnext&&(t.mwallnext.isexist=t.mwallnext.iscollusion=!0)})),t.emit("popwallanim")))}else if(t.objecttype===s.TIMEITEM||t.objecttype===s.WARPITEM||t.objecttype===s.COINITEM||t.objecttype===s.SWITCHITEM){if(Math.pow(t.x-te.x,2)+Math.pow(t.y-te.y,2)<=Math.pow(24,2))if(t.objecttype===s.TIMEITEM){t.emit("endanim"),Y.emit("addtime",5),t.isexist=!1,o.snd.emit("play",{name:"time.mp3",isloop:!1}),V=!0,Y.emit("settimeractive2",!1),C.addChild(Y),a.tween({target:c,name:"timeuplayerctrlwait",time:60,main:function(e){},finish:function(){Y.emit("settimeractive2",!0),h.addChild(Y),V=!1}})();var u=f.addChild(new k(n,o,5));u.x=t.x-.5*u.width,u.y=t.y-60,u.once("pop",(function(){u.task.clear(),u.destroy()}))}else if(t.objecttype===s.WARPITEM){t.emit("endanim"),t.isexist=!1,o.snd.emit("play",{name:"rocket.mp3",isloop:!1}),X(10,16777215,.7,(function(){}));for(var g=0;g<30;g++)ee(-1,P);for(var m=10*Math.floor((p.floorid+30)/10),v=0;v<$.length;v++)if($[v].floorid===m){G=$[v].heightid;break}q(.5*n.width,40,(function(){oe=0,ne=te.x,ae=te.y,te.emit("setstate",0),Y.emit("setScore",m),E.interactive=E.interactiveChildren=!0})),K(40,(function(){})),oe=2}else t.objecttype===s.COINITEM&&(r.coin++,M.emit("coinupdate"),t.emit("endanim"),o.snd.emit("play",{name:"coin.mp3",isloop:!1}),t.isexist=!1);Math.pow(t.x-te.x,2)+Math.pow(t.y-17-te.y,2)<=Math.pow(30,2)&&t.objecttype===s.SWITCHITEM&&(J(),o.snd.emit("play",{name:"switch.mp3",isloop:!1}),t.emit("endanim"),t.isexist=!1)}},g=$[l].objects.length-1;g>=0;g--)d(g)}B&&W!==F&&(F%10==0?(C.addChild(Y),Y.emit("settimeractive",!1),M.emit("setactive",!0),S.emit("fade",{alpha:.26,time:10,color:0}),c.task.clear("timeuplayerctrlwait"),V=!1):V||(h.addChild(Y),M.emit("setactive",!1),Y.emit("settimeractive",!0),S.emit("fade",{alpha:0,time:10,color:0}))),te.emit("rotationball",.02*te.x),ne=te.x,ae=te.y,W=F,u.y+te.y>=n.height+32&&(H(),c.emit("gameover"))}}))},de=-77777,ue=-99999,ge=0,me=0;E.on("pointerdown",(function(e){if(!(ue>de&&le<0&&1===oe||++me>=2)){for(var t=!1,i=78,n=null,a=$.length-1;a>=0;a--){var r=$[a];if(r.height>=te.y){for(var c=$[a].objects.length-1;c>=0;c--){var h=$[a].objects[c];if((h.objecttype===s.GROUND||h.objecttype===s.DOTGROUND)&&h.x-10<=te.x&&h.x+h.floorwidth+10>=te.x){i=Math.abs(h.y-90-90*ge-te.y),de===r.heightid&&(n=$[a+1],ge++),t=!0;break}}break}}if(n&&ge>=2){for(var l=!1,p=n.objects.length-1;p>=0;p--){var d=n.objects[p];if((d.objecttype===s.GROUND||d.objecttype===s.DOTGROUND)&&d.x-10<=te.x&&d.x+d.floorwidth+10>=te.x){l=!0;break}}l||(ge=0,t=!1)}t?(he=i,o.snd.emit("play",{name:"jump.mp3",isloop:!1}),oe=1,re=-1,te.x,se=te.y,N&&N.emit("floorflashoff"),N=null,te.emit("setstate",1),function(){for(var e=$.length-1;e>=0;e--)if($[e].heightid-G<-20){for(var t=$[e].objects.length-1;t>=0;t--)$[e].objects[t].task.clear(),$[e].objects[t].destroy();$.splice(e,1)}}()):ge=0}})),E.on("pointerup",(function(e){var t=e.data.originalEvent.targetTouches;(t&&t.length<=0||!t)&&(me=0)})),this.once("gamestart",(function(){X(10,16777215,.7,(function(){}));for(var e=0;e<13;e++)ee(-1,P);oe=2,K(40,(function(){})),B=!0,q(Math.max(44,Math.min(te.x,n.width-44)),40,(function(){te.emit("setstate",0),Y.emit("setupui"),Y.emit("settime",30),E.interactive=E.interactiveChildren=!0}))})),this.on("continue",(function(){o.snd.emit("play",{name:"bgm.mp3",isloop:!0});for(var e=10*Math.floor(F/10),t=0;t<$.length;t++)if($[t].floorid===e){G=D=$[t].heightid;break}for(var i=$.length-1;i>=0;i--)for(var a=$[i].objects.length-1;a>=0;a--){var r=$[i].objects[a];r.objecttype!==s.MOVEWALL&&r.objecttype!==s.MOVEWALL2||r.emit("resetmovewall")}te.x=.5*n.width,te.y=-60*G-20,te.emit("setstate",0),te.emit("resetball"),ne=te.x,se=ae=te.y,oe=ce=re=0,F=e,ie=1,te.emit("setway",ie),te.visible=!0,K(20,(function(){Y.emit("settime",30),E.interactive=E.interactiveChildren=!0,pe(),x.taskEnabled=x.taskEnabledChildren=!0}))})),E.interactive=E.interactiveChildren=!1,ee(0,-1);for(var fe=0;fe<14;fe++)ee(-2,-1);G=T,function(){g.visible=b.visible=!1;for(var e=null,t=0,i=[],r=0;r<5;r++){for(var h=60*(r+1),l=function(a){var s=g.addChild(new j(n,o,t));s.x=96+88*a,s.y=h-30,s.skinid=t,s.interactive=!0,s.skinid===o.save.useskinid&&(e=s,s.visible=!1),s.on("pointertap",(function(){o.save.skin[s.skinid].isrelease&&(g.interactive=g.interactiveChildren=!1,te.visible=!1,U=!1,e&&(b.removeChild(e),g.addChild(e),e.visible=!0),g.removeChild(s),b.addChild(s),s.emit("selectanime",{x:te.x,y:te.y,clb:function(){s.visible=!1,U=!0,te.visible=!0,g.interactive=g.interactiveChildren=!0}}),o.save.useskinid=s.skinid,e=s,te.emit("changeskin",o.save.useskinid))})),i.push(s),t++},d=0;d<4;d++)l(d);for(var m=1;m<o.data[0].length;m++){var f=o.data[0][m],v=f[0]+"";if("wall"===v||"dotwall"===v){var w=g.addChild(new p(n,o,s.WALL,-999,null,0));w.x=f[1],w.y=h-w.height}else if("ground"===v){var _=g.addChild(new p(n,o,s.GROUND,-999,null,f[3]));_.width=f[3]+11,_.x=f[1],_.y=h-18}}}c.on("buyitem",(function(e){i[e].visible=!1;var t=c.x+u.x,a=c.y+u.y,s=b.addChild(new A(n,o,e,.5*n.width-t,.5*n.height-a,i[e].x,i[e].y,t,a));s.once("pop",(function(){s.task.clear(),s.destroy(),i[e].visible=!0,i[e].emit("visibleskin")}))})),c.on("setshoplayervisible",(function(e){var t=e?1:0,i=g.alpha;e&&(g.visible=b.visible=!0),a.tween({target:c,name:"setshoplayervisibleanim",time:14,main:function(e){g.alpha=b.alpha=a.cubic(i,t,e)},finish:function(){e||(g.visible=b.visible=!1)}})()}))}(),pe()}return i&&(n.__proto__=i),n.prototype=Object.create(i&&i.prototype),n.prototype.constructor=n,n}(e.Container),p=function(i){function n(n,o,r,c,h,l){var p=this;i.call(this),this.objecttype=s.GROUND,this.floorwidth=0,this.iscollusion=!0,this.isexist=!0,this.mwallprev=null,this.mwallnext=null,this.floorinfo=null,this.objecttype=r,this.floorinfo=h,this.floorwidth=l;var d=this.addChild(new e.Container);if(r===s.WALL)d.addChild(new t.Sprite(n.resources.images["w_002.png"]));else if(r===s.GROUND){if(c%10==0){var v=d.addChild(new t.Sprite(n.resources.images["t_001.png"]));v.width=399,v.x=11,v.y=10-v.height,v.visible=!1,d.addChild(new t.Sprite(n.resources.images["f_003_2.png"]));for(var w=this.addChild(new t.Container),_=c+"",b=w.addChild(new t.Sprite(n.resources.images["FLOOR.png"])),y=0,C=0;C<_.length;C++){var x=w.addChild(new t.Sprite(n.resources.images[_[C]+".png"]));x.scale.set(26/x.height),x.x=y,y+=x.width}b.x=y+8,b.y=w.height-b.height-2,w.x=30,w.y-=w.height,this.once("floorflash",(function(){a.tween({target:p,name:"floorflashanim",time:10,main:function(e){v.visible=!0,v.alpha=e},finish:function(){}})()})),this.once("floorflashoff",(function(){a.tween({target:p,name:"floorflashanim",time:10,main:function(e){v.alpha=1-e},finish:function(){v.visible=!1}})()}))}else d.addChild(new t.Sprite(n.resources.images["f_001_2.png"]));d.width=l}else if(r===s.DOTGROUND){var M=d.addChild(new t.Sprite(n.resources.images["f_001_2.png"])),S=!1;this.on("erasedotground",(function(){if(!S){S=!0,M.texture=n.resources.images["f_002.png"],M.width=n.resources.images["f_001_2.png"].width;var e=a.tween({target:p,name:"dotgrounderaseanime",time:12,main:function(e){var t=Math.pow(1-e,2);d.y=32*(1-t),d.alpha=1-e},finish:function(){p.iscollusion=!1,t()}}),t=a.tween({target:p,name:"dotgrounderaseanime",time:100,main:function(e){},finish:function(){M.texture=n.resources.images["f_001_2.png"],d.y=0,d.alpha=1,p.iscollusion=!0,S=!1}});e()}})),d.width=l}else if(r===s.MOVEWALL||r===s.MOVEWALL2){var k=d.addChild(new t.Container),O=k.addChild(new t.Sprite(n.resources.images["w_004.png"]));O.anchor.set(.5),k.x=.5*k.width,k.y=.5*k.height,this.on("setwallanim",(function(e){O.alpha=0,p.visible=!0,a.tween({target:p,name:"setmovewallanim",time:4,main:function(e){var t=1-Math.pow(1-e,2);O.alpha=e,O.scale.set(t,3-2*t)},finish:function(){e()}})()})),this.on("popwallanim",(function(){a.tween({target:p,name:"popmovewallanim",time:4,main:function(e){var t=1-Math.pow(1-e,2);O.alpha=1-e,O.scale.set(1-t,1+2*t)},finish:function(){p.visible=!1}})()})),this.on("resetmovewall",(function(){p.mwallprev?p.isexist=p.iscollusion=p.visible=!1:(p.isexist=p.iscollusion=p.visible=!0,O.alpha=1,O.scale.set(1))}))}else if(r===s.TIMEITEM){var j=d.addChild(new u(n,o));this.once("endanim",(function(){j.emit("endanim")})),j.once("pop",(function(){p.emit("pop")}))}else if(r===s.WARPITEM){var A=d.addChild(new g(n,o));this.once("endanim",(function(){A.emit("endanim")})),A.once("pop",(function(){p.emit("pop")}))}else if(r===s.COINITEM){var L=d.addChild(new m(n,o));this.on("beginanim",(function(){L.emit("beginanim")})),this.on("endanim",(function(){L.emit("endanim")})),this.on("warnanim",(function(){L.emit("warnanim")})),L.once("pop",(function(){p.emit("pop")})),this.isexist=!1}else if(r===s.SWITCHITEM){var E=d.addChild(new f(n,o));this.once("endanim",(function(){E.emit("endanim")})),E.once("pop",(function(){p.emit("pop")}))}}return i&&(n.__proto__=i),n.prototype=Object.create(i&&i.prototype),n.prototype.constructor=n,n}(e.Container),d=function(e){function i(i,n,s){var o=this;e.call(this);var r=1,c=0,h=this.addChild(new t.Container),l=h.addChild(new t.Sprite(i.resources.images["p_003.png"])),p=h.addChild(new t.Sprite(i.resources.images["ball_"+(n.save.useskinid+1)+".png"]));p.anchor.set(.5),l.anchor.set(.5),l.visible=!1;var d=this.addChild(new M(i,n));d.scale.set(-1,1);var u=this.addChild(new M(i,n));u.scale.set(-1,1),u.visible=!1,u.rotation=.5*-Math.PI,u.emit("setparm",{wait:0,range:120,loop:2,scale:1.5});var g=function(){if(1===c){var e=s.addChild(new S(i,n,6));e.x=o.x,e.y=o.y,e.once("pop",(function(){e.task.clear(),e.destroy()})),a.tween({target:o,name:"jumpeorbiteff",time:1,main:function(e){},finish:function(){g()}})()}},m=function(){if(2===c){var e=s.addChild(new S(i,n,6));e.x=o.x,e.y=o.y,e.once("pop",(function(){e.task.clear(),e.destroy()})),a.tween({target:o,name:"jetorbiteff",time:0,main:function(e){},finish:function(){m()}})()}};this.on("rotationball",(function(e){p.rotation=e})),this.on("changeskin",(function(){p.texture=i.resources.images["ball_"+(n.save.useskinid+1)+".png"]})),this.on("setway",(function(e){r=e,d.scale.set(r<0?1:-1,1)})),this.on("setstate",(function(e){c=e,d.visible=0===c,u.visible=2===c,0===c?(d.visible=!0,u.visible=!1):1===c?(g(),d.visible=!1,u.visible=!1):2===c&&(m(),function(){l.visible=!0;var e=a.tween({target:o,name:"jetboundeff",time:4,main:function(e){var t=1-Math.pow(1-e,2);l.scale.set(a.cubic(1,1.8,t),1)},finish:function(){t()}}),t=a.tween({target:o,name:"jetboundeff",time:4,main:function(e){var t=e*e;l.scale.set(a.cubic(1.8,1,t),1)},finish:function(){l.visible=!1,i()}}),i=a.tween({target:o,name:"jetboundeff",time:6,main:function(e){var t=1-Math.pow(1-e,2);h.scale.set(a.cubic(1,.4,t),a.cubic(1,1.2,t))},finish:function(){n()}}),n=a.tween({target:o,name:"jetboundeff",time:8,main:function(e){},finish:function(){s()}}),s=a.tween({target:o,name:"jetboundeff",time:6,main:function(e){var t=e*e;h.scale.set(a.cubic(.4,1,t),a.cubic(1.2,1,t))},finish:function(){}});e()}(),d.visible=!1,u.visible=!0)})),this.on("deathanime",(function(e){var t=a.tween({target:o,name:"deathanim",time:50,main:function(e){var t=Math.random()*Math.PI*2;p.x=1.5*Math.cos(t),p.y=1.5*Math.sin(t)},finish:function(){i()}}),i=a.tween({target:o,name:"deathanim",time:10,main:function(e){var t=1-Math.pow(1-e,2);p.scale.set(1+1.5*t),p.alpha=1-e},finish:function(){e()}});t()})),this.on("resetball",(function(){p.scale.set(1),p.alpha=1}))}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i}(e.Container),u=function(i){function n(n,s){var o=this;i.call(this);var r=this.addChild(new e.Container),c=r.addChild(new t.Sprite(n.resources.images["a_003.png"]));c.anchor.set(.5),c.scale.set(.8);var h=r.addChild(new t.Sprite(n.resources.images["p_003.png"]));h.anchor.set(.5),h.scale.set(.8),h.alpha=0;var l;(l=a.tween({target:o,name:"flashanim",time:24,main:function(e){var t=1-.5*(Math.cos(2*Math.PI*e)+1);h.alpha=.6*t},finish:function(){l()}}))(),this.once("endanim",(function(){o.task.clear(),c.visible=!1,h.alpha=1,a.tween({target:o,name:"endanim",time:14,main:function(e){var t=1-Math.pow(1-e,2);h.alpha=1-e,h.scale.set(1+.5*t)},finish:function(){o.emit("pop")}})()}))}return i&&(n.__proto__=i),n.prototype=Object.create(i&&i.prototype),n.prototype.constructor=n,n}(e.Container),g=function(i){function n(n,s){var o=this;i.call(this);var r=this.addChild(new e.Container),c=r.addChild(new t.Sprite(n.resources.images["a_001.png"]));c.anchor.set(.5),c.scale.set(.8);var h=r.addChild(new t.Sprite(n.resources.images["p_003.png"]));h.anchor.set(.5),h.scale.set(.8),h.alpha=0;var l;(l=a.tween({target:o,name:"flashanim",time:24,main:function(e){var t=1-.5*(Math.cos(2*Math.PI*e)+1);h.alpha=.6*t},finish:function(){l()}}))(),this.once("endanim",(function(){o.task.clear(),c.visible=!1,h.alpha=1,a.tween({target:o,name:"endanim",time:14,main:function(e){var t=1-Math.pow(1-e,2);h.alpha=1-e,h.scale.set(1+.5*t)},finish:function(){o.emit("pop")}})()}))}return i&&(n.__proto__=i),n.prototype=Object.create(i&&i.prototype),n.prototype.constructor=n,n}(e.Container),m=function(i){function n(n,s){var o=this;i.call(this);var r=this.addChild(new e.Container),c=r.addChild(new t.Sprite(n.resources.images["coin_1.png"]));c.anchor.set(.5);var h=r.addChild(new t.Sprite(n.resources.images["coin_9.png"]));h.anchor.set(.5),h.visible=!1;this.visible=!1,this.on("beginanim",(function(){o.task.clear(),c.visible=!0,h.visible=!1,c.alpha=1,o.visible=!0,function(){var e=a.tween({target:o,name:"rotationanim",time:30,main:function(e){c.texture=n.resources.images["coin_"+(1+Math.min(Math.floor(8*e),7))+".png"]},finish:function(){e()}});e()}();var e=a.tween({target:o,name:"beginanim",time:6,main:function(e){var t=e*e;c.y=a.cubic(-32,0,t)},finish:function(){t()}}),t=a.tween({target:o,name:"beginanim",time:6,main:function(e){var t=1-Math.pow(1-e,2);c.y=a.cubic(0,-12,t)},finish:function(){i()}}),i=a.tween({target:o,name:"beginanim",time:4,main:function(e){var t=e*e;c.y=a.cubic(-12,0,t)},finish:function(){s()}}),s=a.tween({target:o,name:"beginanim",time:4,main:function(e){var t=1-Math.pow(1-e,2);c.y=a.cubic(0,-4,t)},finish:function(){r()}}),r=a.tween({target:o,name:"beginanim",time:3,main:function(e){var t=e*e;c.y=a.cubic(-4,0,t)},finish:function(){}});e()})),this.on("endanim",(function(){c.visible=!1,h.visible=!0,o.task.clear(),a.tween({target:o,name:"endanim",time:14,main:function(e){var t=1-Math.pow(1-e,2);h.alpha=1-e,h.scale.set(1+.72*t)},finish:function(){o.emit("pop")}})()})),this.on("warnanim",(function(){var e=0;o.task.on("warnanimtask",(function(t){Math.floor(e)%2==0?c.alpha=.5:c.alpha=1,e+=.3*t.delta}))}))}return i&&(n.__proto__=i),n.prototype=Object.create(i&&i.prototype),n.prototype.constructor=n,n}(e.Container),f=function(i){function n(n,a){i.call(this);var s=this.addChild(new e.Container).addChild(new t.Sprite(n.resources.images["c_switch_1.png"]));s.anchor.set(.5,1),this.once("endanim",(function(){s.texture=n.resources.images["c_switch_2.png"]}))}return i&&(n.__proto__=i),n.prototype=Object.create(i&&i.prototype),n.prototype.constructor=n,n}(e.Container),v=function(i){function n(n,s,o){var r=this;i.call(this);var c=this.addChild(new e.Container),h=c.addChild(new _(n,s,o));h.scale.set(.5);var l=c.addChild((new t.Graphics).beginFill(16777215,1).drawRect(0,0,h.width,2).endFill());l.x=.5*-l.width,l.y=h.height+4;var p=c.addChild(new b(n,s,o));p.scale.set(.7),p.y=l.y+l.height+16,this.alpha=.001,this.on("setupui",(function(){a.tween({target:r,name:"uibeginanime00",time:8,main:function(e){var t=1-Math.pow(1-e,2);r.alpha=e,c.y=-64*(1-t)},finish:function(){}})(),r.on("addScore",(function(e){p.emit("addScore",e)})),r.on("setScore",(function(e){p.emit("setScore",e)})),r.on("addtime",(function(e){h.emit("addtime",e)})),r.on("settime",(function(e){h.emit("settime",e)})),h.on("timeover",(function(){r.emit("timeover")})),h.on("timewarn",(function(){r.emit("timewarn")}));var e=!0;r.on("settimeractive",(function(t){if(h.emit("settimeractive",t),t){if(e!==t){var i=c.alpha;a.tween({target:r,name:"activeanim",time:20,main:function(e){c.alpha=a.cubic(i,.5,e)},finish:function(){}})()}}else{var n=a.tween({target:r,name:"activeanim",time:60,main:function(e){var t=1-.5*(Math.cos(2*Math.PI*e)+1);c.alpha=.5+.5*t},finish:function(){n()}});n()}e=t})),r.on("settimeractive2",(function(t){if(h.emit("settimeractive",!0),t){if(e!==t){var i=c.alpha;a.tween({target:r,name:"activeanim",time:20,main:function(e){c.alpha=a.cubic(i,.5,e)},finish:function(){}})()}}else{var n=a.tween({target:r,name:"activeanim",time:60,main:function(e){var t=1-.5*(Math.cos(2*Math.PI*e)+1);c.alpha=.5+.5*t},finish:function(){n()}});n()}e=t}))}))}return i&&(n.__proto__=i),n.prototype=Object.create(i&&i.prototype),n.prototype.constructor=n,n}(e.Container),w=function(n){function s(s,o,r){var c=this;n.call(this);var h=this.addChild(new e.Container),l=h.addChild(new e.Container),p=l.addChild(new t.Sprite(s.resources.images["coin_1.png"])),d=l.addChild(new i(s));this.on("coinupdate",(function(){d.emit("text",{prefix:"",text:r.coin+"",width:180,height:225,isMonoSpace:!0,space:1,color:16777215}),d.scale.set(1),d.scale.set(28/d.height),d.x=p.width+140-d.width,d.y=.5*p.height-.5*d.height,l.x=.5*-l.width})),this.emit("coinupdate"),h.alpha=.001;var u=!1;this.on("setactive",(function(e){if(u!==e){if(e)a.tween({target:c,name:"activeanim",time:10,main:function(e){h.alpha=e},finish:function(){}})();else a.tween({target:c,name:"activeanim",time:10,main:function(e){h.alpha=1-e},finish:function(){}})();u=e}}))}return n&&(s.__proto__=n),s.prototype=Object.create(n&&n.prototype),s.prototype.constructor=s,s}(e.Container),_=function(e){function i(i,n,a){var s=this;e.call(this);var o=this.addChild(new t.Container),r=99,c=!1,h=function(){o.removeChildren();for(var e=""+Math.floor(r),n=""+Math.floor(10*r)%10,a=0,s=0;s<e.length;s++){var c=o.addChild(new t.Sprite(i.resources.images[e[s]+".png"]));c.x=a,a+=1*c.width}var h=o.height,l=o.addChild((new t.Graphics).beginFill(16777215,1).drawCircle(0,0,10).endFill());l.x=a+.5*l.width,l.y=h-.5*l.height,a+=1*l.width;for(var p=0;p<n.length;p++){var d=o.addChild(new t.Sprite(i.resources.images[n[p]+".png"]));d.scale.set(.7),d.x=a,d.y=h-d.height,a+=1*d.width}o.x=.5*-o.width};h();var l=r;this.on("addtime",(function(e){l=r+=e})),this.on("settime",(function(e){l=r=e,h(),s.task.clear("timertask"),s.task.on("timertask",(function(e){if(c){if(h(),r<=0)return s.task.clear("timertask"),void s.emit("timeover");(r=Math.max(0,r-.016666666666666666*e.delta))-l<=-1&&(r<=5&&s.emit("timewarn"),l=r)}}))})),this.on("settimeractive",(function(e){c=e,h()}))}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i}(e.Container),b=function(e){function i(i,n,a){e.call(this);var s=this.addChild(new t.Container),o=function(){s.removeChildren();for(var e=a.score+"",n=s.addChild(new t.Sprite(i.resources.images["SCORE.png"])),o=18,r=0;r<e.length;r++){var c=s.addChild(new t.Sprite(i.resources.images[e[r]+".png"]));c.scale.set(n.height/c.height),c.x=n.width+o,o+=c.width}s.x=.5*-s.width};o(),this.on("addScore",(function(e){a.score+=e,o()})),this.on("setScore",(function(e){a.score<e&&(a.score=e),o()}))}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i}(e.Container),y=function(s){function o(o,r,c,h){var l=this;s.call(this);var p=this.addChild((new t.Graphics).beginFill(0,.8).drawRect(0,0,o.width,o.height).endFill());p.alpha=0;var d=this.addChild(new e.Container),u=d.addChild(new e.Container),g=u.addChild(new t.Sprite(o.resources.images["coin_1.png"])),m=u.addChild(new i(o));m.emit("text",{prefix:"",text:c.coin+"",width:180,height:225,isMonoSpace:!0,space:1,color:16777215}),m.scale.set(28/m.height),m.x=g.width+140-m.width,m.y=.5*g.height-.5*m.height,u.addChild((new t.Graphics).beginFill(16777215,1).drawRect(0,0,u.width+8,2).endFill()).y=g.height,u.x=.5*o.width-.5*u.width,u.y=40;var f=d.addChild(new t.Container),v=f.addChild(new t.Sprite(o.resources.images["SCORE.png"]));v.scale.set(24/v.height);var w=f.addChild(new i(o));w.emit("text",{prefix:"",text:c.score+"",width:180,height:225,isMonoSpace:!0,space:1,color:16777215}),w.scale.set(28/w.height),w.x=v.width+200-w.width,f.addChild((new t.Graphics).beginFill(16777215,1).drawRect(0,0,f.width,2).endFill()).y=w.height+8,f.x=.5*o.width-.5*f.width,f.y=140;var _=d.addChild(new x(o,r,c));_.x=.5*o.width,_.y=.5*o.height,_.interactive=!0,_.once("pop",(function(){_.task.clear(),_.destroy(),b.visible=!1,C("no")})),_.once("pointertap",(function(){C("yes")}));var b=d.addChild(new t.Sprite(h.resource.getResource("cmn","images","text_2x.png")));b.scale.set(.5),b.x=.5*o.width-.5*b.width,b.y=_.y+124,o.vars.env.isAdPlatform||(b.visible=_.visible=!1,_.interactive=_.interactiveChildren=!1),o.vars.env.hasRewardAd||(b.visible=!1);var y=d.addChild(new n(o,[new t.Sprite(o.resources.images["t_cancel_2x.png"])]));y.scale.set(.5),y.emit("spritechange",0),y.emit("setcollusion",{offx:0,offy:0,width:600,height:100}),y.x=.5*o.width,y.y=620,y.once("bttap",(function(){r.snd.emit("play",{name:"button.mp3",isloop:!1}),C("no")}));var C=function(e){l.interactive=l.interactiveChildren=!1,a.tween({target:l,name:"endanime",time:12,main:function(e){l.alpha=1-e},finish:function(){l.emit("pop",e)}})()};!function(){d.alpha=.001,_.emit("beginAnime");var e=a.tween({target:l,name:"beginanime",time:12,main:function(e){var t=1-Math.pow(1-e,2);p.alpha=d.alpha=e,d.y=a.cubic(-32,0,t)},finish:function(){t()}}),t=a.tween({target:l,name:"beginanime",time:12,main:function(e){},finish:function(){}});e()}()}return s&&(o.__proto__=s),o.prototype=Object.create(s&&s.prototype),o.prototype.constructor=o,o}(e.Container),C=function(s){function o(o,r,c,h,l){var p=this;s.call(this);var d=this.addChild((new t.Graphics).beginFill(0,.8).drawRect(0,0,o.width,o.height).endFill());d.alpha=0;var u=this.addChild(new t.Container),g=u.addChild(new t.Sprite(o.resources.images["SCORE.png"]));g.x=.5*-g.width;var m=u.addChild(new i(o));m.emit("text",{prefix:"",text:c.score+"",width:180,height:225,isMonoSpace:!0,space:1,color:16777215}),m.scale.set(70/m.height),m.x=.5*-m.width,m.y=g.height+24,u.x=.5*o.width,u.alpha=0;var f=this.addChild(new t.Container),v=f.addChild(new t.Sprite(o.resources.images["BEST-SCORE.png"]));v.scale.set(24/v.height);var w=f.addChild(new i(o));w.emit("text",{prefix:"",text:r.save.bestscore+"",width:180,height:225,isMonoSpace:!0,space:1,color:16777215}),w.scale.set(28/w.height),w.x=v.width+200-w.width,f.addChild((new t.Graphics).beginFill(16777215,1).drawRect(0,0,f.width,2).endFill()).y=w.height+8,f.x=.5*o.width-.5*f.width,f.alpha=0;var _=this.addChild(new e.Container),b=_.addChild(new t.Sprite(o.resources.images["coin_1.png"])),y=_.addChild(new i(o));y.emit("text",{prefix:"",text:c.coin+"",width:180,height:225,isMonoSpace:!0,space:1,color:16777215}),y.scale.set(28/y.height),y.x=b.width+140-y.width,y.y=.5*b.height-.5*y.height,_.addChild((new t.Graphics).beginFill(16777215,1).drawRect(0,0,_.width+8,2).endFill()).y=b.height,_.x=.5*o.width-.5*_.width,_.alpha=.001;var C=this.addChild(new n(o,[new t.Sprite(l.resource.getResource("cmn","images","button_2_2x.png"))]));C.scale.set(.5),C.emit("spritechange",0),C.x=.5*o.width,C.y=510,C.alpha=.001,C.once("bttap",(function(){r.snd.emit("play",{name:"button.mp3",isloop:!1}),S("ads")}));var x=this.addChild(new t.Sprite(l.resource.getResource("cmn","images","text_2x.png")));x.scale.set(.5),x.x=.5*o.width-.5*x.width,x.y=C.y+.5*C.height+10,x.alpha=.001,o.vars.env.hasRewardAd||(x.visible=!1),!h&&o.vars.env.isAdPlatform||(x.visible=C.visible=!1),c.coin<=0&&(C.visible=x.visible=!1,C.interactive=C.interactiveChildren=!1);var M=this.addChild(new n(o,[new t.Sprite(l.resource.getResource("cmn","images","t_tugihe_2x.png"))]));M.scale.set(.5),M.emit("spritechange",0),M.emit("setcollusion",{offx:0,offy:0,width:600,height:100}),M.x=.5*o.width,M.y=690,M.alpha=.001,M.once("bttap",(function(){r.snd.emit("play",{name:"button.mp3",isloop:!1}),S("notads")}));var S=function(e){a.tween({target:p,name:"endanime",time:12,main:function(e){p.alpha=1-e},finish:function(){p.emit("pop",e)}})()};!function(){var e=a.tween({target:p,name:"beginanime",time:12,main:function(e){var t=1-Math.pow(1-e,2);u.alpha=e,u.y=a.cubic(70,100,t),d.alpha=e},finish:function(){t()}}),t=a.tween({target:p,name:"beginanime",time:12,main:function(e){var t=1-Math.pow(1-e,2);f.alpha=_.alpha=e,f.y=a.cubic(250,280,t),_.y=a.cubic(330,360,t)},finish:function(){i()}}),i=a.tween({target:p,name:"beginanime",time:12,main:function(e){var t=1-Math.pow(1-e,2);C.alpha=M.alpha=x.alpha=e,C.y=a.cubic(480,510,t),M.y=a.cubic(660,690,t)},finish:function(){}});a.tween({target:p,name:"beginanime",time:12,main:function(e){var t=1-Math.pow(1-e,2);C.alpha=M.alpha=x.alpha=e,C.y=a.cubic(480,510,t),M.y=a.cubic(660,690,t)},finish:function(){}});e()}()}return s&&(o.__proto__=s),o.prototype=Object.create(s&&s.prototype),o.prototype.constructor=o,o}(e.Container),x=function(e){function i(i,n,s){var o=this;e.call(this);var r=this.addChild(new t.Sprite(i.resources.images["c_001.png"])),c=(this.addChild(new t.Graphics),this.addChild(new t.Sprite(i.resources.images["c_004.png"]))),h=this.addChild(new t.Sprite(i.resources.images["continue.png"]));r.anchor.set(.5),c.anchor.set(.5),h.anchor.set(.5);var l;(l=a.tween({target:o,name:"beginanime",time:60,main:function(e){var t=1-.5*(Math.cos(2*Math.PI*e)+1);h.scale.set(.9-.1*t)},finish:function(){l()}}))()}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i}(e.Container),M=function(i){function n(n,s){var o=this;i.call(this);var r=5,c=20,h=1,l=1,p=function(){var i=o.addChild(new e.Container),s=i.addChild(new t.Sprite(n.resources.images["p_002.png"]));s.anchor.set(.5),s.alpha=0,s.scale.set((.7+.3*Math.random())*l);var r=c,h=1*Math.random()-.5;a.tween({target:i,name:"effanimtask",time:16,main:function(e){var t=1-Math.pow(1-e,2);s.x=(20+r*t)*Math.cos(h),s.y=(20+r*t)*Math.sin(h),s.alpha=1-e},finish:function(){i.task.clear(),i.destroy()}})()},d=function(){for(var e=0;e<h;e++)p();a.tween({target:o,name:"efftask",time:r,main:function(e){},finish:function(){d()}})()};this.on("setparm",(function(e){r=e.wait,c=e.range,h=e.loop,l=e.scale})),d()}return i&&(n.__proto__=i),n.prototype=Object.create(i&&i.prototype),n.prototype.constructor=n,n}(e.Container),S=function(i){function n(n,s,o){var r=this;i.call(this);!function(){var i=r.addChild(new e.Container),c=i.addChild(new t.Sprite(n.resources.images["ball_"+(s.save.useskinid+1)+".png"]));c.anchor.set(.5),c.alpha=0;var h=a.tween({target:i,name:"effanimtask",time:o,main:function(e){c.scale.set(a.cubic(.8,.3,e)),c.alpha=.8*(1-e)},finish:function(){r.emit("pop")}});a.tween({target:i,name:"effanimtask",time:o,main:function(e){c.scale.set(a.cubic(.8,.3,e)),c.alpha=.8*(1-e)},finish:function(){r.emit("pop")}});h()}()}return i&&(n.__proto__=i),n.prototype=Object.create(i&&i.prototype),n.prototype.constructor=n,n}(e.Container),k=function(e){function i(i,n,s){var o=this;e.call(this);for(var r=this.addChild(new t.Container),c=s+"",h=r.addChild(new t.Sprite(i.resources.images["t_plus.png"])),l=h.width,p=0;p<c.length;p++){var d=r.addChild(new t.Sprite(i.resources.images[c[p]+".png"]));d.x=l,l+=d.width}var u=r.addChild(new t.Sprite(i.resources.images["SECONDS.png"]));u.scale.set(h.height/u.height*.6),u.x=l+12,u.y=h.height-u.height-10,r.scale.set(26/r.height),r.alpha=.001;var g,m,f;g=a.tween({target:o,name:"beginAnime",time:10,main:function(e){var t=1-Math.pow(1-e,2);r.alpha=e,r.y=a.cubic(32,0,t)},finish:function(){m()}}),m=a.tween({target:o,name:"beginAnime",time:40,main:function(e){},finish:function(){f()}}),f=a.tween({target:o,name:"beginAnime",time:10,main:function(e){var t=Math.pow(e,2);r.alpha=1-e,r.y=a.cubic(0,-32,t)},finish:function(){o.emit("pop")}}),g()}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i}(e.Container),O=function(e){function i(i,n,s,o){var r=this;e.call(this),this.addChild((new t.Graphics).beginFill(s,o).drawRect(0,0,i.width,i.height).endFill()),this.alpha=0;a.tween({target:r,name:"beginAnime",time:n,main:function(e){r.alpha=1-e},finish:function(){r.emit("pop")}})()}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i}(e.Container),j=function(i){function n(n,s,o){var r=this;i.call(this);var c=this.addChild(new e.Container),h=c.addChild(new t.Sprite(n.resources.images[s.save.skin[o].isrelease?"ball_"+(o+1)+".png":"ball_21.png"]));h.anchor.set(.5);var l=c.addChild(new t.Sprite(n.resources.images["ball_22.png"]));l.anchor.set(.5),l.visible=!1,this.on("visibleskin",(function(){h.texture=n.resources.images["ball_"+(o+1)+".png"]})),this.on("selectanime",(function(e){var t=r.x,i=r.y;l.visible=!0;var n=a.tween({target:r,name:"beginAnime",time:10,main:function(e){var t=1-Math.pow(1-e,2),n=Math.sin(Math.PI*e);h.scale.set(1+.4*n),l.alpha=1-e,r.y=a.cubic(i,i-8,t)},finish:function(){l.visible=!1,s()}}),s=a.tween({target:r,name:"beginAnime",time:18,main:function(n){var s=a.cubic(n*n,1-Math.pow(1-n,2),n);r.x=a.cubic(t,e.x,s),r.y=a.cubic(i,e.y,s)},finish:function(){r.x=t,r.y=i,e.clb()}});n()}))}return i&&(n.__proto__=i),n.prototype=Object.create(i&&i.prototype),n.prototype.constructor=n,n}(e.Container),A=function(i){function n(n,s,o,r,c,h,l,p,d){var u=this;i.call(this);var g=this.addChild((new t.Graphics).beginFill(0,.7).drawRect(0,0,n.width,n.height).endFill());g.x=-p,g.y=-d,g.alpha=0;var m=this.addChild(new e.Container),f=m.addChild(new t.Sprite(n.resources.images["t_get_2x.png"]));f.anchor.set(.5),f.scale.set(.5),f.alpha=0;var v=m.addChild(new t.Container);v.scale.set(2);var w=v.addChild(new t.Sprite(n.resources.images["ball_"+(o+1)+".png"]));w.anchor.set(.5),w.alpha=0;var _=v.addChild(new t.Sprite(n.resources.images["ball_21.png"]));_.anchor.set(.5);var b=v.addChild(new t.Sprite(n.resources.images["ball_22.png"]));b.anchor.set(.5),b.alpha=0,v.x=f.x=r,v.y=f.y=c;var y,C,x,M,S,k;y=a.tween({target:u,name:"beginanim",time:14,main:function(e){var t=1-Math.pow(1-e,2);v.scale.set(a.cubic(2,1.5,t)),g.alpha=e},finish:function(){C()}}),C=a.tween({target:u,name:"beginanim",time:8,main:function(e){var t=e*e;v.scale.set(a.cubic(1.5,2,t)),b.alpha=e},finish:function(){w.alpha=1,_.alpha=0,b.alpha=1,s.snd.emit("play",{name:"time.mp3",isloop:!1}),x()}}),x=a.tween({target:u,name:"beginanim",time:18,main:function(e){var t=1-Math.pow(1-e,2);f.y=c-72*t,f.alpha=e,b.alpha=1-e},finish:function(){M()}}),M=a.tween({target:u,name:"beginanim",time:50,main:function(e){},finish:function(){S()}}),S=a.tween({target:u,name:"beginanim",time:8,main:function(e){var t=a.cubic(e*e,1-Math.pow(1-e,2),e);f.y=c-64*(1-t),f.alpha=1-e},finish:function(){k()}}),k=a.tween({target:u,name:"beginanim",time:12,main:function(e){var t=a.cubic(e*e,1-Math.pow(1-e,2),e);v.x=a.cubic(r,h,t),v.y=a.cubic(c,l,t),v.scale.set(a.cubic(2,1,t)),g.alpha=1-e},finish:function(){u.emit("pop")}}),y()}return i&&(n.__proto__=i),n.prototype=Object.create(i&&i.prototype),n.prototype.constructor=n,n}(e.Container),L=function(e){function i(i){var n=this;e.call(this);var s=this.addChild(new t.Graphics);s.alpha=0,s.visible=!1,this.on("fade",(function(e){s.clear(),s.beginFill(e.color,1).drawRect(0,0,i.width,i.height).endFill(),s.visible=!0;var t=s.alpha;a.tween({target:n,name:"fadeanim",time:e.time,main:function(i){var n=a.cubic(i*i,1-Math.pow(1-i,2),i);s.alpha=a.cubic(t,e.alpha,n)},finish:function(){e.alpha<=0&&(s.visible=!1)}})()})),this.on("fadeout",(function(e){s.clear(),s.beginFill(e.color,1).drawRect(0,0,i.width,i.height).endFill(),s.visible=!0;var t=s.alpha;a.tween({target:n,name:"fadeanim",time:e.time,main:function(i){var n=a.cubic(i*i,1-Math.pow(1-i,2),i);s.alpha=a.cubic(t,e.alpha,n)},finish:function(){e.alpha<=0&&(s.visible=!1)}})()}))}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i}(e.Container),E=function(e,t){this._$=e,this.scgcommon=t,this.resourcesdefine={},this.resources={}};E.prototype.loadResourcesAsync=function(t){var i=function(e,t){for(var i=0;i<t.length;i++)e+=""+t.charCodeAt(i);return e},n=function(e){var t={};for(var i in e)t[i]=e[i].data;return t},a=["images","jsons","sheets","sounds"],s={},o=this._$.vars.api.getLanguage();for(var r in this.resources[t.assetchunk]={images:{},sheets:{},jsons:{},sounds:{}},a){var c=this.resourcesdefine[t.assetchunk].data[t.scene][a[r]];for(var h in s[a[r]]||(s[a[r]]={}),c){var l=c[h].replace("?",o)+"?v='"+i(this.scgcommon.assetversion,o);s[a[r]][h]=l}}var p=this.resources[t.assetchunk],d=new e.TextureLoader,u=new e.SpritesheetLoader,g=new e.JsonLoader,m=new e.SoundLoader,f={basepath:this._$.vars.env.basepath,version:this.scgcommon.assetversion};return Promise.all([d.loadAllAsync(s.images,f).then((function(e){p.images=n(e)})),u.loadAllAsync(s.sheets,f).then((function(e){p.sheets=n(e)})),g.loadAllAsync(s.jsons,f).then((function(e){p.jsons=n(e)})),m.loadAllAsync(s.sounds,f).then((function(e){p.sounds=n(e)}))])},E.prototype.defineResources=function(e){this.resourcesdefine[e.assetchunk]||(this.resourcesdefine[e.assetchunk]={data:{},enableoverweite:e.enableoverwrite}),this.resourcesdefine[e.assetchunk].data[e.scene]=e.define},E.prototype.getResource=function(e,t,i){return this.resources[e]&&this.resources[e][t][i]?this.resources[e][t][i]:null};var R=function(e){function t(t,i){e.call(this),this._$=t,this._isMute=!1,this._isPause=!1,this._currentPlayBGM=null}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.playBGM=function(e,t,i,n){if(void 0===t&&(t=1),void 0===i&&(i=!0),void 0===n&&(n=!0),!this._isMute&&!this._isPause){var a=this._$.resources.sounds[e];i&&this._currentPlayBGM&&this._currentPlayBGM.data.stop(),a.loop(n),a.volume(t),a.play(),this._currentPlayBGM={seek:0,data:a}}},t.prototype.playSE=function(e,t,i){if(void 0===t&&(t=1),void 0===i&&(i=!0),!this._isMute&&!this._isPause){var n=this._$.resources.sounds[e];i&&n.stop(),n.volume(t),n.play()}},t.prototype.stopAllSounds=function(){var e=this._$.resources.sounds;for(var t in e)e[t].stop();this._currentPlayBGM=null},t.prototype.setPause=function(e){if(this._isPause!==e)if(this._isPause=e,e){this._currentPlayBGM&&(this._currentPlayBGM.seek=this._currentPlayBGM.data.seek());var t=this._$.resources.sounds;for(var i in t)t[i].stop()}else this._currentPlayBGM&&(this._isMute||(this._currentPlayBGM.data.seek(this._currentPlayBGM.seek),this._currentPlayBGM.data.play()))},t.prototype.setMute=function(e){this._isMute=e,e&&this.stopAllSounds()},t.prototype.isMute=function(){return this._isMute},t.prototype.isPause=function(){return this._isPause},t}(e.Container),I=function(e){function t(t,i){e.call(this),this._$=t,this.scgcommon=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.dataSaveAcync=function(){var e=this;return new Promise((function(t,i){var n=e.scgcommon.util.encodeString(JSON.stringify(e.scgcommon.save.data.values),e.scgcommon.save.key),a={version:e.scgcommon.save.data.version,encdata:n};e._$.vars.api.setDataAsync("savedata",JSON.stringify(a),"always").then((function(){t()})).catch((function(){i()}))}))},t.prototype.playRewordAdAsync=function(){var e=this;return new Promise((function(t,i){e._$.vars.env.isAdPlatform?e._$.vars.api.viewRewardAdAsync().then((function(){t()})).catch((function(t){t.type===e._$.vars.enum.errors.AdSkipped?i("skip"):i("error")})):t()}))},t.prototype.playInterAdAsync=function(){var e=this;return new Promise((function(t,i){e._$.vars.env.isAdPlatform?e._$.vars.api.viewAdAsync().then((function(){t()})).catch((function(){i()})):t()}))},t.prototype.sendScoreAsync=function(e){return this._$.vars.api.sendScoreAsync(e)},t}(e.Container),P=function(){};P.prototype.encodeString=function(e,t){for(var i="",n=0;n<e.length;n++)i+=String.fromCharCode(e.charCodeAt(n)^t.charCodeAt(n%t.length)*(n+1));return i};var T=function(t,i){this._$=t,this._scgcommon={gametitle:"sy_default",assetversion:i.assetversion,defaultlang:this._$.vars.api.getLanguage(),utilconfigs:{langmsg:{}},save:{key:"123456789",data:{version:"123456789",values:{}}},appcommondata:{},util:new P},this.sound=new R(t,this._scgcommon),this.resource=new E(t,this._scgcommon),this.api=new I(t,this._scgcommon),this._approotcontainer=i.appcanvas,this._approotcontainer.scale.set(1/Math.max(i.magnification,1e-4)),this.width=t.width*i.magnification,this.height=t.height*i.magnification,this._gamecontainer=this._approotcontainer.addChild(new e.Container)};T.prototype.initAsync=function(){var t=this;return new Promise((function(i,n){(new e.JsonLoader).loadAllAsync({languagemsg:"assets/data/languagemsg.json"},{basepath:t._$.vars.env.basepath,version:t._scgcommon.assetversion}).then((function(e){t._scgcommon.utilconfigs.langmsg=e.languagemsg.data,i({appcontainer:t._gamecontainer})})).catch((function(){n()}))}))},T.prototype.getSaveData=function(){return this._scgcommon.save.data.values},T.prototype.setSaveData=function(e){this._scgcommon.save.data.values=e},T.prototype.getAppCommonData=function(){return this._scgcommon.appcommondata},T.prototype.setAppCommonData=function(e){this._scgcommon.appcommondata=e};var G=function(e){function t(t,i){e.call(this),this.on("play",(function(e){i.save.isMute||(t.resources.sounds[e.name].loop(e.isloop),t.resources.sounds[e.name].stop(),t.resources.sounds[e.name].play())})),this.on("allstop",(function(){for(var e in t.resources.sounds)t.resources.sounds[e].stop()})),this.on("allvolumechange",(function(e){for(var i in t.resources.sounds)t.resources.sounds[i].volume(e)}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(e.Container),N=function(i){function n(n,a){var s=this;i.call(this);var o={save:{bestscore:0,useskinid:0,isMute:!1,coin:0,skin:[{isrelease:!0},{isrelease:!1},{isrelease:!1},{isrelease:!1},{isrelease:!1},{isrelease:!1},{isrelease:!1},{isrelease:!1},{isrelease:!1},{isrelease:!1},{isrelease:!1},{isrelease:!1},{isrelease:!1},{isrelease:!1},{isrelease:!1},{isrelease:!1},{isrelease:!1},{isrelease:!1},{isrelease:!1},{isrelease:!1},{isrelease:!1},{isrelease:!1},{isrelease:!1},{isrelease:!1}]},snd:new e.Container,data:null};if(o.snd=new G(n,o),a.resource.defineResources({assetchunk:"cmn",scene:"a",enableoverwrite:!1,define:{images:{"button_2_2x.png":"assets/images/language/?/button_2_2x.png","logo_2x.png":"assets/images/language/?/logo_2x.png","t_tugihe_2x.png":"assets/images/language/?/t_tugihe_2x.png","text_2x.png":"assets/images/language/?/text_2x.png"},sheets:{},jsons:{},sounds:{}}}),n.vars.data.gamedata){var r=JSON.parse(decodeURIComponent(n.vars.data.gamedata));if(r){o.save=r;for(var c=o.save.skin.length;c<20;c++)o.save.skin.push({isrelease:!1});o.save.skin.length=20}}o.save.isMute=!1;var l,p=function(){n.vars.api.callAsync("startGame").then((function(){d()}))},d=function(){a.resource.loadResourcesAsync({assetchunk:"cmn",scene:"a"}).then((function(){u()})).catch((function(e){}))},u=function(){var e=s.addChild(new h(n,o,a));e.on("rewordads",m),e.on("interads",f),e.on("scoreregister",v),e.on("save",g),e.once("changelanguage",(function(t){e.task.clear(),e.destroy(),n.vars.api.changeLanguageAsync(t).then((function(){d()}))})),e.once("pop",(function(){n.vars.api.callAsync("finishPlay").then((function(){e.task.clear(),e.destroy(),u()}))}))},g=function(e){n.vars.api.setDataAsync("gamedata",JSON.stringify(o.save),"always").then((function(){e()})).catch((function(t){e()}))},m=function(e){n.vars.env.isAdPlatform?n.vars.api.viewRewardAdAsync().then((function(t){e.finish()})).catch((function(t){t.type===n.vars.enum.errors.AdSkipped?e.skip():e.error()})):e.finish()},f=function(e){n.vars.api.viewAdAsync().then((function(t){e.finish()})).catch((function(t){e.error()}))},v=function(e,t){n.vars.api.sendScoreAsync(t).then((function(){e()})).catch((function(t){e()}))};(l=new t.Loader).add("leveldata",n.vars.env.basepath+"assets/data/map.json"),l.load((function(e,t){o.data=t.leveldata.data,o.data[389]&&(o.data[389][1]=[]),s.addChild(new F(n,o)),p()}))}return i&&(n.__proto__=i),n.prototype=Object.create(i&&i.prototype),n.prototype.constructor=n,n}(e.Container),F=function(e){function i(i,n){e.call(this);this.addChild(new t.Sprite(i.resources.images["b_001.png"]));var a=this.addChild(new D(i,n,"b_004.png",.18));a.x=.5*i.width-.5*a.width,a.y=100,a.rotation=-.6;var s=this.addChild(new D(i,n,"b_004.png",.18));s.x=.5*i.width-.5*a.width,s.y=300,s.rotation=-.6;var o=this.addChild(new D(i,n,"b_004.png",.18));o.x=.5*i.width-.5*a.width,o.y=600,o.rotation=-.6;var r=this.addChild(new D(i,n,"b_004.png",.18));r.x=.5*i.width-.5*a.width,r.y=900,r.rotation=-.6;this.addChild(new W(i,n));var c=this.addChild(new D(i,n,"b_002.png",.2)),h=this.addChild(new D(i,n,"b_002.png",.2));c.x=-180,h.x=i.width-h.width+180;var l=this.addChild(new D(i,n,"b_003.png",.8)),p=this.addChild(new D(i,n,"b_003.png",.8));l.x=-60,p.x=i.width-p.width+60}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i}(e.Container),W=function(i){function n(n,s){var o=this;i.call(this);var r=function(){var i=o.addChild(new e.Container);i.x=10+.7*n.width*Math.random(),i.y=-48,i.rotation=-.2,i.alpha=0;i.addChild(new t.Sprite(n.resources.images["b_005.png"]));var s=a.tween({target:i,name:"fadeanim",time:1+Math.floor(60*Math.random()),main:function(e){},finish:function(){c()}}),c=a.tween({target:i,name:"fadeanim",time:120,main:function(e){var t=1-.5*(Math.cos(2*Math.PI*e)+1);i.alpha=.88*t},finish:function(){i.task.clear(),i.destroy(),r()}});s()};r(),r(),r()}return i&&(n.__proto__=i),n.prototype=Object.create(i&&i.prototype),n.prototype.constructor=n,n}(e.Container),D=function(e){function i(i,n,a,s){var o=this;e.call(this);for(var r=[],c=0,h=0;h<5;h++){var l=this.addChild(new t.Sprite(i.resources.images[a]));l.y=c,c-=l.height,r.push(l)}var p=r[r.length-1];o.task.on("systemtask",(function(e){for(var t=0;t<r.length;t++)r[t].y+=s*e.delta;for(var i=0;i<r.length;i++)r[i].y>=2*r[i].height&&(r[i].y=p.y-r[i].height,p=r[i])}))}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i}(e.Container),V=function(e){function t(t){e.call(this);var i=new T(t,{appcanvas:this,magnification:1,assetversion:t.vars.env.version+""});i.initAsync().then((function(e){e.appcontainer.addChild(new N(t,i))})).catch((function(e){}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(e.Container),B=e.Content.create();B.setConfig({width:450,height:800}),B.defineImages({"b_001.png":"assets/images/back/b_001.png","b_002.png":"assets/images/back/b_002.png","b_003.png":"assets/images/back/b_003.png","b_004.png":"assets/images/back/b_004.png","b_005.png":"assets/images/back/b_005.png","a_001.png":"assets/images/balls/a_001.png","a_002.png":"assets/images/balls/a_002.png","a_003.png":"assets/images/balls/a_003.png","p_001.png":"assets/images/balls/p_001.png","p_002.png":"assets/images/balls/p_002.png","p_003.png":"assets/images/balls/p_003.png","p_004.png":"assets/images/balls/p_004.png","BEST-SCORE.png":"assets/images/logos/BEST-SCORE.png","boost_start.png":"assets/images/logos/boost_start.png","continue.png":"assets/images/logos/continue.png","FLOOR.png":"assets/images/logos/FLOOR.png","FRIENDS.png":"assets/images/logos/FRIENDS.png","leader_board.png":"assets/images/logos/leader_board.png","new.png":"assets/images/logos/new.png","PLAY.png":"assets/images/logos/PLAY.png","PLAY_FRIENDLY.png":"assets/images/logos/PLAY_FRIENDLY.png","PLAY_SINGLE.png":"assets/images/logos/PLAY_SINGLE.png","SCORE.png":"assets/images/logos/SCORE.png","SECONDS.png":"assets/images/logos/SECONDS.png","start.png":"assets/images/logos/start.png","t_leader_board.png":"assets/images/logos/t_leader_board.png","th.png":"assets/images/logos/th.png","TOP.png":"assets/images/logos/TOP.png","WORLD.png":"assets/images/logos/WORLD.png","YOUR-RANKING.png":"assets/images/logos/YOUR-RANKING.png","0.png":"assets/images/number/0.png","1.png":"assets/images/number/1.png","2.png":"assets/images/number/2.png","3.png":"assets/images/number/3.png","4.png":"assets/images/number/4.png","5.png":"assets/images/number/5.png","6.png":"assets/images/number/6.png","7.png":"assets/images/number/7.png","8.png":"assets/images/number/8.png","9.png":"assets/images/number/9.png","f_001.png":"assets/images/stage/f_001.png","f_001_2.png":"assets/images/stage/f_001_2.png","f_002.png":"assets/images/stage/f_002.png","f_003.png":"assets/images/stage/f_003.png","f_003_2.png":"assets/images/stage/f_003_2.png","t_001.png":"assets/images/stage/t_001.png","t_002.png":"assets/images/stage/t_002.png","w_002.png":"assets/images/stage/w_002.png","w_003.png":"assets/images/stage/w_003.png","w_004.png":"assets/images/stage/w_004.png","w_005.png":"assets/images/stage/w_005.png","w_006.png":"assets/images/stage/w_006.png","c_001.png":"assets/images/continue/c_001.png","c_002.png":"assets/images/continue/c_002.png","c_003.png":"assets/images/continue/c_003.png","c_004.png":"assets/images/continue/c_004.png","c_switch_1.png":"assets/images/stage/c_switch_1.png","c_switch_2.png":"assets/images/stage/c_switch_2.png","coin_1.png":"assets/images/stage/coin_1.png","coin_2.png":"assets/images/stage/coin_2.png","coin_3.png":"assets/images/stage/coin_3.png","coin_4.png":"assets/images/stage/coin_4.png","coin_5.png":"assets/images/stage/coin_5.png","coin_6.png":"assets/images/stage/coin_6.png","coin_7.png":"assets/images/stage/coin_7.png","coin_8.png":"assets/images/stage/coin_8.png","coin_9.png":"assets/images/stage/coin_9.png","logo_2x.png":"assets/images/top/logo_2x.png","button_2x.png":"assets/images/top/button_2x.png","t_tap_2x.png":"assets/images/top/t_tap_2x.png","sound_01_2x.png":"assets/images/top/sound_01_2x.png","sound_02_2x.png":"assets/images/top/sound_02_2x.png","text_2x.png":"assets/images/top/text_2x.png","t_cancel_2x.png":"assets/images/top/t_cancel_2x.png","t_top_2x.png":"assets/images/top/t_top_2x.png","button_2_2x.png":"assets/images/top/button_2_2x.png","t_ok_2x.png":"assets/images/top/t_ok_2x.png","ball_1.png":"assets/images/skin/ball_1.png","ball_2.png":"assets/images/skin/ball_2.png","ball_3.png":"assets/images/skin/ball_3.png","ball_4.png":"assets/images/skin/ball_4.png","ball_5.png":"assets/images/skin/ball_5.png","ball_6.png":"assets/images/skin/ball_6.png","ball_7.png":"assets/images/skin/ball_7.png","ball_8.png":"assets/images/skin/ball_8.png","ball_9.png":"assets/images/skin/ball_9.png","ball_10.png":"assets/images/skin/ball_10.png","ball_11.png":"assets/images/skin/ball_11.png","ball_12.png":"assets/images/skin/ball_12.png","ball_13.png":"assets/images/skin/ball_13.png","ball_14.png":"assets/images/skin/ball_14.png","ball_15.png":"assets/images/skin/ball_15.png","ball_16.png":"assets/images/skin/ball_16.png","ball_17.png":"assets/images/skin/ball_17.png","ball_18.png":"assets/images/skin/ball_18.png","ball_19.png":"assets/images/skin/ball_19.png","ball_20.png":"assets/images/skin/ball_20.png","ball_21.png":"assets/images/skin/ball_21.png","ball_22.png":"assets/images/skin/ball_22.png","t_shop_2x.png":"assets/images/top/t_shop_2x.png","button_3_2x.png":"assets/images/top/button_3_2x.png","t_get_2x.png":"assets/images/top/t_get_2x.png","t_tugihe_2x.png":"assets/images/top/t_tugihe_2x.png","t_plus.png":"assets/images/top/t_plus.png"}),B.defineSpritesheets({languages:"assets/images/language/languages.json",languageui:"assets/images/language/languageui.json"}),B.defineSounds({"bgm.mp3":"assets/sounds/bgm.mp3","button.mp3":"assets/sounds/button.mp3","coin.mp3":"assets/sounds/coin.mp3","gameover.mp3":"assets/sounds/gameover.mp3","jump.mp3":"assets/sounds/jump.mp3","rocket.mp3":"assets/sounds/rocket.mp3","switch.mp3":"assets/sounds/switch.mp3","time.mp3":"assets/sounds/time.mp3"}),B.defineJsons({}),B.defineLibraries({root:V}),SCG.startAsync({Content:B,width:450,height:800})}(Pixim,PIXI);
