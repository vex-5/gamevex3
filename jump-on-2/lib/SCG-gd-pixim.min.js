/*!
 * SCG-gd-pixim - v1.10.3
 * 
 * @require Pixim.js - v1.14.0
 * @require howler.js - v2.2.2
 * @license MIT
 */
this.SCG=function(t,e,n){"use strict";var r=function(t){this._options=t};r.prototype.addModal=function(t){var e={type:t.type,texts:t.texts,onFinish:function(){n&&n.parentNode&&n.parentNode.removeChild(n),t.onFinish()},zIndex:(this._options.zIndex||0).toString()},n=this._options.createHandler?this._options.createHandler(e):function(t){console.warn("view modal",t.type);var e=t.texts.body,n=t.texts.button,r=document.createElement("div");r.style.width="100%",r.style.height="100%",r.style.backgroundColor="rgba(0, 0, 0, 0.6)",r.style.textAlign="center",r.style.position="absolute",r.style.top="0",r.style.left="0",r.style.zIndex=t.zIndex,r.style.display="table",r.style.userSelect="none";var o=r.appendChild(document.createElement("div"));o.style.display="table-cell",o.style.verticalAlign="middle";var i=o.appendChild(document.createElement("div"));i.style.borderRadius="10px",i.style.width="min(90%, 330px)",i.style.backgroundColor="#FFF",i.style.color="#000",i.style.display="inline-block",i.style.fontSize="14px",i.style.boxShadow="#000 2px 2px 5px";var a=i.appendChild(document.createElement("div"));a.style.margin="20px 10px",a.style.lineHeight="30px";for(var s=0;s<e.length;s++)a.appendChild(document.createTextNode(e[s])),a.appendChild(document.createElement("br"));var c=a.appendChild(document.createElement("div"));return c.style.backgroundColor="#E99",c.style.color="#FFF",c.style.fontWeight="bold",c.style.cursor="pointer",c.style.fontSize="24px",c.style.display="inline-block",c.style.width="60%",c.style.lineHeight="50px",c.style.marginTop="30px",c.style.borderRadius="10px",c.style.boxShadow="#000 2px 2px 2px",c.appendChild(document.createTextNode(n)),r.addEventListener("click",(function(){t.onFinish()})),r}(e);n&&(this._options.container||document.body).appendChild(n)};var o=function(t){void 0===t&&(t={}),this._filterCount=0;var e=t.zIndex,n=t.container,r=document.createElement("div");r.style.width="100%",r.style.height="100%",r.style.backgroundColor="rgba(0, 0, 0, 0)",r.style.textAlign="center",r.style.position="absolute",r.style.top="0",r.style.left="0",r.style.display="table",r.style.zIndex=(e||0).toString(),this._filter=r,this._container=n||document.body};o.prototype.view=function(t){this._filterCount++,this._filter.style.backgroundColor=t||"rgba(0, 0, 0, 0)",this._container.appendChild(this._filter)},o.prototype.hide=function(){this._filterCount--,this._filterCount<=0&&(this._filterCount=0,this._filter.parentNode&&this._filter.parentNode.removeChild(this._filter))};var i,a=function(t){var e={onFinish:function(){n&&n.element.parentNode&&n.element.parentNode.removeChild(n.element)},zIndex:(t.zIndex||0).toString()},n=t.createHandler?t.createHandler(e):function(t){var e=document.createElement("div");e.style.width="100%",e.style.height="100%",e.style.background="#000",e.style.textAlign="center",e.style.position="absolute",e.style.zIndex=t.zIndex,e.style.left=e.style.top="0";var n=e.appendChild(document.createElement("div"));n.style.width="min(90%, 330px)",n.style.height="100%",n.style.margin="auto";var r=n.appendChild(document.createElement("div"));r.style.width="100%",r.style.height="100%",r.style.display="table";var o=r.appendChild(document.createElement("div"));o.style.display="table-cell",o.style.verticalAlign="middle";var i=o.appendChild(document.createElement("div"));i.style.textAlign="right",i.style.color="#FFF";var a=i.appendChild(document.createTextNode("0%")),s=o.appendChild(document.createElement("div"));s.style.width="100%",s.style.height="10px",s.style.position="relative";var c=s.appendChild(document.createElement("div"));c.style.width="100%",c.style.height="100%",c.style.background="#FFF",c.style.position="absolute",c.style.top="0px";var p=s.appendChild(document.createElement("div"));return p.style.width="0%",p.style.height="100%",p.style.background="#F00",p.style.position="absolute",p.style.top="0px",{element:e,progress:function(e){var n=Math.floor(100*e);a.textContent=n+"%",p.style.width=n+"%",1===e&&setTimeout((function(){t.onFinish()}),500)}}}(e);n&&(t.container||document.body).appendChild(n.element),this._preloadViewData=n};a.prototype.progress=function(t){this._preloadViewData&&this._preloadViewData.progress(t)},function(t){var e=function(t){this.type=t.type,this.original=t.original||null,this.message=t.message||""};t.ErrorBase=e,function(t){t.Basic="error",t.ReInitialize="re-initialize",t.Uninitialized="uninitialized",t.Build="build-failed",t.ReBuild="re-build",t.DataGet="data-get-failed"}(t.framework||(t.framework={}));var n=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(e);t.FrameworkError=n,function(t){t.Basic="error",t.Uncallable="uncallable",t.Unauthorized="unauthorized",t.SendScore="send-score-failed",t.DataSet="data-set-failed",t.AdMissing="ad-missing",t.AdSkipped="ad-skipped",t.CycleTiming="cycle-timing",t.ContentLoad="content-load-failed",t.UndefinedLayer="layer-undefined",t.UsedContent="used-content",t.UnsupportedLanguage="unsupported-language"}(t.api||(t.api={}));var r=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(e);t.ApiError=r}(i||(i={}));var s,c=i;!function(t){t.Error="error",t.BuildError="buildError",t.ApiError="apiError",t.RewardAdApiError="rewardAdApiError"}(s||(s={}));var p=s,u={};u[p.Error]={body:["エラーが発生しました","通信環境の良い場所で","再度お試しください"],button:"リトライ"},u[p.BuildError]={body:["ゲームの起動に失敗しました","ページの再読み込み、または","アプリの再起動をお試しください"],button:"OK"},u[p.ApiError]={body:["エラーが発生しました","通信環境の良い場所で","再度お試しください"],button:"リトライ"},u[p.RewardAdApiError]={body:["現在ご提供できる広告が無いか","広告をスキップされている可能性があるため","もう一度お試しいただくか","使用しないでゲームを続けてください"],button:"OK"};var l=function(){this._isInit=!1,this._isBuild=!1};l.prototype.init=function(t,e,n){if(this._isInit)throw new c.FrameworkError({type:c.framework.ReInitialize});this._isInit=!0,this._gameEngineOptions=t,this._coreOptions=e,this._extraOptions=n||{}},l.prototype._buildAsync=function(t,e){var n=this;return(n._extraOptions.languageOptions?"object"==typeof n._extraOptions.languageOptions?Promise.resolve(n._extraOptions.languageOptions):fetch(n._extraOptions.languageOptions).then((function(t){return t.json()})):Promise.resolve({})).then((function(t){var e=[];if(n._extraOptions.languages)if("string"==typeof n._extraOptions.languages)e.push(n._extraOptions.languages);else if(Array.isArray(n._extraOptions.languages)){for(var r=0;r<n._extraOptions.languages.length;r++)"string"==typeof n._extraOptions.languages[r]&&e.push(n._extraOptions.languages[r]);0===e.length&&e.push("ja")}else e.push("ja");else e.push("ja");return{languages:e,modalTexts:t.modalTexts||{}}})).then((function(i){if(!n._isInit)throw new c.FrameworkError({type:c.framework.Uninitialized});if(n._isBuild)throw new c.FrameworkError({type:c.framework.ReBuild});n._isBuild=!0;var s=new t({languages:i.languages},n._coreOptions),l=s.createReceiver(),d=Object.assign({},n._extraOptions.modalOptions||{});d.zIndex=void 0===d.zIndex?10:d.zIndex;var h=Object.assign({},n._extraOptions.filterOptions||{});h.zIndex=void 0===h.zIndex?9:h.zIndex;var y="boolean"==typeof n._extraOptions.preloadViewOptions?{}:Object.assign({},n._extraOptions.preloadViewOptions||{});y.zIndex=void 0===y.zIndex?1:y.zIndex;var f=new r(d),_=new o(h);l.on("viewFilter",(function(t){_.view(t.data)})),l.on("hideFilter",(function(){_.hide()}));var m=function(t){var e=t.type,n=t.onFinish,r=s.getLanguage();_.view();var o=function(){setTimeout((function(){_.hide(),n()}),500)};i.modalTexts[e]&&i.modalTexts[e][r]?f.addModal({type:e,texts:i.modalTexts[e][r],onFinish:o}):f.addModal({type:e,texts:u[e]||u.error,onFinish:o})},g=function(t){m(t.data)};l.on("addModal",g);var v=n._createGameEngine({core:s,languages:i.languages}),w=v.createReceiver();return w.on("addModal",g),s.initializeAsync().then((function(){return s.loadDataAsync()})).then((function(t){return s.introAsync().then((function(){if(n._extraOptions.preloadViewOptions){var r=new a(y);w.on("preloadProgress",(function(t){r.progress(t.data)}))}return v.buildAsync(e,t)}))})).catch((function(t){throw n._isBuild=!1,n._destroyGameEngine(),m({type:p.BuildError,onFinish:function(){}}),new c.FrameworkError({type:c.framework.Build,original:t})}))}))},l.prototype._destroyGameEngine=function(){};
/*!
     * @tawaship/transceiver - v1.0.0
     * 
     * @author tawaship (makazu.mori@gmail.com)
     * @license MIT
     */
/*!
     * @tawaship/emitter - v3.1.1
     * 
     * @author tawaship (makazu.mori@gmail.com)
     * @license MIT
     */
var d=function(){this._events={}};d.prototype._on=function(t,e,n){if(!t||!e)return this;for(var r=this._events[t]=this._events[t]||[],o=0;o<r.length;o++)if(r[o].callback===e)return this;return r.push({callback:e,once:n}),this},d.prototype.on=function(t,e){return this._on(t,e,!1)},d.prototype.once=function(t,e){return this._on(t,e,!0)},d.prototype.off=function(t,e){if(!t||!e)return this;for(var n=this._events[t]||[],r=0;r<n.length;r++)if(n[r].callback===e)return n.splice(r,1),this;return this},d.prototype._emit=function(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];if(!t)return this;for(var o=this._events[t]||[],i=[],a=o.length-1;a>=0;a--){var s=o[a];s.once&&o.splice(a,1),i.push(s)}for(var c=i.length-1;c>=0;c--)i[c].callback.apply(e,n);return this},d.prototype.emit=function(t){for(var e,n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];return(e=this)._emit.apply(e,[t,this].concat(n))},d.prototype.cemit=function(t,e){for(var n,r=[],o=arguments.length-2;o-- >0;)r[o]=arguments[o+2];return(n=this)._emit.apply(n,[t,e].concat(r))},d.prototype._emitAll=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(null==t)return this;var r=[];for(var o in this._events)for(var i=this._events[o]||[],a=i.length-1;a>=0;a--){var s=i[a];s.once&&i.splice(a,1),r.push(s)}for(var c=r.length-1;c>=0;c--)r[c].callback.apply(t,e);return this},d.prototype.emitAll=function(){for(var t,e=[],n=arguments.length;n--;)e[n]=arguments[n];return(t=this)._emitAll.apply(t,[this].concat(e))},d.prototype.cemitAll=function(t){for(var e,n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];return(e=this)._emitAll.apply(e,[t].concat(n))},d.prototype.clear=function(t){return void 0===t&&(t=""),t?delete this._events[t]:this._events={},this};var h=function(t){function e(e){t.call(this),this._connectors=[],this._transceiver=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getConnectors=function(){return this._connectors.concat()},e.prototype.send=function(t,e){for(var n=this._connectors,r=0;r<n.length;r++)n[r].receive(t,{sender:this._transceiver,data:e})},e.prototype.receive=function(t,e){if(this._transceiver.enabled)return this.cemit(t,this._transceiver,e)},e.prototype.connect=function(t){if(t!==this)return-1===this._connectors.indexOf(t)&&this._connectors.push(t),this},e.prototype.disconnect=function(t){if(t!==this){var e=this._connectors.indexOf(t);return e>-1&&this._connectors.splice(e,1),this}},e.prototype.disconnectAll=function(){for(var t=this._connectors,e=t.length-1;e>=0;e--){var n=t[e];this.disconnect(n),n.disconnect(this)}return this},e}(d),y=function(){this.enabled=!0,this._connector=new h(this)};y.prototype.getConnector=function(){return this._connector},y.prototype.emit=function(t,e){if(this.enabled)return this._connector.send(t,e),this},y.prototype.on=function(t,e){return this._connector.on(t,e),this},y.prototype.once=function(t,e){return this._connector.once(t,e),this},y.prototype.off=function(t,e){return this._connector.off(t,e),this},y.prototype.clear=function(t){return void 0===t&&(t=""),this._connector.clear(t),this},y.prototype.connect=function(t){var e=t.getConnector();return this._connector.connect(e),e.connect(this._connector),this},y.prototype.disconnect=function(t){var e=t.getConnector();return this._connector.disconnect(e),e.disconnect(this._connector),this},y.prototype.disconnectAll=function(){return this._connector.disconnectAll(),this},y.create=function(t){for(var e=[],n=0;n<t;n++)e.push(new y);return y.connect(e),e},y.connect=function(t){for(var e=0;e<t.length;e++)for(var n=e+1;n<t.length;n++)t[e].connect(t[n])};var f=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.emit=function(e,n){return t.prototype.emit.call(this,e,n)},e}(y),_=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.on=function(e,n){return t.prototype.on.call(this,e,n)},e.prototype.once=function(e,n){return t.prototype.once.call(this,e,n)},e}(y),m=function(t,e){this._isBuild=!1,this._progress=0,this._progressData={start:0,end:0,count:1};var n=t.core,r=t.languages;this._options=e,this._core=n,this._languages=r,this._transmitter=new f,this._coreReceiver=n.createReceiver()};m.prototype.createReceiver=function(){var t=new _;return this._transmitter.connect(t),t},m.prototype._addModalAsync=function(t){var e=this;return new Promise((function(n,r){e._transmitter.emit("addModal",{type:t,onFinish:n})}))},m.prototype._setProgressData=function(t){var e=Math.min(1,Math.max(this._progressData.end,0)),n=Math.min(1,Math.max(e,t.end));this._progress=e,this._progressData={start:e,end:n,count:Math.max(1,t.count)},this._transmitter.emit("preloadProgress",this._progress)},m.prototype._forwardProgress=function(){var t=this._progressData;this._progress+=(t.end-t.start)/t.count,this._progress=Math.min(this._progress,t.end,1),this._transmitter.emit("preloadProgress",this._progress)},m.prototype._finishProgress=function(){this._progress=1,this._transmitter.emit("preloadProgress",1)};var g=function(t){this._core=t},v=!1,w=!1,A=0;function b(){t.Howler&&t.Howler.mute(A>0||v)}var x=function(){},E={isMutedSound:{configurable:!0}};x.watchVisibility=function(){!w&&t.Howler&&(document.addEventListener("visibilitychange",(function(t){"visible"===document.visibilityState?x.forceMute(!1):x.forceMute(!0)})),w=!0)},x.forceMute=function(t){t?A++:--A<0&&(A=0),b()},x.mute=function(e){t.Howler&&(v=e,b())},x.stopAllSounds=function(){t.Howler&&t.Howler.stop()},E.isMutedSound.get=function(){return v},Object.defineProperties(x,E);var P=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.emit=function(e,n){return t.prototype.emit.call(this,e,n)},e}(y),S=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.on=function(e,n){return t.prototype.on.call(this,e,n)},e.prototype.once=function(e,n){return t.prototype.once.call(this,e,n)},e}(y),C=function(t){function e(e,n){t.call(this,e),this._transmitter=n,x.watchVisibility()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.sendScoreAsync=function(t,e){return void 0===e&&(e={}),x.stopAllSounds(),this._core.sendScoreAsync(t,e).catch((function(t){if(t instanceof c.ApiError)throw t;throw new c.ApiError({type:c.api.Basic,original:t})}))},e.prototype.viewAdAsync=function(t){return void 0===t&&(t={}),x.forceMute(!0),this._core.viewAdAsync(t).then((function(){x.forceMute(!1)})).catch((function(t){if(x.forceMute(!1),t instanceof c.ApiError)throw t;throw new c.ApiError({type:c.api.Basic,original:t})}))},e.prototype.viewRewardAdAsync=function(t){return void 0===t&&(t={}),x.forceMute(!0),this._core.viewRewardAdAsync(t).then((function(){x.forceMute(!1)})).catch((function(t){if(x.forceMute(!1),t instanceof c.ApiError)throw t;throw new c.ApiError({type:c.api.Basic,original:t})}))},e.prototype.setDataAsync=function(t,e,n,r){return void 0===n&&(n="always"),void 0===r&&(r={}),this._core.setDataAsync(t,e,n,r).catch((function(t){if(t instanceof c.ApiError)throw t;throw new c.ApiError({type:c.api.Basic,original:t})}))},e.prototype.setDataAllAsync=function(t,e){return void 0===e&&(e={}),this._core.setDataAllAsync(t,e).catch((function(t){if(t instanceof c.ApiError)throw t;throw new c.ApiError({type:c.api.Basic,original:t})}))},e.prototype.flushDataAsync=function(t){return void 0===t&&(t={}),console.warn('[SCG] "flushDataAsync" is called'),this._core.flushDataAsync(t).catch((function(t){if(t instanceof c.ApiError)throw t;throw new c.ApiError({type:c.api.Basic,original:t})}))},e.prototype.callAsync=function(t,e){return void 0===e&&(e={}),this._core.callAsync(t,e)},e.prototype.viewLoadingAsync=function(){var t=this;return new Promise((function(e){t._transmitter.emit("viewLoading",e)}))},e.prototype.hideLoadingAsync=function(){var t=this;return new Promise((function(e){t._transmitter.emit("hideLoading",e)}))},e.prototype.prepareContentAsync=function(t,e){var n=this;return void 0===e&&(e={}),new Promise((function(r,o){n._transmitter.emit("prepareContent",{Content:t.Content,onProgress:t.onProgress,isThrowError:e.isThrowError,onFinish:r,onError:o})})).catch((function(t){if(t instanceof c.ApiError)throw t;throw new c.ApiError({type:c.api.ContentLoad,original:t})}))},e.prototype.muteSound=function(t){x.mute(t)},e.prototype.stopAllSounds=function(){x.stopAllSounds()},e.prototype.isMutedSound=function(){return x.isMutedSound},e.prototype.getLanguage=function(){return this._core.getLanguage()},e.prototype.changeLanguageAsync=function(t,e){return void 0===e&&(e={}),this._core.changeLanguageAsync(t,e).catch((function(t){if(t instanceof c.ApiError)throw t;throw new c.ApiError({type:c.api.Basic,original:t})}))},e}(g),O=/iPhone/i,k=/iPod/i,D=/iPad/i,F=/\biOS-universal(?:.+)Mac\b/i,M=/\bAndroid(?:.+)Mobile\b/i,I=/Android/i,T=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,G=/Silk/i,z=/Windows Phone/i,j=/\bWindows(?:.+)ARM\b/i,R=/BlackBerry/i,H=/BB10/i,L=/Opera Mini/i,B=/\b(CriOS|Chrome)(?:.+)Mobile/i,N=/Mobile(?:.+)Firefox\b/i,V=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};var W,Y=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var n=e.userAgent,r=n.split("[FBAN");void 0!==r[1]&&(n=r[0]),void 0!==(r=n.split("Twitter"))[1]&&(n=r[0]);var o=function(t){return function(e){return e.test(t)}}(n),i={apple:{phone:o(O)&&!o(z),ipod:o(k),tablet:!o(O)&&(o(D)||V(e))&&!o(z),universal:o(F),device:(o(O)||o(k)||o(D)||o(F)||V(e))&&!o(z)},amazon:{phone:o(T),tablet:!o(T)&&o(G),device:o(T)||o(G)},android:{phone:!o(z)&&o(T)||!o(z)&&o(M),tablet:!o(z)&&!o(T)&&!o(M)&&(o(G)||o(I)),device:!o(z)&&(o(T)||o(G)||o(M)||o(I))||o(/\bokhttp\b/i)},windows:{phone:o(z),tablet:o(j),device:o(z)||o(j)},other:{blackberry:o(R),blackberry10:o(H),opera:o(L),firefox:o(N),chrome:o(B),device:o(R)||o(H)||o(L)||o(N)||o(B)},any:!1,phone:!1,tablet:!1};return i.any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}(navigator),K=function(){};K.isSPDevice=function(){return Y.any},function(t){t.Standalone="Standalone",t.Yahoo="Yahoo",t.Gmo="Gmo",t.Simeji="Simeji",t.Au="Au",t.Gmode="Gmode",t.FBInstant="FBInstant",t.Lpm="Lpm",t._55bb="55bb",t.GameDistribution="GameDistribution"}(W||(W={}));var U,q=W;!function(t){t.StartGame="startGame",t.PlayGame="playGame",t.QuitGame="quitGame",t.FinishPlay="finishPlay"}(U||(U={}));var J,Q=U;!function(t){t.More="more",t.Less="less",t.Always="always"}(J||(J={}));var X=J,Z=function(t){function n(){t.apply(this,arguments)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.buildAsync=function(t,n){var r=this,o=t.Content,i=t.width,a=t.height,s=t.addVarsAsync,u=t.definePlatformAssetsHandler,l=t.layers,d=this._options.basepath||"./",h=this._options.version||"",y=this._options.xhr||!1,f=this._options.typeOptions,_=this._options.pixiOptions||{},m=this._options.addVarsAsync,g=i/a,v=this._options.canScroll||!1;return this._setProgressData({end:.1,count:1}),this._core.startAsync(i,a).then((function(t){var w=t.adjuster,A=t.container||document.body,b=new e.Application(Object.assign(_,{width:i,height:a}),{container:A,autoAdjust:!!t.autoAdjust&&function(t){var e=w(g);t.fullScreen(e)}});b.view.style.position="relative",v&&(b.app.renderer.plugins.interaction.autoPreventDefault=!1,b.app.renderer.view.style.touchAction="auto");var x=void 0===h?"":"string"==typeof h||"number"==typeof h?h:"env"in h?h.env:"",E={basepath:d,version:h,xhr:y,typeOptions:f},O=new o(E),k=new P,D=new S;k.connect(D);var F=new C(r._core,k),M=r._core.platform(),I={api:F,data:n,env:{hasRewardAd:r._core.hasRewardAd(),isAdPlatform:r._core.isAdPlatform(),isSPDevice:K.isSPDevice(),platform:M,unuseSynkLogo:r._core.unuseSynkLogo(),basepath:d,languages:r._languages,version:x},enum:{errors:c.api,platforms:q,callTypes:Q,registerTypes:X},additional:{},app:b};u&&u({platform:M,platforms:q});var T=O.assetCount+(t.prepareAsync?1:0)+(s?1:0)+(m?1:0);r._setProgressData({end:.8,count:T}),O.on(e.EVENT_LOADER_ASSET_LOADED,(function(){r._forwardProgress()}));var G=[];G.push(O.prepareAsync()),t.prepareAsync&&G.push(t.prepareAsync());var z={};s&&G.push(s({basepath:d,platform:M,platforms:q}).then((function(t){for(var e in r._forwardProgress(),t)z[e]=t[e]})));var j={};m&&G.push(m({basepath:d,platform:M,platforms:q}).then((function(t){for(var e in r._forwardProgress(),t)j[e]=t[e]})));var R=function(t,n,r,o,i,a){var s=function(t){var n=new t.Content(r);if(n.addVars(i()),t.onProgress){var o=n.assetCount,a=0;n.on(e.EVENT_LOADER_ASSET_LOADED,(function(){t.onProgress(++a,o)}))}return n.prepareAsync().then((function(){return n}))};(o=o||[]).indexOf("main")>-1&&o.splice(o.indexOf("main"),1);for(var p=[].concat("main",o),u=0;u<p.length;u++)t.addLayer(p[u]);var l=function(e,n){return void 0===n&&(n="main"),-1===p.indexOf(n)?Promise.reject(new c.ApiError({type:c.api.UndefinedLayer})):t.attachAsync(e,n)};return n.on("prepareContent",(function(e){var n=function(){e.data,s(e.data).then((function(n){e.data.onFinish((function(e){return l(n,e).then((function(e){return{root:e,detach:function(){t.detach(n)}}}))}))})).catch((function(t){e.data.isThrowError?e.data.onError(t):a().then((function(){n()}))}))};n()})),l}(b,D,E,l,(function(){return I}),(function(){return r._addModalAsync(p.ApiError)}));return Promise.all(G).then((function(){for(var e in z)I.additional[e]=z[e];for(var n in j)I.additional[n]=j[n];return r._setProgressData({end:.9,count:1}),t.onPreloaded?t.onPreloaded():Promise.resolve()})).then((function(){O.addVars(I);var e=w(g);return b.fullScreen(e),r._setProgressData({end:1,count:1}),R(O,"main").then((function(e){return t.onPrepared?t.onPrepared():Promise.resolve()}))})).then((function(){return r._finishProgress(),b.play(),b}))}))},n}(m);var $=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._createGameEngine=function(t){return new Z(t,this._gameEngineOptions)},e}(l),tt=function(t){this._data=t||{}};tt.prototype.updateData=function(t){this._data=t},tt.prototype.get=function(t){if(t in this._data)return this._data[t]},tt.prototype.set=function(t,e,n){switch(void 0===n&&(n="always"),n){case"more":if(this.get(t)>=e)return;break;case"less":if(this.get(t)<=e)return;break;case"always":break;default:return}this._data[t]=e},tt.prototype.json=function(){return JSON.stringify(this._data)},tt.prototype.copy=function(){return JSON.parse(JSON.stringify(this._data))};var et="___SYSTEM___",nt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.emit=function(e,n){return t.prototype.emit.call(this,e,n)},e}(y),rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.on=function(e,n){return t.prototype.on.call(this,e,n)},e.prototype.once=function(e,n){return t.prototype.once.call(this,e,n)},e}(y),ot=function(t,e){this._autoFlushWithSendScore=!0,this._isGameStarted=!1,this._playCycle="wait",this._isInitialize=!1;var n=t.languages;this._options=e,this._languages=n,this._transmitter=new nt,this._dataManager=new tt};ot.prototype.createReceiver=function(){var t=new rt;return this._transmitter.connect(t),t},ot.prototype._viewFilter=function(){this._transmitter.emit("viewFilter")},ot.prototype._hideFilter=function(){this._transmitter.emit("hideFilter")},ot.prototype._addModalAsync=function(t,e,n){var r=this;return void 0===n&&(n=!1),n?Promise.reject(e):new Promise((function(e){r._transmitter.emit("addModal",{type:t,onFinish:e})}))},ot.prototype.initializeAsync=function(){var t=this;return this._initializeAsync().then((function(){t._isInitialize=!0}))},ot.prototype.loadDataAsync=function(){return this._isInitialize?this._loadDataAsync():Promise.reject()},ot.prototype.introAsync=function(){return this._introAsync()},ot.prototype.startAsync=function(t,e){return this._isInitialize?this._startAsync(t,e):Promise.reject()},ot.prototype.sendScoreAsync=function(t,e){var n=this;if(!this._isInitialize)return Promise.reject();var r=e.data,o=e.isThrowError;return"playing"!==this._playCycle?Promise.reject(new c.ApiError({type:c.api.CycleTiming,message:'You must call the notice API "playGame" in advance.'})):(this._viewFilter(),(this._autoFlushWithSendScore?this.flushDataAsync(e):Promise.resolve()).then((function(){var e=function(){return n._sendScoreAsync(t,r).catch((function(t){return n._addModalAsync(p.ApiError,t,o).then(e)}))};return e()})).then((function(){n._playCycle="sended",n._hideFilter()})).catch((function(t){throw n._hideFilter(),t})))},ot.prototype.viewAdAsync=function(t){var e=this;if(!this._isInitialize)return Promise.reject();var n=t.data;return this._viewFilter(),this._viewAdAsync(n).then((function(){e._hideFilter()})).catch((function(t){throw e._hideFilter(),t}))},ot.prototype.viewRewardAdAsync=function(t){var e=this;if(!this._isInitialize)return Promise.reject();var n=t.data;return this._viewFilter(),this._viewRewardAdAsync(n).then((function(){e._hideFilter()})).catch((function(t){return e._hideFilter(),e._addModalAsync(p.RewardAdApiError,t).then((function(){throw t}))}))},ot.prototype.setDataAsync=function(t,e,n,r){var o=this;if(!this._isInitialize)return Promise.reject();var i=r.data,a=r.isThrowError,s=function(){return o._setDataAsync(t,e,n,i).catch((function(t){return o._addModalAsync(p.ApiError,t,a).then((function(){return s()}))}))};return s()},ot.prototype.setDataAllAsync=function(t,e){var n=this;if(!this._isInitialize)return Promise.reject();var r=e.data;e.isThrowError;return Promise.resolve().then((function(){for(var e=[],o={data:r,isThrowError:!0},i=0;i<t.length;i++){var a=t[i];e.push(n.setDataAsync(a.key,a.value,a.registerType,o))}return Promise.all(e)})).then((function(){}))},ot.prototype._setDataAsync=function(t,e,n,r){return this._dataManager.set(t,e,n),Promise.resolve()},ot.prototype.flushDataAsync=function(t){var e=this;if(!this._isInitialize)return Promise.reject();var n=t.data,r=t.isThrowError,o=function(){return e._flushDataAsync(n).catch((function(t){return e._addModalAsync(p.ApiError,t,r).then((function(){return o()}))}))};return o().then((function(){e._transmitter.emit("dataFlushed",e._dataManager.copy())}))},ot.prototype.callAsync=function(t,e){var n=this;if(!this._isInitialize)return Promise.reject();var r=e.data,o=e.isThrowError,i=function(){return n._callAsync(t,r).catch((function(t){return n._addModalAsync(p.ApiError,t,o).then((function(){return i()}))}))};return i().then((function(){if(it[t])return it[t].call(n,r)}))},ot.prototype._callAsync=function(t,e){return Promise.resolve()},ot.prototype.getLanguage=function(){var t=this._getSystemData().language,e=this._languages;return t&&e.indexOf(t)>-1?t:e[0]},ot.prototype.changeLanguageAsync=function(t,e){if(!this._isInitialize)return Promise.reject();if(-1===this._languages.indexOf(t))return Promise.reject(new c.ApiError({type:c.api.UnsupportedLanguage,original:null,message:t}));var n=this._getSystemData();return n.language=t,this._setSystemDataAsync(n,e)},ot.prototype._getSystemData=function(){return this._dataManager.get(et)||{}},ot.prototype._setSystemDataAsync=function(t,e){return this.setDataAsync(et,t,"always",e)};var it={startGame:function(){if(this._isGameStarted)throw new c.ApiError({type:c.api.CycleTiming,message:'The notice API "startGame" must not be executed multiple times.'});return this._isGameStarted=!0,this._options.startGameHook?this._options.startGameHook():Promise.resolve()},playGame:function(){if(!this._isGameStarted)throw new c.ApiError({type:c.api.CycleTiming,message:'You must execute the call API "startGame" in advance.'});if("wait"!==this._playCycle)throw new c.ApiError({type:c.api.CycleTiming,message:'You must execute the call API "quitGame" or "finishPlay" in advance.'});return this._playCycle="playing",this._options.playGameHook?this._options.playGameHook():Promise.resolve()},quitGame:function(){if(!this._isGameStarted)throw new c.ApiError({type:c.api.CycleTiming,message:'You must execute the call API "startGame" in advance.'});if("playing"!==this._playCycle)throw new c.ApiError({type:c.api.CycleTiming,message:'You must execute the call API "playGame" in advance.'});return this._playCycle="wait",this._options.quitGameHook?this._options.quitGameHook():Promise.resolve()},finishPlay:function(){if(!this._isGameStarted)throw new c.ApiError({type:c.api.CycleTiming,message:'You must execute the call API "startGame" in advance.'});if("sended"!==this._playCycle)throw new c.ApiError({type:c.api.CycleTiming,message:"You must execute the send score API in advance."});return this._playCycle="wait",this._options.finishPlayHook?this._options.finishPlayHook():Promise.resolve()}},at=window.localStorage;function st(){return!!at}var ct=function(t){this._key=t};function pt(t){var e=document.createElement("div");e.style.width="100%",e.style.height="100%",e.style.backgroundColor="#FFF",e.style.textAlign="center",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.display="table",e.style.zIndex="5",e.style.userSelect="none";var n=e.appendChild(document.createElement("div"));n.style.display="table-cell",n.style.verticalAlign="middle";var r=n.appendChild(document.createElement("div"));r.style.width="min(90%, 330px)",r.style.display="inline-block",r.style.fontSize="14px";var o=r.appendChild(document.createElement("div"));if(o.style.margin="20px 10px",o.style.lineHeight="30px",t.icon){var i=o.appendChild(document.createElement("img"));i.src=t.icon,i.style.borderRadius="20%",o.appendChild(document.createElement("br"))}var a=o.appendChild(document.createElement("div"));return a.style.backgroundColor="#E99",a.style.color="#FFF",a.style.fontWeight="bold",a.style.cursor="pointer",a.style.fontSize="24px",a.style.display="inline-block",a.style.width="60%",a.style.lineHeight="50px",a.style.marginTop="30px",a.style.borderRadius="10px",a.style.boxShadow="#000 2px 2px 2px",a.appendChild(document.createTextNode(t.buttonText)),a.addEventListener("click",(function(){t.onFinish()})),e}ct.prototype.get=function(){if(!st())return console.warn('[SCG]: "localStorage" is unsupported.'),{};var t=at.getItem(this._key);if(!t)return{};try{return JSON.parse(t)}catch(t){return{}}},ct.prototype.set=function(t){if(st())try{at.setItem(this._key,JSON.stringify(t))}catch(t){return}else console.warn('[SCG]: "localStorage" is unsupported.')};var ut=function(t){function e(e,n){if(t.call(this,e,n),!n.gameId)throw new Error('[SCG-GameDistribution] Missing option "gameId"');if(!n.sdk)throw new Error('[SCG-GameDistribution] Missing option "sdk"');if(!n.contentKey)throw new Error('[SCG-GameDistribution] Missing option "contentKey"');n.introOptions=n.introOptions||{},this._storage=new ct("snkgd-"+n.contentKey)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initializeAsync=function(){var t=this;return new Promise((function(e,n){var r,o,i,a,s;window.GD_OPTIONS={gameId:t._options.gameId,prefix:"snk__",onEvent:function(r){switch(r.name){case"SDK_READY":return"undefined"!==window.gdsdk&&window.gdsdk.preloadAd,void e();case"SDK_ERROR":return void n(r);case"SDK_GAME_START":var o=t._adCallback;return t._adCallback=t._adResolver=t._adError=null,void(o&&o());case"SDK_REWARDED_WATCH_COMPLETE":return void(t._adCallback=t._adResolver);case"AD_ERROR":return void(t._adError=r)}}},r=document,o="script",i="gamedistribution-jssdk",s=r.getElementsByTagName(o)[0],r.getElementById(i)||((a=r.createElement(o)).id=i,a.src=t._options.sdk,s.parentNode.insertBefore(a,s))}))},e.prototype._introAsync=function(){var t=this;return this._options.usePrerollAd?new Promise((function(e){var n=t.getLanguage(),r=t._options.introOptions.buttonTexts&&t._options.introOptions.buttonTexts[n]?t._options.introOptions.buttonTexts[n]:"PLAY",o=(t._options.introOptions.createHandler?t._options.introOptions.createHandler:pt)({onFinish:function(){e(o)},buttonText:r,icon:t._options.introOptions.icon});(t._options.introOptions.container||document.body).appendChild(o)})).then((function(e){return t.viewAdAsync({}).catch((function(t){return t})).then((function(){e.parentNode&&e.parentNode.removeChild(e)}))})):Promise.resolve()},e.prototype._startAsync=function(t,e){return Promise.resolve({adjuster:function(t){var e=window.innerWidth/window.innerHeight<t,n=e?window.innerWidth:window.innerHeight*t,r=e?window.innerWidth/t:window.innerHeight;return{x:(window.innerWidth-n)/2,y:(window.innerHeight-r)/2,width:n,height:r}},autoAdjust:!0})},e.prototype._showAd=function(t,e,n){var r=this;if(void 0===t&&(t=""),"undefined"!==window.gdsdk&&"undefined"!==window.gdsdk.showAd)return this._transmitter.emit("viewFilter","rgba(0, 0, 0, 0.6)"),void("rewarded"===t?(this._adCallback=function(){r._transmitter.emit("hideFilter"),n&&n(new c.ApiError({type:c.api.AdSkipped,original:r._adError}))},this._adResolver=function(){r._transmitter.emit("hideFilter"),e()},window.gdsdk.showAd("rewarded")):(this._adCallback=function(){r._transmitter.emit("hideFilter"),e()},window.gdsdk.showAd()));n?n(new c.ApiError({type:c.api.AdMissing})):e()},e.prototype._loadDataAsync=function(){return this._dataManager.updateData(this._storage.get()),Promise.resolve(this._dataManager.copy())},e.prototype._sendScoreAsync=function(t){var e=this;return new Promise((function(t,n){e._showAd("",t,n)})).catch((function(t){return t}))},e.prototype._viewAdAsync=function(){var t=this;return new Promise((function(e,n){t._showAd("",e,n)})).catch((function(t){throw new c.ApiError({type:c.api.AdSkipped,original:t})}))},e.prototype._viewRewardAdAsync=function(){var t=this;return new Promise((function(e,n){t._showAd("rewarded",e,n)})).then((function(){console.warn("OK")})).catch((function(t){throw console.warn(t),new c.ApiError({type:c.api.AdSkipped,original:t})}))},e.prototype.hasRewardAd=function(){return!0},e.prototype.isAdPlatform=function(){return!0},e.prototype.platform=function(){return q.GameDistribution},e.prototype.unuseSynkLogo=function(){return!0},e.prototype._flushDataAsync=function(){return this._storage.set(this._dataManager.copy()),Promise.resolve()},e}(ot),lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.startAsync=function(t){return this._buildAsync(ut,t)},e}($);return new lt}({Howl:"undefined"==typeof Howl?null:Howl,Howler:"undefined"==typeof Howler?null:Howler},Pixim,PIXI);
